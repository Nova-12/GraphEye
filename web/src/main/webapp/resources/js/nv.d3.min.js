(function(){function a(g,f){return(new Date(f,g+1,0)).getDate()}function c(g,f,h){return function(m,k,l){var n=g(m),j=[];n<m&&f(n);if(l>1){while(n<k){var e=new Date(+n);h(e)%l===0&&j.push(e),f(n)}}else{while(n<k){j.push(new Date(+n)),f(n)}}return j}}var b=window.nv||{};b.version="1.1.15b",b.dev=!0,window.nv=b,b.tooltip=b.tooltip||{},b.utils=b.utils||{},b.models=b.models||{},b.charts={},b.graphs=[],b.logs={},b.dispatch=d3.dispatch("render_start","render_end"),b.dev&&(b.dispatch.on("render_start",function(e){b.logs.startTime=+(new Date)}),b.dispatch.on("render_end",function(e){b.logs.endTime=+(new Date),b.logs.totalTime=b.logs.endTime-b.logs.startTime,b.log("total",b.logs.totalTime)})),b.log=function(){if(b.dev&&console.log&&console.log.apply){console.log.apply(console,arguments)}else{if(b.dev&&typeof console.log=="function"&&Function.prototype.bind){var e=Function.prototype.bind.call(console.log,console);e.apply(console,arguments)}}return arguments[arguments.length-1]},b.render=function(e){e=e||1,b.render.active=!0,b.dispatch.render_start(),setTimeout(function(){var g,h;for(var f=0;f<e&&(h=b.render.queue[f]);f++){g=h.generate(),typeof h.callback==typeof Function&&h.callback(g),b.graphs.push(g)}b.render.queue.splice(0,f),b.render.queue.length?setTimeout(arguments.callee,0):(b.dispatch.render_end(),b.render.active=!1)},0)},b.render.active=!1,b.render.queue=[],b.addGraph=function(e){typeof arguments[0]==typeof Function&&(e={generate:arguments[0],callback:arguments[1]}),b.render.queue.push(e),b.render.active||b.render()},b.identity=function(f){return f},b.strip=function(f){return f.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(f){return new Date(f.getFullYear(),f.getMonth(),0)},d3.time.monthEnds=c(d3.time.monthEnd,function(f){f.setUTCDate(f.getUTCDate()+1),f.setDate(a(f.getMonth()+1,f.getFullYear()))},function(f){return f.getMonth()}),b.interactiveGuideline=function(){function p(f){f.each(function(u){function r(){var B=d3.mouse(this),D=B[0],z=B[1],C=!0,y=!1;j&&(D=d3.event.offsetX,z=d3.event.offsetY,d3.event.target.tagName!=="svg"&&(C=!1),d3.event.target.className.baseVal.match("nv-legend")&&(y=!0)),C&&(D-=k.left,z-=k.top);if(D<0||z<0||D>s||z>t||d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined||y){if(j&&d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&d3.event.relatedTarget.className.match(w.nvPointerEventsClass)){return}v.elementMouseout({mouseX:D,mouseY:z}),p.renderGuideLine(null);return}var A=x.invert(D);v.elementMousemove({mouseX:D,mouseY:z,pointXValue:A}),d3.event.type==="dblclick"&&v.elementDblclick({mouseX:D,mouseY:z,pointXValue:A})}var n=d3.select(this),s=h||960,t=e||400,l=n.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([u]),i=l.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");i.append("g").attr("class","nv-interactiveGuideLine");if(!m){return}m.on("mousemove",r,!0).on("mouseout",r,!0).on("dblclick",r),p.renderGuideLine=function(o){if(!q){return}var y=l.select(".nv-interactiveGuideLine").selectAll("line").data(o!=null?[b.utils.NaNtoZero(o)]:[],String);y.enter().append("line").attr("class","nv-guideline").attr("x1",function(z){return z}).attr("x2",function(z){return z}).attr("y1",t).attr("y2",0),y.exit().remove()}})}var w=b.models.tooltip(),h=null,e=null,k={left:0,top:0},x=d3.scale.linear(),g=d3.scale.linear(),v=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),q=!0,m=null,j=navigator.userAgent.indexOf("MSIE")!==-1;return p.dispatch=v,p.tooltip=w,p.margin=function(f){return arguments.length?(k.top=typeof f.top!="undefined"?f.top:k.top,k.left=typeof f.left!="undefined"?f.left:k.left,p):k},p.width=function(f){return arguments.length?(h=f,p):h},p.height=function(f){return arguments.length?(e=f,p):e},p.xScale=function(f){return arguments.length?(x=f,p):x},p.showGuideLine=function(f){return arguments.length?(q=f,p):q},p.svgContainer=function(f){return arguments.length?(m=f,p):m},p},b.interactiveBisect=function(l,h,p){if(!l instanceof Array){return null}typeof p!="function"&&(p=function(n,i){return n.x});var k=d3.bisector(p).left,g=d3.max([0,k(l,h)-1]),j=p(l[g],g);typeof j=="undefined"&&(j=g);if(j===h){return g}var m=d3.min([g+1,l.length-1]),f=p(l[m],m);return typeof f=="undefined"&&(f=m),Math.abs(f-h)>=Math.abs(j-h)?g:m},b.nearestValueIndex=function(j,g,k){var h=Infinity,f=null;return j.forEach(function(l,i){var m=Math.abs(g-l);m<=h&&m<k&&(h=m,f=i)}),f},function(){window.nv.tooltip={},window.nv.models.tooltip=function(){function e(){if(N){var g=d3.select(N);g.node().tagName!=="svg"&&(g=g.select("svg"));var f=g.node()?g.attr("viewBox"):null;if(f){f=f.split(" ");var h=parseInt(g.style("width"))/f[2];F.left=F.left*h,F.top=F.top*h}}}function M(g){var f;N?f=d3.select(N):f=d3.select("body");var h=f.select(".nvtooltip");return h.node()===null&&(h=f.append("div").attr("class","nvtooltip "+(q?q:"xy-tooltip")).attr("id",H)),h.node().innerHTML=g,h.style("top",0).style("left",0).style("opacity",0),h.selectAll("div, table, td, tr").classed(B,!0),h.classed(B,!0),h.node()}function j(){if(!L){return}if(!I(D)){return}e();var s=F.left,r=C!=null?C:F.top,l=M(E(D));J=l;if(N){var f=N.getElementsByTagName("svg")[0],m=f?f.getBoundingClientRect():N.getBoundingClientRect(),o={left:0,top:0};if(f){var w=f.getBoundingClientRect(),i=N.getBoundingClientRect(),n=w.top;if(n<0){var g=N.getBoundingClientRect();n=Math.abs(n)>g.height?0:n}o.top=Math.abs(n-i.top),o.left=Math.abs(w.left-i.left)}s+=N.offsetLeft+o.left-2*N.scrollLeft,r+=N.offsetTop+o.top-2*N.scrollTop}return z&&z>0&&(r=Math.floor(r/z)*z),b.tooltip.calcTooltipPosition([s,r],A,G,l),j}var x=null,D=null,A="w",G=50,z=25,C=null,q=null,N=null,J=null,F={left:null,top:null},L=!0,H="nvtooltip-"+Math.floor(Math.random()*100000),B="nv-pointer-events-none",K=function(g,f){return g},k=function(f){return f},E=function(l){if(x!=null){return x}if(l==null){return""}var p=d3.select(document.createElement("table")),h=p.selectAll("thead").data([l]).enter().append("thead");h.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(k(l.value));var f=p.selectAll("tbody").data([l]).enter().append("tbody"),g=f.selectAll("tr").data(function(i){return i.series}).enter().append("tr").classed("highlight",function(i){return i.highlight});g.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(i){return i.color}),g.append("td").classed("key",!0).html(function(i){return i.key}),g.append("td").classed("value",!0).html(function(n,i){return K(n.value,i)}),g.selectAll("td").each(function(o){if(o.highlight){var i=d3.scale.linear().domain([0,1]).range(["#fff",o.color]),r=0.6;d3.select(this).style("border-bottom-color",i(r)).style("border-top-color",i(r))}});var m=p.node().outerHTML;return l.footer!==undefined&&(m+="<div class='footer'>"+l.footer+"</div>"),m},I=function(f){return f&&f.series&&f.series.length>0?!0:!1};return j.nvPointerEventsClass=B,j.content=function(f){return arguments.length?(x=f,j):x},j.tooltipElem=function(){return J},j.contentGenerator=function(f){return arguments.length?(typeof f=="function"&&(E=f),j):E},j.data=function(f){return arguments.length?(D=f,j):D},j.gravity=function(f){return arguments.length?(A=f,j):A},j.distance=function(f){return arguments.length?(G=f,j):G},j.snapDistance=function(f){return arguments.length?(z=f,j):z},j.classes=function(f){return arguments.length?(q=f,j):q},j.chartContainer=function(f){return arguments.length?(N=f,j):N},j.position=function(f){return arguments.length?(F.left=typeof f.left!="undefined"?f.left:F.left,F.top=typeof f.top!="undefined"?f.top:F.top,j):F},j.fixedTop=function(f){return arguments.length?(C=f,j):C},j.enabled=function(f){return arguments.length?(L=f,j):L},j.valueFormatter=function(f){return arguments.length?(typeof f=="function"&&(K=f),j):K},j.headerFormatter=function(f){return arguments.length?(typeof f=="function"&&(k=f),j):k},j.id=function(){return H},j},b.tooltip.show=function(h,m,k,g,j,l){var f=document.createElement("div");f.className="nvtooltip "+(l?l:"xy-tooltip");var e=j;if(!j||j.tagName.match(/g|svg/i)){e=document.getElementsByTagName("body")[0]}f.style.left=0,f.style.top=0,f.style.opacity=0,f.innerHTML=m,e.appendChild(f),j&&(h[0]=h[0]-j.scrollLeft,h[1]=h[1]-j.scrollTop),b.tooltip.calcTooltipPosition(h,k,g,f)},b.tooltip.findFirstNonSVGParent=function(f){while(f.tagName.match(/^g|svg$/i)!==null){f=f.parentNode}return f},b.tooltip.findTotalOffsetTop=function(g,f){var h=f;do{isNaN(g.offsetTop)||(h+=g.offsetTop)}while(g=g.offsetParent);return h},b.tooltip.findTotalOffsetLeft=function(g,f){var h=f;do{isNaN(g.offsetLeft)||(h+=g.offsetLeft)}while(g=g.offsetParent);return h},b.tooltip.calcTooltipPosition=function(F,k,e,x){var G=parseInt(x.offsetHeight),j=parseInt(x.offsetWidth),E=b.utils.windowSize().width,C=b.utils.windowSize().height,z=window.pageYOffset,w=window.pageXOffset,B,y;C=window.innerWidth>=document.body.scrollWidth?C:C-16,E=window.innerHeight>=document.body.scrollHeight?E:E-16,k=k||"s",e=e||20;var g=function(f){return b.tooltip.findTotalOffsetTop(f,y)},A=function(f){return b.tooltip.findTotalOffsetLeft(f,B)};switch(k){case"e":B=F[0]-j-e,y=F[1]-G/2;var D=A(x),q=g(x);D<w&&(B=F[0]+e>w?F[0]+e:w-D+B),q<z&&(y=z-q+y),q+G>z+C&&(y=z+C-q+y-G);break;case"w":B=F[0]+e,y=F[1]-G/2;var D=A(x),q=g(x);D+j>E&&(B=F[0]-j-e),q<z&&(y=z+5),q+G>z+C&&(y=z+C-q+y-G);break;case"n":B=F[0]-j/2-5,y=F[1]+e;var D=A(x),q=g(x);D<w&&(B=w+5),D+j>E&&(B=B-j/2+5),q+G>z+C&&(y=z+C-q+y-G);break;case"s":B=F[0]-j/2,y=F[1]-G-e;var D=A(x),q=g(x);D<w&&(B=w+5),D+j>E&&(B=B-j/2+5),z>q&&(y=z);break;case"none":B=F[0],y=F[1]-e;var D=A(x),q=g(x)}return x.style.left=B+"px",x.style.top=y+"px",x.style.opacity=1,x.style.position="absolute",x},b.tooltip.cleanup=function(){var g=document.getElementsByClassName("nvtooltip"),f=[];while(g.length){f.push(g[0]),g[0].style.transitionDelay="0 !important",g[0].style.opacity=0,g[0].className="nvtooltip-pending-removal"}setTimeout(function(){while(f.length){var h=f.pop();h.parentNode.removeChild(h)}},500)}}(),b.utils.windowSize=function(){var f={width:640,height:480};return document.body&&document.body.offsetWidth&&(f.width=document.body.offsetWidth,f.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(f.width=document.documentElement.offsetWidth,f.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(f.width=window.innerWidth,f.height=window.innerHeight),f},b.utils.windowResize=function(g){if(g===undefined){return}var f=window.onresize;window.onresize=function(e){typeof f=="function"&&f(e),g(e)}},b.utils.getColor=function(e){return arguments.length?Object.prototype.toString.call(e)==="[object Array]"?function(f,g){return f.color||e[g%e.length]}:e:b.utils.defaultColor()},b.utils.defaultColor=function(){var f=d3.scale.category20().range();return function(e,g){return e.color||f[g%f.length]}},b.utils.customTheme=function(h,f,i){f=f||function(j){return j.key},i=i||d3.scale.category20().range();var g=i.length;return function(e,j){var k=f(e);return g||(g=i.length),typeof h[k]!="undefined"?typeof h[k]=="function"?h[k]():h[k]:i[--g]}},b.utils.pjax=function(e,g){function f(h){d3.html(h,function(k){var j=d3.select(g).node();j.parentNode.replaceChild(d3.select(k).select(g).node(),j),b.utils.pjax(e,g)})}d3.selectAll(e).on("click",function(){history.pushState(this.href,this.textContent,this.href),f(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&f(d3.event.state)})},b.utils.calcApproxTextWidth=function(g){if(typeof g.style=="function"&&typeof g.text=="function"){var f=parseInt(g.style("font-size").replace("px","")),h=g.text().length;return h*f*0.5}return 0},b.utils.NaNtoZero=function(f){return typeof f!="number"||isNaN(f)||f===null||f===Infinity?0:f},b.utils.optionsFunc=function(f){return f&&d3.map(f).forEach(function(h,g){typeof this[h]=="function"&&this[h](g)}.bind(this)),this},b.models.axis=function(){function q(f){return f.each(function(u){var r=d3.select(this),l=r.selectAll("g.nv-wrap.nv-axis").data([u]),s=l.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),H=s.append("g"),I=l.select("g");g!==null?F.ticks(g):(F.orient()=="top"||F.orient()=="bottom")&&F.ticks(Math.abs(G.range()[1]-G.range()[0])/100),I.transition().call(F),D=D||F.scale();var K=F.tickFormat();K==null&&(K=D.tickFormat());var M=I.selectAll("text.nv-axislabel").data([j||null]);M.exit().remove();switch(F.orient()){case"top":M.enter().append("text").attr("class","nv-axislabel");var p=G.range().length==2?G.range()[1]:G.range()[G.range().length-1]+(G.range()[1]-G.range()[0]);M.attr("text-anchor","middle").attr("y",0).attr("x",p/2);if(E){var J=l.selectAll("g.nv-axisMaxMin").data(G.domain());J.enter().append("g").attr("class","nv-axisMaxMin").append("text"),J.exit().remove(),J.attr("transform",function(m,i){return"translate("+G(m)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-F.tickPadding()).attr("text-anchor","middle").text(function(m,i){var L=K(m);return(""+L).match("NaN")?"":L}),J.transition().attr("transform",function(m,i){return"translate("+G.range()[i]+",0)"})}break;case"bottom":var o=36,t=30,h=I.selectAll("g").select("text");if(z%360){h.each(function(m,i){var L=this.getBBox().width;L>t&&(t=L)});var n=Math.abs(Math.sin(z*Math.PI/180)),o=(n?n*t:t)+30;h.attr("transform",function(m,i,L){return"rotate("+z+" 0,0)"}).style("text-anchor",z%360>0?"start":"end")}M.enter().append("text").attr("class","nv-axislabel");var p=G.range().length==2?G.range()[1]:G.range()[G.range().length-1]+(G.range()[1]-G.range()[0]);M.attr("text-anchor","middle").attr("y",o).attr("x",p/2);if(E){var J=l.selectAll("g.nv-axisMaxMin").data([G.domain()[0],G.domain()[G.domain().length-1]]);J.enter().append("g").attr("class","nv-axisMaxMin").append("text"),J.exit().remove(),J.attr("transform",function(m,i){return"translate("+(G(m)+(y?G.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",F.tickPadding()).attr("transform",function(m,i,L){return"rotate("+z+" 0,0)"}).style("text-anchor",z?z%360>0?"start":"end":"middle").text(function(m,i){var L=K(m);return(""+L).match("NaN")?"":L}),J.transition().attr("transform",function(m,i){return"translate("+(G(m)+(y?G.rangeBand()/2:0))+",0)"})}B&&h.attr("transform",function(m,i){return"translate(0,"+(i%2==0?"0":"12")+")"});break;case"right":M.enter().append("text").attr("class","nv-axislabel"),M.style("text-anchor",w?"middle":"begin").attr("transform",w?"rotate(90)":"").attr("y",w?-Math.max(k.right,e)+12:-10).attr("x",w?G.range()[0]/2:F.tickPadding());if(E){var J=l.selectAll("g.nv-axisMaxMin").data(G.domain());J.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),J.exit().remove(),J.attr("transform",function(m,i){return"translate(0,"+G(m)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",F.tickPadding()).style("text-anchor","start").text(function(m,i){var L=K(m);return(""+L).match("NaN")?"":L}),J.transition().attr("transform",function(m,i){return"translate(0,"+G.range()[i]+")"}).select("text").style("opacity",1)}break;case"left":M.enter().append("text").attr("class","nv-axislabel"),M.style("text-anchor",w?"middle":"end").attr("transform",w?"rotate(-90)":"").attr("y",w?-Math.max(k.left,e)+A:-10).attr("x",w?-G.range()[0]/2:-F.tickPadding());if(E){var J=l.selectAll("g.nv-axisMaxMin").data(G.domain());J.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),J.exit().remove(),J.attr("transform",function(m,i){return"translate(0,"+D(m)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-F.tickPadding()).attr("text-anchor","end").text(function(m,i){var L=K(m);return(""+L).match("NaN")?"":L}),J.transition().attr("transform",function(m,i){return"translate(0,"+G.range()[i]+")"}).select("text").style("opacity",1)}}M.text(function(i){return i}),E&&(F.orient()==="left"||F.orient()==="right")&&(I.selectAll("g").each(function(m,i){d3.select(this).select("text").attr("opacity",1);if(G(m)<G.range()[1]+10||G(m)>G.range()[0]-10){(m>1e-10||m<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}}),G.domain()[0]==G.domain()[1]&&G.domain()[0]==0&&l.selectAll("g.nv-axisMaxMin").style("opacity",function(m,i){return i?0:1}));if(E&&(F.orient()==="top"||F.orient()==="bottom")){var v=[];l.selectAll("g.nv-axisMaxMin").each(function(m,i){try{i?v.push(G(m)-this.getBBox().width-4):v.push(G(m)+this.getBBox().width+4)}catch(L){i?v.push(G(m)-4):v.push(G(m)+4)}}),I.selectAll("g").each(function(m,i){if(G(m)<v[0]||G(m)>v[1]){m>1e-10||m<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()}})}C&&I.selectAll(".tick").filter(function(i){return !parseFloat(Math.round(i.__data__*100000)/1000000)&&i.__data__!==undefined}).classed("zero",!0),D=G.copy()}),q}var F=d3.svg.axis(),k={top:0,right:0,bottom:0,left:0},e=75,x=60,G=d3.scale.linear(),j=null,E=!0,C=!0,z=0,w=!0,B=!1,y=!1,g=null,A=12;F.scale(G).orient("bottom").tickFormat(function(f){return f});var D;return q.axis=F,d3.rebind(q,F,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(q,G,"domain","range","rangeBand","rangeBands"),q.options=b.utils.optionsFunc.bind(q),q.margin=function(f){return arguments.length?(k.top=typeof f.top!="undefined"?f.top:k.top,k.right=typeof f.right!="undefined"?f.right:k.right,k.bottom=typeof f.bottom!="undefined"?f.bottom:k.bottom,k.left=typeof f.left!="undefined"?f.left:k.left,q):k},q.width=function(f){return arguments.length?(e=f,q):e},q.ticks=function(f){return arguments.length?(g=f,q):g},q.height=function(f){return arguments.length?(x=f,q):x},q.axisLabel=function(f){return arguments.length?(j=f,q):j},q.showMaxMin=function(f){return arguments.length?(E=f,q):E},q.highlightZero=function(f){return arguments.length?(C=f,q):C},q.scale=function(f){return arguments.length?(G=f,F.scale(G),y=typeof G.rangeBands=="function",d3.rebind(q,G,"domain","range","rangeBand","rangeBands"),q):G},q.rotateYLabel=function(f){return arguments.length?(w=f,q):w},q.rotateLabels=function(f){return arguments.length?(z=f,q):z},q.staggerLabels=function(f){return arguments.length?(B=f,q):B},q.axisLabelDistance=function(f){return arguments.length?(A=f,q):A},q},b.models.bullet=function(){function q(f){return f.each(function(ac,X){var W=B-F.left-F.right,Y=y-F.top-F.bottom,ab=d3.select(this),u=x.call(this,ac,X).slice().sort(d3.descending),ad=G.call(this,ac,X).slice().sort(d3.descending),J=j.call(this,ac,X).slice().sort(d3.descending),K=E.call(this,ac,X).slice(),i=C.call(this,ac,X).slice(),v=z.call(this,ac,X).slice(),h=d3.scale.linear().domain(d3.extent(d3.merge([w,u]))).range(e?[W,0]:[0,W]),r=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(h.range());this.__chart__=h;var R=d3.min(u),Z=d3.max(u),t=u[1],V=ab.selectAll("g.nv-wrap.nv-bullet").data([ac]),o=V.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),s=o.append("g"),ae=V.select("g");s.append("rect").attr("class","nv-range nv-rangeMax"),s.append("rect").attr("class","nv-range nv-rangeAvg"),s.append("rect").attr("class","nv-range nv-rangeMin"),s.append("rect").attr("class","nv-measure"),s.append("path").attr("class","nv-markerTriangle"),V.attr("transform","translate("+F.left+","+F.top+")");var Q=function(m){return Math.abs(r(m)-r(0))},l=function(m){return Math.abs(h(m)-h(0))},I=function(m){return m<0?r(m):r(0)},U=function(m){return m<0?h(m):h(0)};ae.select("rect.nv-rangeMax").attr("height",Y).attr("width",l(Z>0?Z:R)).attr("x",U(Z>0?Z:R)).datum(Z>0?Z:R),ae.select("rect.nv-rangeAvg").attr("height",Y).attr("width",l(t)).attr("x",U(t)).datum(t),ae.select("rect.nv-rangeMin").attr("height",Y).attr("width",l(Z)).attr("x",U(Z)).attr("width",l(Z>0?R:Z)).attr("x",U(Z>0?R:Z)).datum(Z>0?R:Z),ae.select("rect.nv-measure").style("fill",A).attr("height",Y/3).attr("y",Y/3).attr("width",J<0?h(0)-h(J[0]):h(J[0])-h(0)).attr("x",U(J)).on("mouseover",function(){D.elementMouseover({value:J[0],label:v[0]||"Current",pos:[h(J[0]),Y/2]})}).on("mouseout",function(){D.elementMouseout({value:J[0],label:v[0]||"Current"})});var aa=Y/6;ad[0]?ae.selectAll("path.nv-markerTriangle").attr("transform",function(m){return"translate("+h(ad[0])+","+Y/2+")"}).attr("d","M0,"+aa+"L"+aa+","+-aa+" "+-aa+","+-aa+"Z").on("mouseover",function(){D.elementMouseover({value:ad[0],label:i[0]||"Previous",pos:[h(ad[0]),Y/2]})}).on("mouseout",function(){D.elementMouseout({value:ad[0],label:i[0]||"Previous"})}):ae.selectAll("path.nv-markerTriangle").remove(),V.selectAll(".nv-range").on("mouseover",function(p,m){var H=K[m]||(m?m==1?"Mean":"Minimum":"Maximum");D.elementMouseover({value:p,label:H,pos:[h(p),Y/2]})}).on("mouseout",function(p,m){var H=K[m]||(m?m==1?"Mean":"Minimum":"Maximum");D.elementMouseout({value:p,label:H})})}),q}var F={top:0,right:0,bottom:0,left:0},k="left",e=!1,x=function(f){return f.ranges},G=function(f){return f.markers},j=function(f){return f.measures},E=function(f){return f.rangeLabels?f.rangeLabels:[]},C=function(f){return f.markerLabels?f.markerLabels:[]},z=function(f){return f.measureLabels?f.measureLabels:[]},w=[0],B=380,y=30,g=null,A=b.utils.getColor(["#1f77b4"]),D=d3.dispatch("elementMouseover","elementMouseout");return q.dispatch=D,q.options=b.utils.optionsFunc.bind(q),q.orient=function(f){return arguments.length?(k=f,e=k=="right"||k=="bottom",q):k},q.ranges=function(f){return arguments.length?(x=f,q):x},q.markers=function(f){return arguments.length?(G=f,q):G},q.measures=function(f){return arguments.length?(j=f,q):j},q.forceX=function(f){return arguments.length?(w=f,q):w},q.width=function(f){return arguments.length?(B=f,q):B},q.height=function(f){return arguments.length?(y=f,q):y},q.margin=function(f){return arguments.length?(F.top=typeof f.top!="undefined"?f.top:F.top,F.right=typeof f.right!="undefined"?f.right:F.right,F.bottom=typeof f.bottom!="undefined"?f.bottom:F.bottom,F.left=typeof f.left!="undefined"?f.left:F.left,q):F},q.tickFormat=function(f){return arguments.length?(g=f,q):g},q.color=function(f){return arguments.length?(A=b.utils.getColor(f),q):A},q},b.models.bulletChart=function(){function q(f){return f.each(function(W,Z){var aa=d3.select(this),t=(C||parseInt(aa.style("width"))||960)-x.left-x.right,ab=z-x.top-x.bottom,I=this;q.update=function(){q(f)},q.container=this;if(!W||!G.call(this,W,Z)){var K=aa.selectAll(".nv-noData").data([g]);return K.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),K.attr("x",x.left+t/2).attr("y",18+x.top+ab/2).text(function(h){return h}),q}aa.selectAll(".nv-noData").remove();var l=G.call(this,W,Z).slice().sort(d3.descending),u=j.call(this,W,Z).slice().sort(d3.descending),i=E.call(this,W,Z).slice().sort(d3.descending),p=aa.selectAll("g.nv-wrap.nv-bulletChart").data([W]),R=p.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),X=R.append("g"),s=p.select("g");X.append("g").attr("class","nv-bulletWrap"),X.append("g").attr("class","nv-titles"),p.attr("transform","translate("+x.left+","+x.top+")");var V=d3.scale.linear().domain([0,Math.max(l[0],u[0],i[0])]).range(e?[t,0]:[0,t]),o=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(V.range());this.__chart__=V;var r=function(h){return Math.abs(o(h)-o(0))},ac=function(h){return Math.abs(V(h)-V(0))},Q=X.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(z-x.top-x.bottom)/2+")");Q.append("text").attr("class","nv-title").text(function(h){return h.title}),Q.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(h){return h.subtitle}),F.width(t).height(ab);var m=s.select(".nv-bulletWrap");d3.transition(m).call(F);var v=w||V.tickFormat(t/100),U=s.selectAll("g.nv-tick").data(V.ticks(t/50),function(h){return this.textContent||v(h)}),Y=U.enter().append("g").attr("class","nv-tick").attr("transform",function(h){return"translate("+o(h)+",0)"}).style("opacity",0.000001);Y.append("line").attr("y1",ab).attr("y2",ab*7/6),Y.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",ab*7/6).text(v);var J=d3.transition(U).attr("transform",function(h){return"translate("+V(h)+",0)"}).style("opacity",1);J.select("line").attr("y1",ab).attr("y2",ab*7/6),J.select("text").attr("y",ab*7/6),d3.transition(U.exit()).attr("transform",function(h){return"translate("+V(h)+",0)"}).style("opacity",0.000001).remove(),A.on("tooltipShow",function(h){h.key=W.title,B&&D(h,I.parentNode)})}),d3.timer.flush(),q}var F=b.models.bullet(),k="left",e=!1,x={top:5,right:40,bottom:20,left:120},G=function(f){return f.ranges},j=function(f){return f.markers},E=function(f){return f.measures},C=null,z=55,w=null,B=!0,y=function(m,h,o,l,f){return"<h3>"+h+"</h3><p>"+o+"</p>"},g="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide"),D=function(f,m){var i=f.pos[0]+(m.offsetLeft||0)+x.left,h=f.pos[1]+(m.offsetTop||0)+x.top,l=y(f.key,f.label,f.value,f,q);b.tooltip.show([i,h],l,f.value<0?"e":"w",null,m)};return F.dispatch.on("elementMouseover.tooltip",function(f){A.tooltipShow(f)}),F.dispatch.on("elementMouseout.tooltip",function(f){A.tooltipHide(f)}),A.on("tooltipHide",function(){B&&b.tooltip.cleanup()}),q.dispatch=A,q.bullet=F,d3.rebind(q,F,"color"),q.options=b.utils.optionsFunc.bind(q),q.orient=function(f){return arguments.length?(k=f,e=k=="right"||k=="bottom",q):k},q.ranges=function(f){return arguments.length?(G=f,q):G},q.markers=function(f){return arguments.length?(j=f,q):j},q.measures=function(f){return arguments.length?(E=f,q):E},q.width=function(f){return arguments.length?(C=f,q):C},q.height=function(f){return arguments.length?(z=f,q):z},q.margin=function(f){return arguments.length?(x.top=typeof f.top!="undefined"?f.top:x.top,x.right=typeof f.right!="undefined"?f.right:x.right,x.bottom=typeof f.bottom!="undefined"?f.bottom:x.bottom,x.left=typeof f.left!="undefined"?f.left:x.left,q):x},q.tickFormat=function(f){return arguments.length?(w=f,q):w},q.tooltips=function(f){return arguments.length?(B=f,q):B},q.tooltipContent=function(f){return arguments.length?(y=f,q):y},q.noData=function(f){return arguments.length?(g=f,q):g},q},b.models.cumulativeLineChart=function(){function W(f){return f.each(function(O){function E(S,A){d3.select(W.container).style("cursor","ew-resize")}function p(S,A){F.x=d3.event.x,F.i=Math.round(z.invert(F.x)),s()}function n(S,A){d3.select(W.container).style("cursor","auto"),I.index=F.i,af.stateChange(I)}function s(){P.data([F]);var A=W.transitionDuration();W.transitionDuration(0),W.update(),W.transitionDuration(A)}var L=d3.select(this).classed("nv-chart-"+j,!0),x=this,D=(aj||parseInt(L.style("width"))||960)-Q.left-Q.right,M=(ae||parseInt(L.style("height"))||400)-Q.top-Q.bottom;W.update=function(){L.transition().duration(G).call(W)},W.container=this,I.disabled=O.map(function(A){return !!A.disabled});if(!e){var C;e={};for(C in I){I[C] instanceof Array?e[C]=I[C].slice(0):e[C]=I[C]}}var w=d3.behavior.drag().on("dragstart",E).on("drag",p).on("dragend",n);if(!O||!O.length||!O.filter(function(A){return A.values.length}).length){var u=L.selectAll(".nv-noData").data([B]);return u.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),u.attr("x",Q.left+D/2).attr("y",Q.top+M/2).text(function(A){return A}),W}L.selectAll(".nv-noData").remove(),J=U.xScale(),R=U.yScale();if(!H){var l=O.filter(function(A){return !A.disabled}).map(function(S,T){var A=d3.extent(S.values,U.y());return A[0]<-0.95&&(A[0]=-0.95),[(A[0]-A[1])/(1+A[1]),(A[1]-A[0])/(1+A[0])]}),k=[d3.min(l,function(A){return A[0]}),d3.max(l,function(A){return A[1]})];U.yDomain(k)}else{U.yDomain(null)}z.domain([0,O[0].values.length-1]).range([0,D]).clamp(!0);var O=q(F.i,O),m=ai?"none":"all",o=L.selectAll("g.nv-wrap.nv-cumulativeLine").data([O]),v=o.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),t=o.select("g");v.append("g").attr("class","nv-interactive"),v.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),v.append("g").attr("class","nv-y nv-axis"),v.append("g").attr("class","nv-background"),v.append("g").attr("class","nv-linesWrap").style("pointer-events",m),v.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),v.append("g").attr("class","nv-legendWrap"),v.append("g").attr("class","nv-controlsWrap"),al&&(ag.width(D),t.select(".nv-legendWrap").datum(O).call(ag),Q.top!=ag.height()&&(Q.top=ag.height(),M=(ae||parseInt(L.style("height"))||400)-Q.top-Q.bottom),t.select(".nv-legendWrap").attr("transform","translate(0,"+-Q.top+")"));if(ad){var r=[{key:"Re-scale y-axis",disabled:!H}];V.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),t.select(".nv-controlsWrap").datum(r).attr("transform","translate(0,"+-Q.top+")").call(V)}o.attr("transform","translate("+Q.left+","+Q.top+")"),ak&&t.select(".nv-y.nv-axis").attr("transform","translate("+D+",0)");var y=O.filter(function(A){return A.tempDisabled});o.select(".tempDisabled").remove(),y.length&&o.append("text").attr("class","tempDisabled").attr("x",D/2).attr("y","-.71em").style("text-anchor","end").text(y.map(function(A){return A.key}).join(", ")+" values cannot be calculated for this time period."),ai&&(ab.width(D).height(M).margin({left:Q.left,top:Q.top}).svgContainer(L).xScale(J),o.select(".nv-interactive").call(ab)),v.select(".nv-background").append("rect"),t.select(".nv-background rect").attr("width",D).attr("height",M),U.y(function(A){return A.display.y}).width(D).height(M).color(O.map(function(S,A){return S.color||an(S,A)}).filter(function(S,A){return !O[A].disabled&&!O[A].tempDisabled}));var i=t.select(".nv-linesWrap").datum(O.filter(function(A){return !A.disabled&&!A.tempDisabled}));i.call(U),O.forEach(function(S,A){S.seriesIndex=A});var h=O.filter(function(A){return !A.disabled&&!!X(A)}),N=t.select(".nv-avgLinesWrap").selectAll("line").data(h,function(A){return A.key}),g=function(S){var A=R(X(S));return A<0?0:A>M?M:A};N.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(A,S){return U.color()(A,A.seriesIndex)}).attr("x1",0).attr("x2",D).attr("y1",g).attr("y2",g),N.style("stroke-opacity",function(S){var A=R(X(S));return A<0||A>M?0:1}).attr("x1",0).attr("x2",D).attr("y1",g).attr("y2",g),N.exit().remove();var P=i.selectAll(".nv-indexLine").data([F]);P.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",0.5).style("pointer-events","all").call(w),P.attr("transform",function(A){return"translate("+z(A.i)+",0)"}).attr("height",M),ah&&(ac.scale(J).ticks(Math.min(O[0].values.length,D/70)).tickSize(-M,0),t.select(".nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")"),d3.transition(t.select(".nv-x.nv-axis")).call(ac)),aa&&(Y.scale(R).ticks(M/36).tickSize(-D,0),d3.transition(t.select(".nv-y.nv-axis")).call(Y)),t.select(".nv-background rect").on("click",function(){F.x=d3.mouse(this)[0],F.i=Math.round(z.invert(F.x)),I.index=F.i,af.stateChange(I),s()}),U.dispatch.on("elementClick",function(A){F.i=A.pointIndex,F.x=z(F.i),I.index=F.i,af.stateChange(I),s()}),V.dispatch.on("legendClick",function(S,A){S.disabled=!S.disabled,H=!S.disabled,I.rescaleY=H,af.stateChange(I),W.update()}),ag.dispatch.on("stateChange",function(A){I.disabled=A.disabled,af.stateChange(I),W.update()}),ab.dispatch.on("elementMousemove",function(ap){U.clearHighlights();var aw,at,T,av=[];O.filter(function(ay,ax){return ay.seriesIndex=ax,!ay.disabled}).forEach(function(az,ax){at=b.interactiveBisect(az.values,ap.pointXValue,W.x()),U.highlightPoint(ax,at,!0);var ay=az.values[at];if(typeof ay=="undefined"){return}typeof aw=="undefined"&&(aw=ay),typeof T=="undefined"&&(T=W.xScale()(W.x()(ay,at))),av.push({key:az.key,value:W.y()(ay,at),color:an(az,az.seriesIndex)})});if(av.length>2){var aq=W.yScale().invert(ap.mouseY),A=Math.abs(W.yScale().domain()[0]-W.yScale().domain()[1]),au=0.03*A,S=b.nearestValueIndex(av.map(function(ax){return ax.value}),aq,au);S!==null&&(av[S].highlight=!0)}var ar=ac.tickFormat()(W.x()(aw,at),at);ab.tooltip.position({left:T+Q.left,top:ap.mouseY+Q.top}).chartContainer(x.parentNode).enabled(K).valueFormatter(function(ay,ax){return Y.tickFormat()(ay)}).data({value:ar,series:av})(),ab.renderGuideLine(T)}),ab.dispatch.on("elementMouseout",function(A){af.tooltipHide(),U.clearHighlights()}),af.on("tooltipShow",function(A){K&&ao(A,x.parentNode)}),af.on("changeState",function(A){typeof A.disabled!="undefined"&&(O.forEach(function(S,T){S.disabled=A.disabled[T]}),I.disabled=A.disabled),typeof A.index!="undefined"&&(F.i=A.index,F.x=z(F.i),I.index=A.index,P.data([F])),typeof A.rescaleY!="undefined"&&(H=A.rescaleY),W.update()})}),W}function q(f,g){return g.map(function(l,k){if(!l.values){return l}var h=U.y()(l.values[f],f);return h<-0.95&&!Z?(l.tempDisabled=!0,l):(l.tempDisabled=!1,l.values=l.values.map(function(i,m){return i.display={y:(U.y()(i,m)-h)/(1+h)},i}),l)})}var U=b.models.line(),ac=b.models.axis(),Y=b.models.axis(),ag=b.models.legend(),V=b.models.legend(),ab=b.interactiveGuideline(),Q={top:30,right:30,bottom:50,left:60},an=b.utils.defaultColor(),aj=null,ae=null,al=!0,ah=!0,aa=!0,ak=!1,K=!0,ad=!0,ai=!1,H=!0,am=function(k,g,l,h,f){return"<h3>"+k+"</h3><p>"+l+" at "+g+"</p>"},J,R,j=U.id(),I={index:0,rescaleY:H},e=null,B="No Data Available.",X=function(f){return f.average},af=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),G=250,Z=!1;ac.orient("bottom").tickPadding(7),Y.orient(ak?"right":"left"),V.updateState(!1);var z=d3.scale.linear(),F={i:0,x:0},ao=function(m,n){var r=m.pos[0]+(n.offsetLeft||0),k=m.pos[1]+(n.offsetTop||0),h=ac.tickFormat()(U.x()(m.point,m.pointIndex)),p=Y.tickFormat()(U.y()(m.point,m.pointIndex)),g=am(m.series.key,h,p,m,W);b.tooltip.show([r,k],g,null,null,n)};return U.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+Q.left,f.pos[1]+Q.top],af.tooltipShow(f)}),U.dispatch.on("elementMouseout.tooltip",function(f){af.tooltipHide(f)}),af.on("tooltipHide",function(){K&&b.tooltip.cleanup()}),W.dispatch=af,W.lines=U,W.legend=ag,W.xAxis=ac,W.yAxis=Y,W.interactiveLayer=ab,d3.rebind(W,U,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),W.options=b.utils.optionsFunc.bind(W),W.margin=function(f){return arguments.length?(Q.top=typeof f.top!="undefined"?f.top:Q.top,Q.right=typeof f.right!="undefined"?f.right:Q.right,Q.bottom=typeof f.bottom!="undefined"?f.bottom:Q.bottom,Q.left=typeof f.left!="undefined"?f.left:Q.left,W):Q},W.width=function(f){return arguments.length?(aj=f,W):aj},W.height=function(f){return arguments.length?(ae=f,W):ae},W.color=function(f){return arguments.length?(an=b.utils.getColor(f),ag.color(an),W):an},W.rescaleY=function(f){return arguments.length?(H=f,W):H},W.showControls=function(f){return arguments.length?(ad=f,W):ad},W.useInteractiveGuideline=function(f){return arguments.length?(ai=f,f===!0&&(W.interactive(!1),W.useVoronoi(!1)),W):ai},W.showLegend=function(f){return arguments.length?(al=f,W):al},W.showXAxis=function(f){return arguments.length?(ah=f,W):ah},W.showYAxis=function(f){return arguments.length?(aa=f,W):aa},W.rightAlignYAxis=function(f){return arguments.length?(ak=f,Y.orient(f?"right":"left"),W):ak},W.tooltips=function(f){return arguments.length?(K=f,W):K},W.tooltipContent=function(f){return arguments.length?(am=f,W):am},W.state=function(f){return arguments.length?(I=f,W):I},W.defaultState=function(f){return arguments.length?(e=f,W):e},W.noData=function(f){return arguments.length?(B=f,W):B},W.average=function(f){return arguments.length?(X=f,W):X},W.transitionDuration=function(f){return arguments.length?(G=f,W):G},W.noErrorCheck=function(f){return arguments.length?(Z=f,W):Z},W},b.models.discreteBar=function(){function x(f){return f.each(function(s){var o=F-z.left-z.right,v=B-z.top-z.bottom,n=d3.select(this);s.forEach(function(w,i){w.values.forEach(function(y){y.series=i})});var l=C&&M?[]:s.map(function(i){return i.values.map(function(y,w){return{x:q(y,w),y:P(y,w),y0:y.y0}})});A.domain(C||d3.merge(l).map(function(i){return i.x})).rangeBands(k||[0,o],0.1),D.domain(M||d3.extent(d3.merge(l).map(function(i){return i.y}).concat(L))),N?D.range(G||[v-(D.domain()[0]<0?12:0),D.domain()[1]>0?12:0]):D.range(G||[v,0]),O=O||A,j=j||D.copy().range([D(0),D(0)]);var r=n.selectAll("g.nv-wrap.nv-discretebar").data([s]),g=r.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),m=g.append("g"),u=r.select("g");m.append("g").attr("class","nv-groups"),r.attr("transform","translate("+z.left+","+z.top+")");var h=r.select(".nv-groups").selectAll(".nv-group").data(function(i){return i},function(i){return i.key});h.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001),h.exit().transition().style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove(),h.attr("class",function(w,i){return"nv-group nv-series-"+i}).classed("hover",function(i){return i.hover}),h.transition().style("stroke-opacity",1).style("fill-opacity",0.75);var p=h.selectAll("g.nv-bar").data(function(i){return i.values});p.exit().remove();var t=p.enter().append("g").attr("transform",function(w,i,y){return"translate("+(A(q(w,i))+A.rangeBand()*0.05)+", "+D(0)+")"}).on("mouseover",function(i,w){d3.select(this).classed("hover",!0),K.elementMouseover({value:P(i,w),point:i,series:s[i.series],pos:[A(q(i,w))+A.rangeBand()*(i.series+0.5)/s.length,D(P(i,w))],pointIndex:w,seriesIndex:i.series,e:d3.event})}).on("mouseout",function(i,w){d3.select(this).classed("hover",!1),K.elementMouseout({value:P(i,w),point:i,series:s[i.series],pointIndex:w,seriesIndex:i.series,e:d3.event})}).on("click",function(i,w){K.elementClick({value:P(i,w),point:i,series:s[i.series],pos:[A(q(i,w))+A.rangeBand()*(i.series+0.5)/s.length,D(P(i,w))],pointIndex:w,seriesIndex:i.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(i,w){K.elementDblClick({value:P(i,w),point:i,series:s[i.series],pos:[A(q(i,w))+A.rangeBand()*(i.series+0.5)/s.length,D(P(i,w))],pointIndex:w,seriesIndex:i.series,e:d3.event}),d3.event.stopPropagation()});t.append("rect").attr("height",0).attr("width",A.rangeBand()*0.9/s.length),N?(t.append("text").attr("text-anchor","middle"),p.select("text").text(function(w,i){return J(P(w,i))}).transition().attr("x",A.rangeBand()*0.9/2).attr("y",function(w,i){return P(w,i)<0?D(P(w,i))-D(0)+12:-4})):p.selectAll("text").remove(),p.attr("class",function(w,i){return P(w,i)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(w,i){return w.color||H(w,i)}).style("stroke",function(w,i){return w.color||H(w,i)}).select("rect").attr("class",e).transition().attr("width",A.rangeBand()*0.9/s.length),p.transition().attr("transform",function(y,i){var E=A(q(y,i))+A.rangeBand()*0.05,w=P(y,i)<0?D(0):D(0)-D(P(y,i))<1?D(0)-1:D(P(y,i));return"translate("+E+", "+w+")"}).select("rect").attr("height",function(w,i){return Math.max(Math.abs(D(P(w,i))-D(M&&M[0]||0))||1)}),O=A.copy(),j=D.copy()}),x}var z={top:0,right:0,bottom:0,left:0},F=960,B=500,I=Math.floor(Math.random()*10000),A=d3.scale.ordinal(),D=d3.scale.linear(),q=function(f){return f.x},P=function(f){return f.y},L=[0],H=b.utils.defaultColor(),N=!1,J=d3.format(",.2f"),C,M,k,G,K=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),e="discreteBar",O,j;return x.dispatch=K,x.options=b.utils.optionsFunc.bind(x),x.x=function(f){return arguments.length?(q=f,x):q},x.y=function(f){return arguments.length?(P=f,x):P},x.margin=function(f){return arguments.length?(z.top=typeof f.top!="undefined"?f.top:z.top,z.right=typeof f.right!="undefined"?f.right:z.right,z.bottom=typeof f.bottom!="undefined"?f.bottom:z.bottom,z.left=typeof f.left!="undefined"?f.left:z.left,x):z},x.width=function(f){return arguments.length?(F=f,x):F},x.height=function(f){return arguments.length?(B=f,x):B},x.xScale=function(f){return arguments.length?(A=f,x):A},x.yScale=function(f){return arguments.length?(D=f,x):D},x.xDomain=function(f){return arguments.length?(C=f,x):C},x.yDomain=function(f){return arguments.length?(M=f,x):M},x.xRange=function(f){return arguments.length?(k=f,x):k},x.yRange=function(f){return arguments.length?(G=f,x):G},x.forceY=function(f){return arguments.length?(L=f,x):L},x.color=function(f){return arguments.length?(H=b.utils.getColor(f),x):H},x.id=function(f){return arguments.length?(I=f,x):I},x.showValues=function(f){return arguments.length?(N=f,x):N},x.valueFormat=function(f){return arguments.length?(J=f,x):J},x.rectClass=function(f){return arguments.length?(e=f,x):e},x},b.models.discreteBarChart=function(){function j(f){return f.each(function(s){var v=d3.select(this),h=this,w=(z||parseInt(v.style("width"))||960)-G.left-G.right,n=(C||parseInt(v.style("height"))||400)-G.top-G.bottom;j.update=function(){I.beforeUpdate(),v.transition().duration(e).call(j)},j.container=this;if(!s||!s.length||!s.filter(function(p){return p.values.length}).length){var m=v.selectAll(".nv-noData").data([E]);return m.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),m.attr("x",G.left+w/2).attr("y",G.top+n/2).text(function(p){return p}),j}v.selectAll(".nv-noData").remove(),K=x.xScale(),k=x.yScale().clamp(!0);var r=v.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([s]),g=r.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),l=g.append("defs"),t=r.select("g");g.append("g").attr("class","nv-x nv-axis"),g.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),g.append("g").attr("class","nv-barsWrap"),t.attr("transform","translate("+G.left+","+G.top+")"),F&&t.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)"),x.width(w).height(n);var i=t.select(".nv-barsWrap").datum(s.filter(function(p){return !p.disabled}));i.transition().call(x),l.append("clipPath").attr("id","nv-x-label-clip-"+x.id()).append("rect"),t.select("#nv-x-label-clip-"+x.id()+" rect").attr("width",K.rangeBand()*(L?2:1)).attr("height",16).attr("x",-K.rangeBand()/(L?1:2));if(N){D.scale(K).ticks(w/100).tickSize(-n,0),t.select(".nv-x.nv-axis").attr("transform","translate(0,"+(k.range()[0]+(x.showValues()&&k.domain()[0]<0?16:0))+")"),t.select(".nv-x.nv-axis").transition().call(D);var o=t.select(".nv-x.nv-axis").selectAll("g");L&&o.selectAll("text").attr("transform",function(u,p,y){return"translate(0,"+(y%2==0?"5":"17")+")"})}J&&(A.scale(k).ticks(n/36).tickSize(-w,0),t.select(".nv-y.nv-axis").transition().call(A)),t.select(".nv-zeroLine line").attr("x1",0).attr("x2",w).attr("y1",k(0)).attr("y2",k(0)),I.on("tooltipShow",function(p){H&&M(p,h.parentNode)})}),j}var x=b.models.discreteBar(),D=b.models.axis(),A=b.models.axis(),G={top:15,right:10,bottom:50,left:60},z=null,C=null,q=b.utils.getColor(),N=!0,J=!0,F=!1,L=!1,H=!0,B=function(l,g,m,h,f){return"<h3>"+g+"</h3><p>"+m+"</p>"},K,k,E="No Data Available.",I=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),e=250;D.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(f){return f}),A.orient(F?"right":"left").tickFormat(d3.format(",.1f"));var M=function(n,p){var t=n.pos[0]+(p.offsetLeft||0),m=n.pos[1]+(p.offsetTop||0),h=D.tickFormat()(x.x()(n.point,n.pointIndex)),r=A.tickFormat()(x.y()(n.point,n.pointIndex)),g=B(n.series.key,h,r,n,j);b.tooltip.show([t,m],g,n.value<0?"n":"s",null,p)};return x.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+G.left,f.pos[1]+G.top],I.tooltipShow(f)}),x.dispatch.on("elementMouseout.tooltip",function(f){I.tooltipHide(f)}),I.on("tooltipHide",function(){H&&b.tooltip.cleanup()}),j.dispatch=I,j.discretebar=x,j.xAxis=D,j.yAxis=A,d3.rebind(j,x,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),j.options=b.utils.optionsFunc.bind(j),j.margin=function(f){return arguments.length?(G.top=typeof f.top!="undefined"?f.top:G.top,G.right=typeof f.right!="undefined"?f.right:G.right,G.bottom=typeof f.bottom!="undefined"?f.bottom:G.bottom,G.left=typeof f.left!="undefined"?f.left:G.left,j):G},j.width=function(f){return arguments.length?(z=f,j):z},j.height=function(f){return arguments.length?(C=f,j):C},j.color=function(f){return arguments.length?(q=b.utils.getColor(f),x.color(q),j):q},j.showXAxis=function(f){return arguments.length?(N=f,j):N},j.showYAxis=function(f){return arguments.length?(J=f,j):J},j.rightAlignYAxis=function(f){return arguments.length?(F=f,A.orient(f?"right":"left"),j):F},j.staggerLabels=function(f){return arguments.length?(L=f,j):L},j.tooltips=function(f){return arguments.length?(H=f,j):H},j.tooltipContent=function(f){return arguments.length?(B=f,j):B},j.noData=function(f){return arguments.length?(E=f,j):E},j.transitionDuration=function(f){return arguments.length?(e=f,j):e},j},b.models.distribution=function(){function j(f){return f.each(function(t){var y=h-(k==="x"?v.left+v.right:v.top+v.bottom),o=k=="x"?"y":"x",x=d3.select(this);m=m||q;var r=x.selectAll("g.nv-distribution").data([t]),i=r.enter().append("g").attr("class","nvd3 nv-distribution"),u=i.append("g"),z=r.select("g");r.attr("transform","translate("+v.left+","+v.top+")");var n=z.selectAll("g.nv-dist").data(function(l){return l},function(l){return l.key});n.enter().append("g"),n.attr("class",function(A,l){return"nv-dist nv-series-"+l}).style("stroke",function(A,l){return g(A,l)});var s=n.selectAll("line.nv-dist"+k).data(function(l){return l.values});s.enter().append("line").attr(k+"1",function(A,l){return m(w(A,l))}).attr(k+"2",function(A,l){return m(w(A,l))}),n.exit().selectAll("line.nv-dist"+k).transition().attr(k+"1",function(A,l){return q(w(A,l))}).attr(k+"2",function(A,l){return q(w(A,l))}).style("stroke-opacity",0).remove(),s.attr("class",function(A,l){return"nv-dist"+k+" nv-dist"+k+"-"+l}).attr(o+"1",0).attr(o+"2",e),s.transition().attr(k+"1",function(A,l){return q(w(A,l))}).attr(k+"2",function(A,l){return q(w(A,l))}),m=q.copy()}),j}var v={top:0,right:0,bottom:0,left:0},h=400,e=8,k="x",w=function(f){return f[k]},g=b.utils.defaultColor(),q=d3.scale.linear(),p,m;return j.options=b.utils.optionsFunc.bind(j),j.margin=function(f){return arguments.length?(v.top=typeof f.top!="undefined"?f.top:v.top,v.right=typeof f.right!="undefined"?f.right:v.right,v.bottom=typeof f.bottom!="undefined"?f.bottom:v.bottom,v.left=typeof f.left!="undefined"?f.left:v.left,j):v},j.width=function(f){return arguments.length?(h=f,j):h},j.axis=function(f){return arguments.length?(k=f,j):k},j.size=function(f){return arguments.length?(e=f,j):e},j.getData=function(f){return arguments.length?(w=d3.functor(f),j):w},j.scale=function(f){return arguments.length?(q=f,j):q},j.color=function(f){return arguments.length?(g=b.utils.getColor(f),j):g},j},b.models.historicalBar=function(){function j(f){return f.each(function(s){var t=D-x.left-x.right,m=A-x.top-x.bottom,i=d3.select(this);z.domain(K||d3.extent(s[0].values.map(q).concat(J))),L?z.range(E||[t*0.5/s[0].values.length,t*(s[0].values.length-0.5)/s[0].values.length]):z.range(E||[0,t]),C.domain(k||d3.extent(s[0].values.map(N).concat(F))).range(I||[m,0]),z.domain()[0]===z.domain()[1]&&(z.domain()[0]?z.domain([z.domain()[0]-z.domain()[0]*0.01,z.domain()[1]+z.domain()[1]*0.01]):z.domain([-1,1])),C.domain()[0]===C.domain()[1]&&(C.domain()[0]?C.domain([C.domain()[0]+C.domain()[0]*0.01,C.domain()[1]-C.domain()[1]*0.01]):C.domain([-1,1]));var o=i.selectAll("g.nv-wrap.nv-historicalBar-"+G).data([s[0].values]),g=o.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+G),l=g.append("defs"),r=g.append("g"),h=o.select("g");r.append("g").attr("class","nv-bars"),o.attr("transform","translate("+x.left+","+x.top+")"),i.on("click",function(v,u){e.chartClick({data:v,index:u,pos:d3.event,id:G})}),l.append("clipPath").attr("id","nv-chart-clip-path-"+G).append("rect"),o.select("#nv-chart-clip-path-"+G+" rect").attr("width",t).attr("height",m),h.attr("clip-path",H?"url(#nv-chart-clip-path-"+G+")":"");var n=o.select(".nv-bars").selectAll(".nv-bar").data(function(u){return u},function(v,u){return q(v,u)});n.exit().remove();var p=n.enter().append("rect").attr("x",0).attr("y",function(u,v){return b.utils.NaNtoZero(C(Math.max(0,N(u,v))))}).attr("height",function(u,v){return b.utils.NaNtoZero(Math.abs(C(N(u,v))-C(0)))}).attr("transform",function(v,u){return"translate("+(z(q(v,u))-t/s[0].values.length*0.45)+",0)"}).on("mouseover",function(v,u){if(!M){return}d3.select(this).classed("hover",!0),e.elementMouseover({point:v,series:s[0],pos:[z(q(v,u)),C(N(v,u))],pointIndex:u,seriesIndex:0,e:d3.event})}).on("mouseout",function(v,u){if(!M){return}d3.select(this).classed("hover",!1),e.elementMouseout({point:v,series:s[0],pointIndex:u,seriesIndex:0,e:d3.event})}).on("click",function(v,u){if(!M){return}e.elementClick({value:N(v,u),data:v,index:u,pos:[z(q(v,u)),C(N(v,u))],e:d3.event,id:G}),d3.event.stopPropagation()}).on("dblclick",function(v,u){if(!M){return}e.elementDblClick({value:N(v,u),data:v,index:u,pos:[z(q(v,u)),C(N(v,u))],e:d3.event,id:G}),d3.event.stopPropagation()});n.attr("fill",function(v,u){return B(v,u)}).attr("class",function(v,u,w){return(N(v,u)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+w+"-"+u}).transition().attr("transform",function(v,u){return"translate("+(z(q(v,u))-t/s[0].values.length*0.45)+",0)"}).attr("width",t/s[0].values.length*0.9),n.transition().attr("y",function(u,w){var v=N(u,w)<0?C(0):C(0)-C(N(u,w))<1?C(0)-1:C(N(u,w));return b.utils.NaNtoZero(v)}).attr("height",function(u,v){return b.utils.NaNtoZero(Math.max(Math.abs(C(N(u,v))-C(0)),1))})}),j}var x={top:0,right:0,bottom:0,left:0},D=960,A=500,G=Math.floor(Math.random()*10000),z=d3.scale.linear(),C=d3.scale.linear(),q=function(f){return f.x},N=function(f){return f.y},J=[],F=[0],L=!1,H=!0,B=b.utils.defaultColor(),K,k,E,I,e=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),M=!0;return j.highlightPoint=function(g,f){d3.select(".nv-historicalBar-"+G).select(".nv-bars .nv-bar-0-"+g).classed("hover",f)},j.clearHighlights=function(){d3.select(".nv-historicalBar-"+G).select(".nv-bars .nv-bar.hover").classed("hover",!1)},j.dispatch=e,j.options=b.utils.optionsFunc.bind(j),j.x=function(f){return arguments.length?(q=f,j):q},j.y=function(f){return arguments.length?(N=f,j):N},j.margin=function(f){return arguments.length?(x.top=typeof f.top!="undefined"?f.top:x.top,x.right=typeof f.right!="undefined"?f.right:x.right,x.bottom=typeof f.bottom!="undefined"?f.bottom:x.bottom,x.left=typeof f.left!="undefined"?f.left:x.left,j):x},j.width=function(f){return arguments.length?(D=f,j):D},j.height=function(f){return arguments.length?(A=f,j):A},j.xScale=function(f){return arguments.length?(z=f,j):z},j.yScale=function(f){return arguments.length?(C=f,j):C},j.xDomain=function(f){return arguments.length?(K=f,j):K},j.yDomain=function(f){return arguments.length?(k=f,j):k},j.xRange=function(f){return arguments.length?(E=f,j):E},j.yRange=function(f){return arguments.length?(I=f,j):I},j.forceX=function(f){return arguments.length?(J=f,j):J},j.forceY=function(f){return arguments.length?(F=f,j):F},j.padData=function(f){return arguments.length?(L=f,j):L},j.clipEdge=function(f){return arguments.length?(H=f,j):H},j.color=function(f){return arguments.length?(B=b.utils.getColor(f),j):B},j.id=function(f){return arguments.length?(G=f,j):G},j.interactive=function(f){return arguments.length?(M=!1,j):M},j},b.models.historicalBarChart=function(){function k(f){return f.each(function(r){var l=d3.select(this),o=this,h=(A||parseInt(l.style("width"))||960)-D.left-D.right,m=(T||parseInt(l.style("height"))||400)-D.top-D.bottom;k.update=function(){l.transition().duration(B).call(k)},k.container=this,N.disabled=r.map(function(u){return !!u.disabled});if(!j){var s;j={};for(s in N){N[s] instanceof Array?j[s]=N[s].slice(0):j[s]=N[s]}}if(!r||!r.length||!r.filter(function(u){return u.values.length}).length){var i=l.selectAll(".nv-noData").data([R]);return i.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),i.attr("x",D.left+h/2).attr("y",D.top+m/2).text(function(u){return u}),k}l.selectAll(".nv-noData").remove(),z=C.xScale(),J=C.yScale();var n=l.selectAll("g.nv-wrap.nv-historicalBarChart").data([r]),p=n.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),t=n.select("g");p.append("g").attr("class","nv-x nv-axis"),p.append("g").attr("class","nv-y nv-axis"),p.append("g").attr("class","nv-barsWrap"),p.append("g").attr("class","nv-legendWrap"),O&&(L.width(h),t.select(".nv-legendWrap").datum(r).call(L),D.top!=L.height()&&(D.top=L.height(),m=(T||parseInt(l.style("height"))||400)-D.top-D.bottom),n.select(".nv-legendWrap").attr("transform","translate(0,"+-D.top+")")),n.attr("transform","translate("+D.left+","+D.top+")"),M&&t.select(".nv-y.nv-axis").attr("transform","translate("+h+",0)"),C.width(h).height(m).color(r.map(function(v,u){return v.color||H(v,u)}).filter(function(v,u){return !r[u].disabled}));var g=t.select(".nv-barsWrap").datum(r.filter(function(u){return !u.disabled}));g.transition().call(C),K&&(I.scale(z).tickSize(-m,0),t.select(".nv-x.nv-axis").attr("transform","translate(0,"+J.range()[0]+")"),t.select(".nv-x.nv-axis").transition().call(I)),Q&&(F.scale(J).ticks(m/36).tickSize(-h,0),t.select(".nv-y.nv-axis").transition().call(F)),L.dispatch.on("legendClick",function(u,v){u.disabled=!u.disabled,r.filter(function(w){return !w.disabled}).length||r.map(function(w){return w.disabled=!1,n.selectAll(".nv-series").classed("disabled",!1),w}),N.disabled=r.map(function(w){return !!w.disabled}),q.stateChange(N),f.transition().call(k)}),L.dispatch.on("legendDblclick",function(u){r.forEach(function(v){v.disabled=!0}),u.disabled=!1,N.disabled=r.map(function(v){return !!v.disabled}),q.stateChange(N),k.update()}),q.on("tooltipShow",function(u){G&&e(u,o.parentNode)}),q.on("changeState",function(u){typeof u.disabled!="undefined"&&(r.forEach(function(v,w){v.disabled=u.disabled[w]}),N.disabled=u.disabled),k.update()})}),k}var C=b.models.historicalBar(),I=b.models.axis(),F=b.models.axis(),L=b.models.legend(),D={top:30,right:90,bottom:50,left:90},H=b.utils.defaultColor(),A=null,T=null,O=!1,K=!0,Q=!0,M=!1,G=!0,P=function(l,g,m,h,f){return"<h3>"+l+"</h3><p>"+m+" at "+g+"</p>"},z,J,N={},j=null,R="No Data Available.",q=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),B=250;I.orient("bottom").tickPadding(7),F.orient(M?"right":"left");var e=function(r,E){if(E){var m=d3.select(E).select("svg"),y=m.node()?m.attr("viewBox"):null;if(y){y=y.split(" ");var x=parseInt(m.style("width"))/y[2];r.pos[0]=r.pos[0]*x,r.pos[1]=r.pos[1]*x}}var v=r.pos[0]+(E.offsetLeft||0),n=r.pos[1]+(E.offsetTop||0),w=I.tickFormat()(C.x()(r.point,r.pointIndex)),t=F.tickFormat()(C.y()(r.point,r.pointIndex)),g=P(r.series.key,w,t,r,k);b.tooltip.show([v,n],g,null,null,E)};return C.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+D.left,f.pos[1]+D.top],q.tooltipShow(f)}),C.dispatch.on("elementMouseout.tooltip",function(f){q.tooltipHide(f)}),q.on("tooltipHide",function(){G&&b.tooltip.cleanup()}),k.dispatch=q,k.bars=C,k.legend=L,k.xAxis=I,k.yAxis=F,d3.rebind(k,C,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),k.options=b.utils.optionsFunc.bind(k),k.margin=function(f){return arguments.length?(D.top=typeof f.top!="undefined"?f.top:D.top,D.right=typeof f.right!="undefined"?f.right:D.right,D.bottom=typeof f.bottom!="undefined"?f.bottom:D.bottom,D.left=typeof f.left!="undefined"?f.left:D.left,k):D},k.width=function(f){return arguments.length?(A=f,k):A},k.height=function(f){return arguments.length?(T=f,k):T},k.color=function(f){return arguments.length?(H=b.utils.getColor(f),L.color(H),k):H},k.showLegend=function(f){return arguments.length?(O=f,k):O},k.showXAxis=function(f){return arguments.length?(K=f,k):K},k.showYAxis=function(f){return arguments.length?(Q=f,k):Q},k.rightAlignYAxis=function(f){return arguments.length?(M=f,F.orient(f?"right":"left"),k):M},k.tooltips=function(f){return arguments.length?(G=f,k):G},k.tooltipContent=function(f){return arguments.length?(P=f,k):P},k.state=function(f){return arguments.length?(N=f,k):N},k.defaultState=function(f){return arguments.length?(j=f,k):j},k.noData=function(f){return arguments.length?(R=f,k):R},k.transitionDuration=function(f){return arguments.length?(B=f,k):B},k},b.models.indentedTree=function(){function A(f){return f.each(function(V){function R(s,i,L){d3.event.stopPropagation();if(d3.event.shiftKey&&!L){return d3.event.shiftKey=!1,s.values&&s.values.forEach(function(n){(n.values||n._values)&&R(n,0,!0)}),!0}if(!l(s)){return !0}s.values?(s._values=s.values,s.values=null):(s.values=s._values,s._values=null),A.update()}function o(i){return i._values&&i._values.length?z:i.values&&i.values.length?j:""}function P(i){return i._values&&i._values.length}function l(n){var i=n.values||n._values;return i&&i.length}var J=1,Q=d3.select(this),U=d3.layout.tree().children(function(i){return i.values}).size([e,B]);A.update=function(){Q.transition().duration(600).call(A)},V[0]||(V[0]={key:E});var K=U.nodes(V[0]),p=d3.select(this).selectAll("div").data([[K]]),W=p.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),u=W.append("table"),v=p.select("table").attr("width","100%").attr("class",D);if(k){var h=u.append("thead"),r=h.append("tr");x.forEach(function(i){r.append("th").attr("width",i.width?i.width:"10%").style("text-align",i.type=="numeric"?"right":"left").append("span").text(i.label)})}var g=v.selectAll("tbody").data(function(i){return i});g.enter().append("tbody"),J=d3.max(K,function(i){return i.depth}),U.size([e,J*B]);var m=g.selectAll("tr").data(function(i){return i.filter(function(n){return G&&!n.children?G(n):!0})},function(n,i){return n.id||n.id||++w});m.exit().remove(),m.select("img.nv-treeicon").attr("src",o).classed("folded",P);var M=m.enter().append("tr");x.forEach(function(s,i){var L=M.append("td").style("padding-left",function(n){return(i?0:n.depth*B+12+(o(n)?0:16))+"px"},"important").style("text-align",s.type=="numeric"?"right":"left");i==0&&L.append("img").classed("nv-treeicon",!0).classed("nv-folded",P).attr("src",o).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(n){return o(n)?"inline-block":"none"}).on("click",R),L.each(function(t){!i&&F(t)?d3.select(this).append("a").attr("href",F).attr("class",d3.functor(s.classes)).append("span"):d3.select(this).append("span"),d3.select(this).select("span").attr("class",d3.functor(s.classes)).text(function(n){return s.format?s.format(n):n[s.key]||"-"})}),s.showCount&&(L.append("span").attr("class","nv-childrenCount"),m.selectAll("span.nv-childrenCount").text(function(n){return n.values&&n.values.length||n._values&&n._values.length?"("+(n.values&&n.values.filter(function(t){return G?G(t):!0}).length||n._values&&n._values.filter(function(t){return G?G(t):!0}).length||0)+")":""}))}),m.order().on("click",function(i){C.elementClick({row:this,data:i,pos:[i.x,i.y]})}).on("dblclick",function(i){C.elementDblclick({row:this,data:i,pos:[i.x,i.y]})}).on("mouseover",function(i){C.elementMouseover({row:this,data:i,pos:[i.x,i.y]})}).on("mouseout",function(i){C.elementMouseout({row:this,data:i,pos:[i.x,i.y]})})}),A}var H={top:0,right:0,bottom:0,left:0},q=960,e=500,y=b.utils.defaultColor(),I=Math.floor(Math.random()*10000),k=!0,G=!1,E="No Data Available.",B=20,x=[{key:"key",label:"Name",type:"text"}],D=null,z="images/grey-plus.png",j="images/grey-minus.png",C=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),F=function(f){return f.url},w=0;return A.options=b.utils.optionsFunc.bind(A),A.margin=function(f){return arguments.length?(H.top=typeof f.top!="undefined"?f.top:H.top,H.right=typeof f.right!="undefined"?f.right:H.right,H.bottom=typeof f.bottom!="undefined"?f.bottom:H.bottom,H.left=typeof f.left!="undefined"?f.left:H.left,A):H},A.width=function(f){return arguments.length?(q=f,A):q},A.height=function(f){return arguments.length?(e=f,A):e},A.color=function(f){return arguments.length?(y=b.utils.getColor(f),scatter.color(y),A):y},A.id=function(f){return arguments.length?(I=f,A):I},A.header=function(f){return arguments.length?(k=f,A):k},A.noData=function(f){return arguments.length?(E=f,A):E},A.filterZero=function(f){return arguments.length?(G=f,A):G},A.columns=function(f){return arguments.length?(x=f,A):x},A.tableClass=function(f){return arguments.length?(D=f,A):D},A.iconOpen=function(f){return arguments.length?(z=f,A):z},A.iconClose=function(f){return arguments.length?(j=f,A):j},A.getUrl=function(f){return arguments.length?(F=f,A):F},A},b.models.legend=function(){function p(f){return f.each(function(P){var J=h-w.left-w.right,G=d3.select(this),M=G.selectAll("g.nv-legend").data([P]),z=M.enter().append("g").attr("class","nvd3 nv-legend").append("g"),H=M.select("g");M.attr("transform","translate("+w.left+","+w.top+")");var K=H.selectAll(".nv-series").data(function(y){return y}),s=K.enter().append("g").attr("class","nv-series").on("mouseover",function(A,y){j.legendMouseover(A,y)}).on("mouseout",function(A,y){j.legendMouseout(A,y)}).on("click",function(A,y){j.legendClick(A,y),q&&(m?(P.forEach(function(C){C.disabled=!0}),A.disabled=!1):(A.disabled=!A.disabled,P.every(function(C){return C.disabled})&&P.forEach(function(C){C.disabled=!1})),j.stateChange({disabled:P.map(function(C){return !!C.disabled})}))}).on("dblclick",function(A,y){j.legendDblclick(A,y),q&&(P.forEach(function(C){C.disabled=!0}),A.disabled=!1,j.stateChange({disabled:P.map(function(C){return !!C.disabled})}))});s.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),s.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),K.classed("disabled",function(y){return y.disabled}),K.exit().remove(),K.select("circle").style("fill",function(A,y){return A.color||x(A,y)}).style("stroke",function(A,y){return A.color||x(A,y)}),K.select("text").text(k);if(g){var Q=[];K.each(function(A,L){var E=d3.select(this).select("text"),y;try{y=E.getComputedTextLength();if(y<=0){throw Error()}}catch(C){y=b.utils.calcApproxTextWidth(E)}Q.push(y+28)});var u=0,B=0,l=[];while(B<J&&u<Q.length){l[u]=Q[u],B+=Q[u++]}u===0&&(u=1);while(B>J&&u>1){l=[],u--;for(var t=0;t<Q.length;t++){Q[t]>(l[t%u]||0)&&(l[t%u]=Q[t])}B=l.reduce(function(C,y,E,A){return C+y})}var i=[];for(var o=0,D=0;o<u;o++){i[o]=D,D+=l[o]}K.attr("transform",function(A,y){return"translate("+i[y%u]+","+(5+Math.floor(y/u)*20)+")"}),v?H.attr("transform","translate("+(h-w.right-B)+","+w.top+")"):H.attr("transform","translate(0,"+w.top+")"),e=w.top+w.bottom+Math.ceil(Q.length/u)*20}else{var I=5,r=5,F=0,n;K.attr("transform",function(C,A){var y=d3.select(this).select("text").node().getComputedTextLength()+28;return n=r,h<w.left+w.right+n+y&&(r=n=5,I+=20),r+=y,r>F&&(F=r),"translate("+n+","+I+")"}),H.attr("transform","translate("+(h-w.right-F)+","+w.top+")"),e=w.top+w.bottom+I+15}}),p}var w={top:5,right:0,bottom:5,left:0},h=400,e=20,k=function(f){return f.key},x=b.utils.defaultColor(),g=!0,v=!0,q=!0,m=!1,j=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return p.dispatch=j,p.options=b.utils.optionsFunc.bind(p),p.margin=function(f){return arguments.length?(w.top=typeof f.top!="undefined"?f.top:w.top,w.right=typeof f.right!="undefined"?f.right:w.right,w.bottom=typeof f.bottom!="undefined"?f.bottom:w.bottom,w.left=typeof f.left!="undefined"?f.left:w.left,p):w},p.width=function(f){return arguments.length?(h=f,p):h},p.height=function(f){return arguments.length?(e=f,p):e},p.key=function(f){return arguments.length?(k=f,p):k},p.color=function(f){return arguments.length?(x=b.utils.getColor(f),p):x},p.align=function(f){return arguments.length?(g=f,p):g},p.rightAlign=function(f){return arguments.length?(v=f,p):v},p.updateState=function(f){return arguments.length?(q=f,p):q},p.radioButtonMode=function(f){return arguments.length?(m=f,p):m},p},b.models.line=function(){function q(f){return f.each(function(l){var r=e-k.left-k.right,v=x-k.top-k.bottom,H=d3.select(this);B=F.xScale(),y=F.yScale(),A=A||B,D=D||y;var I=H.selectAll("g.nv-wrap.nv-line").data([l]),p=I.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),o=p.append("defs"),t=p.append("g"),h=I.select("g");t.append("g").attr("class","nv-groups"),t.append("g").attr("class","nv-scatterWrap"),I.attr("transform","translate("+k.left+","+k.top+")"),F.width(r).height(v);var n=I.select(".nv-scatterWrap");n.transition().call(F),o.append("clipPath").attr("id","nv-edge-clip-"+F.id()).append("rect"),I.select("#nv-edge-clip-"+F.id()+" rect").attr("width",r).attr("height",v),h.attr("clip-path",w?"url(#nv-edge-clip-"+F.id()+")":""),n.attr("clip-path",w?"url(#nv-edge-clip-"+F.id()+")":"");var u=I.select(".nv-groups").selectAll(".nv-group").data(function(m){return m},function(m){return m.key});u.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001),u.exit().remove(),u.attr("class",function(J,m){return"nv-group nv-series-"+m}).classed("hover",function(m){return m.hover}).style("fill",function(J,m){return G(J,m)}).style("stroke",function(J,m){return G(J,m)}),u.transition().style("stroke-opacity",1).style("fill-opacity",0.5);var i=u.selectAll("path.nv-area").data(function(m){return z(m)?[m]:[]});i.enter().append("path").attr("class","nv-area").attr("d",function(m){return d3.svg.area().interpolate(g).defined(C).x(function(J,K){return b.utils.NaNtoZero(A(j(J,K)))}).y0(function(J,K){return b.utils.NaNtoZero(D(E(J,K)))}).y1(function(K,J){return D(y.domain()[0]<=0?y.domain()[1]>=0?0:y.domain()[1]:y.domain()[0])}).apply(this,[m.values])}),u.exit().selectAll("path.nv-area").remove(),i.transition().attr("d",function(m){return d3.svg.area().interpolate(g).defined(C).x(function(J,K){return b.utils.NaNtoZero(B(j(J,K)))}).y0(function(J,K){return b.utils.NaNtoZero(y(E(J,K)))}).y1(function(K,J){return y(y.domain()[0]<=0?y.domain()[1]>=0?0:y.domain()[1]:y.domain()[0])}).apply(this,[m.values])});var s=u.selectAll("path.nv-line").data(function(m){return[m.values]});s.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(g).defined(C).x(function(m,J){return b.utils.NaNtoZero(A(j(m,J)))}).y(function(m,J){return b.utils.NaNtoZero(D(E(m,J)))})),s.transition().attr("d",d3.svg.line().interpolate(g).defined(C).x(function(m,J){return b.utils.NaNtoZero(B(j(m,J)))}).y(function(m,J){return b.utils.NaNtoZero(y(E(m,J)))})),A=B.copy(),D=y.copy()}),q}var F=b.models.scatter(),k={top:0,right:0,bottom:0,left:0},e=960,x=500,G=b.utils.defaultColor(),j=function(f){return f.x},E=function(f){return f.y},C=function(h,f){return !isNaN(E(h,f))&&E(h,f)!==null},z=function(f){return f.area},w=!1,B,y,g="linear";F.size(16).sizeDomain([16,256]);var A,D;return q.dispatch=F.dispatch,q.scatter=F,d3.rebind(q,F,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),q.options=b.utils.optionsFunc.bind(q),q.margin=function(f){return arguments.length?(k.top=typeof f.top!="undefined"?f.top:k.top,k.right=typeof f.right!="undefined"?f.right:k.right,k.bottom=typeof f.bottom!="undefined"?f.bottom:k.bottom,k.left=typeof f.left!="undefined"?f.left:k.left,q):k},q.width=function(f){return arguments.length?(e=f,q):e},q.height=function(f){return arguments.length?(x=f,q):x},q.x=function(f){return arguments.length?(j=f,F.x(f),q):j},q.y=function(f){return arguments.length?(E=f,F.y(f),q):E},q.clipEdge=function(f){return arguments.length?(w=f,q):w},q.color=function(f){return arguments.length?(G=b.utils.getColor(f),F.color(G),q):G},q.interpolate=function(f){return arguments.length?(g=f,q):g},q.defined=function(f){return arguments.length?(C=f,q):C},q.isArea=function(f){return arguments.length?(z=d3.functor(f),q):z},q},b.models.lineChart=function(){function k(f){return f.each(function(l){var h=d3.select(this),n=this,s=(X||parseInt(h.style("width"))||960)-J.left-J.right,i=(R||parseInt(h.style("height"))||400)-J.top-J.bottom;k.update=function(){h.transition().duration(z).call(k)},k.container=this,W.disabled=l.map(function(m){return !!m.disabled});if(!A){var p;A={};for(p in W){W[p] instanceof Array?A[p]=W[p].slice(0):A[p]=W[p]}}if(!l||!l.length||!l.filter(function(m){return m.values.length}).length){var r=h.selectAll(".nv-noData").data([D]);return r.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),r.attr("x",J.left+s/2).attr("y",J.top+i/2).text(function(m){return m}),k}h.selectAll(".nv-noData").remove(),Q=F.xScale(),q=F.yScale();var u=h.selectAll("g.nv-wrap.nv-lineChart").data([l]),g=u.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),o=u.select("g");g.append("rect").style("opacity",0),g.append("g").attr("class","nv-x nv-axis"),g.append("g").attr("class","nv-y nv-axis"),g.append("g").attr("class","nv-linesWrap"),g.append("g").attr("class","nv-legendWrap"),g.append("g").attr("class","nv-interactive"),o.select("rect").attr("width",s).attr("height",i>0?i:0),M&&(O.width(s),o.select(".nv-legendWrap").datum(l).call(O),J.top!=O.height()&&(J.top=O.height(),i=(R||parseInt(h.style("height"))||400)-J.top-J.bottom),u.select(".nv-legendWrap").attr("transform","translate(0,"+-J.top+")")),u.attr("transform","translate("+J.left+","+J.top+")"),I&&o.select(".nv-y.nv-axis").attr("transform","translate("+s+",0)"),U&&(G.width(s).height(i).margin({left:J.left,top:J.top}).svgContainer(h).xScale(Q),u.select(".nv-interactive").call(G)),F.width(s).height(i).color(l.map(function(v,m){return v.color||C(v,m)}).filter(function(v,m){return !l[m].disabled}));var t=o.select(".nv-linesWrap").datum(l.filter(function(m){return !m.disabled}));t.transition().call(F),V&&(K.scale(Q).ticks(s/100).tickSize(-i,0),o.select(".nv-x.nv-axis").attr("transform","translate(0,"+q.range()[0]+")"),o.select(".nv-x.nv-axis").transition().call(K)),P&&(H.scale(q).ticks(i/36).tickSize(-s,0),o.select(".nv-y.nv-axis").transition().call(H)),O.dispatch.on("stateChange",function(m){W=m,j.stateChange(W),k.update()}),G.dispatch.on("elementMousemove",function(w){F.clearHighlights();var Z,N,v,T=[];l.filter(function(aa,y){return aa.seriesIndex=y,!aa.disabled}).forEach(function(ab,aa){N=b.interactiveBisect(ab.values,w.pointXValue,k.x()),F.highlightPoint(aa,N,!0);var y=ab.values[N];if(typeof y=="undefined"){return}typeof Z=="undefined"&&(Z=y),typeof v=="undefined"&&(v=k.xScale()(k.x()(y,N))),T.push({key:ab.key,value:k.y()(y,N),color:C(ab,ab.seriesIndex)})});if(T.length>2){var x=k.yScale().invert(w.mouseY),m=Math.abs(k.yScale().domain()[0]-k.yScale().domain()[1]),S=0.03*m,E=b.nearestValueIndex(T.map(function(y){return y.value}),x,S);E!==null&&(T[E].highlight=!0)}var Y=K.tickFormat()(k.x()(Z,N));G.tooltip.position({left:v+J.left,top:w.mouseY+J.top}).chartContainer(n.parentNode).enabled(B).valueFormatter(function(aa,y){return H.tickFormat()(aa)}).data({value:Y,series:T})(),G.renderGuideLine(v)}),G.dispatch.on("elementMouseout",function(m){j.tooltipHide(),F.clearHighlights()}),j.on("tooltipShow",function(m){B&&e(m,n.parentNode)}),j.on("changeState",function(m){typeof m.disabled!="undefined"&&l.length===m.disabled.length&&(l.forEach(function(v,w){v.disabled=m.disabled[w]}),W.disabled=m.disabled),k.update()})}),k}var F=b.models.line(),K=b.models.axis(),H=b.models.axis(),O=b.models.legend(),G=b.interactiveGuideline(),J={top:30,right:20,bottom:50,left:60},C=b.utils.defaultColor(),X=null,R=null,M=!0,V=!0,P=!0,I=!1,U=!1,B=!0,L=function(l,g,m,h,f){return"<h3>"+l+"</h3><p>"+m+" at "+g+"</p>"},Q,q,W={},A=null,D="No Data Available.",j=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z=250;K.orient("bottom").tickPadding(7),H.orient(I?"right":"left");var e=function(n,p){var t=n.pos[0]+(p.offsetLeft||0),m=n.pos[1]+(p.offsetTop||0),h=K.tickFormat()(F.x()(n.point,n.pointIndex)),r=H.tickFormat()(F.y()(n.point,n.pointIndex)),g=L(n.series.key,h,r,n,k);b.tooltip.show([t,m],g,null,null,p)};return F.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+J.left,f.pos[1]+J.top],j.tooltipShow(f)}),F.dispatch.on("elementMouseout.tooltip",function(f){j.tooltipHide(f)}),j.on("tooltipHide",function(){B&&b.tooltip.cleanup()}),k.dispatch=j,k.lines=F,k.legend=O,k.xAxis=K,k.yAxis=H,k.interactiveLayer=G,d3.rebind(k,F,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),k.options=b.utils.optionsFunc.bind(k),k.margin=function(f){return arguments.length?(J.top=typeof f.top!="undefined"?f.top:J.top,J.right=typeof f.right!="undefined"?f.right:J.right,J.bottom=typeof f.bottom!="undefined"?f.bottom:J.bottom,J.left=typeof f.left!="undefined"?f.left:J.left,k):J},k.width=function(f){return arguments.length?(X=f,k):X},k.height=function(f){return arguments.length?(R=f,k):R},k.color=function(f){return arguments.length?(C=b.utils.getColor(f),O.color(C),k):C},k.showLegend=function(f){return arguments.length?(M=f,k):M},k.showXAxis=function(f){return arguments.length?(V=f,k):V},k.showYAxis=function(f){return arguments.length?(P=f,k):P},k.rightAlignYAxis=function(f){return arguments.length?(I=f,H.orient(f?"right":"left"),k):I},k.useInteractiveGuideline=function(f){return arguments.length?(U=f,f===!0&&(k.interactive(!1),k.useVoronoi(!1)),k):U},k.tooltips=function(f){return arguments.length?(B=f,k):B},k.tooltipContent=function(f){return arguments.length?(L=f,k):L},k.state=function(f){return arguments.length?(W=f,k):W},k.defaultState=function(f){return arguments.length?(A=f,k):A},k.noData=function(f){return arguments.length?(D=f,k):D},k.transitionDuration=function(f){return arguments.length?(z=f,k):z},k},b.models.linePlusBarChart=function(){function e(f){return f.each(function(s){var m=d3.select(this),u=this,y=(V||parseInt(m.style("width"))||960)-B.left-B.right,r=(P||parseInt(m.style("height"))||400)-B.top-B.bottom;e.update=function(){m.transition().call(e)},U.disabled=s.map(function(l){return !!l.disabled});if(!z){var h;z={};for(h in U){U[h] instanceof Array?z[h]=U[h].slice(0):z[h]=U[h]}}if(!s||!s.length||!s.filter(function(l){return l.values.length}).length){var n=m.selectAll(".nv-noData").data([C]);return n.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),n.attr("x",B.left+y/2).attr("y",B.top+r/2).text(function(l){return l}),e}m.selectAll(".nv-noData").remove();var w=s.filter(function(l){return !l.disabled&&l.bar}),i=s.filter(function(l){return !l.bar});K=i.filter(function(l){return !l.disabled}).length&&i.filter(function(l){return !l.disabled})[0].values.length?D.xScale():J.xScale(),O=J.yScale(),k=D.yScale();var p=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([s]),t=p.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),x=p.select("g");t.append("g").attr("class","nv-x nv-axis"),t.append("g").attr("class","nv-y1 nv-axis"),t.append("g").attr("class","nv-y2 nv-axis"),t.append("g").attr("class","nv-barsWrap"),t.append("g").attr("class","nv-linesWrap"),t.append("g").attr("class","nv-legendWrap"),H&&(I.width(y/2),x.select(".nv-legendWrap").datum(s.map(function(l){return l.originalKey=l.originalKey===undefined?l.key:l.originalKey,l.key=l.originalKey+(l.bar?" (left axis)":" (right axis)"),l})).call(I),B.top!=I.height()&&(B.top=I.height(),r=(P||parseInt(m.style("height"))||400)-B.top-B.bottom),x.select(".nv-legendWrap").attr("transform","translate("+y/2+","+-B.top+")")),p.attr("transform","translate("+B.left+","+B.top+")"),D.width(y).height(r).color(s.map(function(v,l){return v.color||N(v,l)}).filter(function(l,v){return !s[v].disabled&&!s[v].bar})),J.width(y).height(r).color(s.map(function(v,l){return v.color||N(v,l)}).filter(function(l,v){return !s[v].disabled&&s[v].bar}));var g=x.select(".nv-barsWrap").datum(w.length?w:[{values:[]}]),o=x.select(".nv-linesWrap").datum(i[0]&&!i[0].disabled?i:[{values:[]}]);d3.transition(g).call(J),d3.transition(o).call(D),G.scale(K).ticks(y/100).tickSize(-r,0),x.select(".nv-x.nv-axis").attr("transform","translate(0,"+O.range()[0]+")"),d3.transition(x.select(".nv-x.nv-axis")).call(G),M.scale(O).ticks(r/36).tickSize(-y,0),d3.transition(x.select(".nv-y1.nv-axis")).style("opacity",w.length?1:0).call(M),F.scale(k).ticks(r/36).tickSize(w.length?0:-y,0),x.select(".nv-y2.nv-axis").style("opacity",i.length?1:0).attr("transform","translate("+y+",0)"),d3.transition(x.select(".nv-y2.nv-axis")).call(F),I.dispatch.on("stateChange",function(l){U=l,j.stateChange(U),e.update()}),j.on("tooltipShow",function(l){Q&&q(l,u.parentNode)}),j.on("changeState",function(l){typeof l.disabled!="undefined"&&(s.forEach(function(v,E){v.disabled=l.disabled[E]}),U.disabled=l.disabled),e.update()})}),e}var D=b.models.line(),J=b.models.historicalBar(),G=b.models.axis(),M=b.models.axis(),F=b.models.axis(),I=b.models.legend(),B={top:30,right:60,bottom:50,left:60},V=null,P=null,L=function(f){return f.x},R=function(f){return f.y},N=b.utils.defaultColor(),H=!0,Q=!0,A=function(l,g,m,h,f){return"<h3>"+l+"</h3><p>"+m+" at "+g+"</p>"},K,O,k,U={},z=null,C="No Data Available.",j=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");J.padData(!0),D.clipEdge(!1).padData(!0),G.orient("bottom").tickPadding(7).highlightZero(!1),M.orient("left"),F.orient("right");var q=function(s,p){var i=s.pos[0]+(p.offsetLeft||0),h=s.pos[1]+(p.offsetTop||0),m=G.tickFormat()(D.x()(s.point,s.pointIndex)),g=(s.series.bar?M:F).tickFormat()(D.y()(s.point,s.pointIndex)),r=A(s.series.key,m,g,s,e);b.tooltip.show([i,h],r,s.value<0?"n":"s",null,p)};return D.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+B.left,f.pos[1]+B.top],j.tooltipShow(f)}),D.dispatch.on("elementMouseout.tooltip",function(f){j.tooltipHide(f)}),J.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+B.left,f.pos[1]+B.top],j.tooltipShow(f)}),J.dispatch.on("elementMouseout.tooltip",function(f){j.tooltipHide(f)}),j.on("tooltipHide",function(){Q&&b.tooltip.cleanup()}),e.dispatch=j,e.legend=I,e.lines=D,e.bars=J,e.xAxis=G,e.y1Axis=M,e.y2Axis=F,d3.rebind(e,D,"defined","size","clipVoronoi","interpolate"),e.options=b.utils.optionsFunc.bind(e),e.x=function(f){return arguments.length?(L=f,D.x(f),J.x(f),e):L},e.y=function(f){return arguments.length?(R=f,D.y(f),J.y(f),e):R},e.margin=function(f){return arguments.length?(B.top=typeof f.top!="undefined"?f.top:B.top,B.right=typeof f.right!="undefined"?f.right:B.right,B.bottom=typeof f.bottom!="undefined"?f.bottom:B.bottom,B.left=typeof f.left!="undefined"?f.left:B.left,e):B},e.width=function(f){return arguments.length?(V=f,e):V},e.height=function(f){return arguments.length?(P=f,e):P},e.color=function(f){return arguments.length?(N=b.utils.getColor(f),I.color(N),e):N},e.showLegend=function(f){return arguments.length?(H=f,e):H},e.tooltips=function(f){return arguments.length?(Q=f,e):Q},e.tooltipContent=function(f){return arguments.length?(A=f,e):A},e.state=function(f){return arguments.length?(U=f,e):U},e.defaultState=function(f){return arguments.length?(z=f,e):z},e.noData=function(f){return arguments.length?(C=f,e):C},e},b.models.lineWithFocusChart=function(){function R(f){return f.each(function(C){function h(T){var N=+(T=="e"),ac=N?1:-1,S=n/3;return"M"+0.5*ac+","+S+"A6,6 0 0 "+N+" "+6.5*ac+","+(S+6)+"V"+(2*S-6)+"A6,6 0 0 "+N+" "+0.5*ac+","+2*S+"ZM"+2.5*ac+","+(S+8)+"V"+(2*S-8)+"M"+4.5*ac+","+(S+8)+"V"+(2*S-8)}function p(){ab.empty()||ab.extent(B),r.data([ab.empty()?W.domain():B]).each(function(T,N){var ac=W(T[0])-D.range()[0],S=D.range()[1]-W(T[1]);d3.select(this).select(".left").attr("width",ac<0?0:ac),d3.select(this).select(".right").attr("x",W(T[1])).attr("width",S<0?0:S)})}function g(){B=ab.empty()?null:ab.extent();var S=ab.empty()?W.domain():ab.extent();if(Math.abs(S[0]-S[1])<=1){return}e.brush({extent:S,brush:ab}),p();var N=s.select(".nv-focus .nv-linesWrap").datum(C.filter(function(T){return !T.disabled}).map(function(ac,T){return{key:ac.key,values:ac.values.filter(function(ae,ad){return H.x()(ae,ad)>=S[0]&&H.x()(ae,ad)<=S[1]})}}));N.transition().duration(q).call(H),s.select(".nv-focus .nv-x.nv-axis").transition().duration(q).call(K),s.select(".nv-focus .nv-y.nv-axis").transition().duration(q).call(U)}var i=d3.select(this),o=this,x=(V||parseInt(i.style("width"))||960)-X.left-X.right,m=(L||parseInt(i.style("height"))||400)-X.top-X.bottom-Y,n=Y-Q.top-Q.bottom;R.update=function(){i.transition().duration(q).call(R)},R.container=this;if(!C||!C.length||!C.filter(function(N){return N.values.length}).length){var E=i.selectAll(".nv-noData").data([A]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",X.left+x/2).attr("y",X.top+m/2).text(function(N){return N}),R}i.selectAll(".nv-noData").remove(),D=H.xScale(),P=H.yScale(),W=O.xScale(),z=O.yScale();var u=i.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([C]),l=u.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),s=u.select("g");l.append("g").attr("class","nv-legendWrap");var w=l.append("g").attr("class","nv-focus");w.append("g").attr("class","nv-x nv-axis"),w.append("g").attr("class","nv-y nv-axis"),w.append("g").attr("class","nv-linesWrap");var y=l.append("g").attr("class","nv-context");y.append("g").attr("class","nv-x nv-axis"),y.append("g").attr("class","nv-y nv-axis"),y.append("g").attr("class","nv-linesWrap"),y.append("g").attr("class","nv-brushBackground"),y.append("g").attr("class","nv-x nv-brush"),aa&&(F.width(x),s.select(".nv-legendWrap").datum(C).call(F),X.top!=F.height()&&(X.top=F.height(),m=(L||parseInt(i.style("height"))||400)-X.top-X.bottom-Y),s.select(".nv-legendWrap").attr("transform","translate(0,"+-X.top+")")),u.attr("transform","translate("+X.left+","+X.top+")"),H.width(x).height(m).color(C.map(function(S,N){return S.color||Z(S,N)}).filter(function(N,S){return !C[S].disabled})),O.defined(H.defined()).width(x).height(n).color(C.map(function(S,N){return S.color||Z(S,N)}).filter(function(N,S){return !C[S].disabled})),s.select(".nv-context").attr("transform","translate(0,"+(m+X.bottom+Q.top)+")");var t=s.select(".nv-context .nv-linesWrap").datum(C.filter(function(N){return !N.disabled}));d3.transition(t).call(O),K.scale(D).ticks(x/100).tickSize(-m,0),U.scale(P).ticks(m/36).tickSize(-x,0),s.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+m+")"),ab.x(W).on("brush",function(){var N=R.transitionDuration();R.transitionDuration(0),g(),R.transitionDuration(N)}),B&&ab.extent(B);var r=s.select(".nv-brushBackground").selectAll("g").data([B||ab.extent()]),v=r.enter().append("g");v.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",n),v.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",n);var k=s.select(".nv-x.nv-brush").call(ab);k.selectAll("rect").attr("height",n),k.selectAll(".resize").append("path").attr("d",h),g(),I.scale(W).ticks(x/100).tickSize(-n,0),s.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+z.range()[0]+")"),d3.transition(s.select(".nv-context .nv-x.nv-axis")).call(I),M.scale(z).ticks(n/36).tickSize(-x,0),d3.transition(s.select(".nv-context .nv-y.nv-axis")).call(M),s.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+z.range()[0]+")"),F.dispatch.on("stateChange",function(N){R.update()}),e.on("tooltipShow",function(N){G&&J(N,o.parentNode)})}),R}var H=b.models.line(),O=b.models.line(),K=b.models.axis(),U=b.models.axis(),I=b.models.axis(),M=b.models.axis(),F=b.models.legend(),ab=d3.svg.brush(),X={top:30,right:30,bottom:30,left:60},Q={top:0,right:30,bottom:20,left:60},Z=b.utils.defaultColor(),V=null,L=null,Y=100,D,P,W,z,aa=!0,B=null,G=!0,j=function(k,g,l,h,f){return"<h3>"+k+"</h3><p>"+l+" at "+g+"</p>"},A="No Data Available.",e=d3.dispatch("tooltipShow","tooltipHide","brush"),q=250;H.clipEdge(!0),O.interactive(!1),K.orient("bottom").tickPadding(5),U.orient("left"),I.orient("bottom").tickPadding(5),M.orient("left");var J=function(r,k){var p=r.pos[0]+(k.offsetLeft||0),i=r.pos[1]+(k.offsetTop||0),h=K.tickFormat()(H.x()(r.point,r.pointIndex)),m=U.tickFormat()(H.y()(r.point,r.pointIndex)),g=j(r.series.key,h,m,r,R);b.tooltip.show([p,i],g,null,null,k)};return H.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+X.left,f.pos[1]+X.top],e.tooltipShow(f)}),H.dispatch.on("elementMouseout.tooltip",function(f){e.tooltipHide(f)}),e.on("tooltipHide",function(){G&&b.tooltip.cleanup()}),R.dispatch=e,R.legend=F,R.lines=H,R.lines2=O,R.xAxis=K,R.yAxis=U,R.x2Axis=I,R.y2Axis=M,d3.rebind(R,H,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),R.options=b.utils.optionsFunc.bind(R),R.x=function(f){return arguments.length?(H.x(f),O.x(f),R):H.x},R.y=function(f){return arguments.length?(H.y(f),O.y(f),R):H.y},R.margin=function(f){return arguments.length?(X.top=typeof f.top!="undefined"?f.top:X.top,X.right=typeof f.right!="undefined"?f.right:X.right,X.bottom=typeof f.bottom!="undefined"?f.bottom:X.bottom,X.left=typeof f.left!="undefined"?f.left:X.left,R):X},R.margin2=function(f){return arguments.length?(Q=f,R):Q},R.width=function(f){return arguments.length?(V=f,R):V},R.height=function(f){return arguments.length?(L=f,R):L},R.height2=function(f){return arguments.length?(Y=f,R):Y},R.color=function(f){return arguments.length?(Z=b.utils.getColor(f),F.color(Z),R):Z},R.showLegend=function(f){return arguments.length?(aa=f,R):aa},R.tooltips=function(f){return arguments.length?(G=f,R):G},R.tooltipContent=function(f){return arguments.length?(j=f,R):j},R.interpolate=function(f){return arguments.length?(H.interpolate(f),O.interpolate(f),R):H.interpolate()},R.noData=function(f){return arguments.length?(A=f,R):A},R.xTickFormat=function(f){return arguments.length?(K.tickFormat(f),I.tickFormat(f),R):K.tickFormat()},R.yTickFormat=function(f){return arguments.length?(U.tickFormat(f),M.tickFormat(f),R):U.tickFormat()},R.brushExtent=function(f){return arguments.length?(B=f,R):B},R.transitionDuration=function(f){return arguments.length?(q=f,R):q},R},b.models.linePlusBarWithFocusChart=function(){function U(f){return f.each(function(E){function L(O){var M=+(O=="e"),P=M?1:-1,N=C/3;return"M"+0.5*P+","+N+"A6,6 0 0 "+M+" "+6.5*P+","+(N+6)+"V"+(2*N-6)+"A6,6 0 0 "+M+" "+0.5*P+","+2*N+"ZM"+2.5*P+","+(N+8)+"V"+(2*N-8)+"M"+4.5*P+","+(N+8)+"V"+(2*N-8)}function u(){al.empty()||al.extent(X),h.data([al.empty()?aj.domain():X]).each(function(O,M){var P=aj(O[0])-aj.range()[0],N=aj.range()[1]-aj(O[1]);d3.select(this).select(".left").attr("width",P<0?0:P),d3.select(this).select(".right").attr("x",aj(O[1])).attr("width",N<0?0:N)})}function s(){X=al.empty()?null:al.extent(),j=al.empty()?aj.domain():al.extent(),Q.brush({extent:j,brush:al}),u(),ad.width(B).height(y).color(E.map(function(P,O){return P.color||Y(P,O)}).filter(function(O,P){return !E[P].disabled&&E[P].bar})),ab.width(B).height(y).color(E.map(function(P,O){return P.color||Y(P,O)}).filter(function(O,P){return !E[P].disabled&&!E[P].bar}));var N=x.select(".nv-focus .nv-barsWrap").datum(n.length?n.map(function(P,O){return{key:P.key,values:P.values.filter(function(T,S){return ad.x()(T,S)>=j[0]&&ad.x()(T,S)<=j[1]})}}):[{values:[]}]),M=x.select(".nv-focus .nv-linesWrap").datum(w[0].disabled?[{values:[]}]:w.map(function(O,P){return{key:O.key,values:O.values.filter(function(S,T){return ab.x()(S,T)>=j[0]&&ab.x()(S,T)<=j[1]})}}));n.length?R=ad.xScale():R=ab.xScale(),ac.scale(R).ticks(B/100).tickSize(-y,0),ac.domain([Math.ceil(j[0]),Math.floor(j[1])]),x.select(".nv-x.nv-axis").transition().duration(q).call(ac),N.transition().duration(q).call(ad),M.transition().duration(q).call(ab),x.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+I.range()[0]+")"),aa.scale(I).ticks(y/36).tickSize(-B,0),x.select(".nv-focus .nv-y1.nv-axis").style("opacity",n.length?1:0),ar.scale(V).ticks(y/36).tickSize(n.length?0:-B,0),x.select(".nv-focus .nv-y2.nv-axis").style("opacity",w.length?1:0).attr("transform","translate("+R.range()[1]+",0)"),x.select(".nv-focus .nv-y1.nv-axis").transition().duration(q).call(aa),x.select(".nv-focus .nv-y2.nv-axis").transition().duration(q).call(ar)}var t=d3.select(this),D=this,B=(Z||parseInt(t.style("width"))||960)-ae.left-ae.right,y=(ah||parseInt(t.style("height"))||400)-ae.top-ae.bottom-am,C=am-ao.top-ao.bottom;U.update=function(){t.transition().duration(q).call(U)},U.container=this;if(!E||!E.length||!E.filter(function(M){return M.values.length}).length){var p=t.selectAll(".nv-noData").data([at]);return p.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),p.attr("x",ae.left+B/2).attr("y",ae.top+y/2).text(function(M){return M}),U}t.selectAll(".nv-noData").remove();var n=E.filter(function(M){return !M.disabled&&M.bar}),w=E.filter(function(M){return !M.bar});R=ad.xScale(),aj=af.scale(),I=ad.yScale(),V=ab.yScale(),z=ak.yScale(),G=ag.yScale();var l=E.filter(function(M){return !M.disabled&&M.bar}).map(function(M){return M.values.map(function(O,N){return{x:W(O,N),y:aq(O,N)}})}),k=E.filter(function(M){return !M.disabled&&!M.bar}).map(function(M){return M.values.map(function(O,N){return{x:W(O,N),y:aq(O,N)}})});R.range([0,B]),aj.domain(d3.extent(d3.merge(l.concat(k)),function(M){return M.x})).range([0,B]);var m=t.selectAll("g.nv-wrap.nv-linePlusBar").data([E]),o=m.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),x=m.select("g");o.append("g").attr("class","nv-legendWrap");var v=o.append("g").attr("class","nv-focus");v.append("g").attr("class","nv-x nv-axis"),v.append("g").attr("class","nv-y1 nv-axis"),v.append("g").attr("class","nv-y2 nv-axis"),v.append("g").attr("class","nv-barsWrap"),v.append("g").attr("class","nv-linesWrap");var r=o.append("g").attr("class","nv-context");r.append("g").attr("class","nv-x nv-axis"),r.append("g").attr("class","nv-y1 nv-axis"),r.append("g").attr("class","nv-y2 nv-axis"),r.append("g").attr("class","nv-barsWrap"),r.append("g").attr("class","nv-linesWrap"),r.append("g").attr("class","nv-brushBackground"),r.append("g").attr("class","nv-x nv-brush"),K&&(ap.width(B/2),x.select(".nv-legendWrap").datum(E.map(function(M){return M.originalKey=M.originalKey===undefined?M.key:M.originalKey,M.key=M.originalKey+(M.bar?" (left axis)":" (right axis)"),M})).call(ap),ae.top!=ap.height()&&(ae.top=ap.height(),y=(ah||parseInt(t.style("height"))||400)-ae.top-ae.bottom-am),x.select(".nv-legendWrap").attr("transform","translate("+B/2+","+-ae.top+")")),m.attr("transform","translate("+ae.left+","+ae.top+")"),ak.width(B).height(C).color(E.map(function(N,M){return N.color||Y(N,M)}).filter(function(M,N){return !E[N].disabled&&E[N].bar})),ag.width(B).height(C).color(E.map(function(N,M){return N.color||Y(N,M)}).filter(function(M,N){return !E[N].disabled&&!E[N].bar}));var A=x.select(".nv-context .nv-barsWrap").datum(n.length?n:[{values:[]}]),i=x.select(".nv-context .nv-linesWrap").datum(w[0].disabled?[{values:[]}]:w);x.select(".nv-context").attr("transform","translate(0,"+(y+ae.bottom+ao.top)+")"),A.transition().call(ak),i.transition().call(ag),al.x(aj).on("brush",s),X&&al.extent(X);var h=x.select(".nv-brushBackground").selectAll("g").data([X||al.extent()]),H=h.enter().append("g");H.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",C),H.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",C);var g=x.select(".nv-x.nv-brush").call(al);g.selectAll("rect").attr("height",C),g.selectAll(".resize").append("path").attr("d",L),af.ticks(B/100).tickSize(-C,0),x.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+z.range()[0]+")"),x.select(".nv-context .nv-x.nv-axis").transition().call(af),an.scale(z).ticks(C/36).tickSize(-B,0),x.select(".nv-context .nv-y1.nv-axis").style("opacity",n.length?1:0).attr("transform","translate(0,"+aj.range()[0]+")"),x.select(".nv-context .nv-y1.nv-axis").transition().call(an),ai.scale(G).ticks(C/36).tickSize(n.length?0:-B,0),x.select(".nv-context .nv-y2.nv-axis").style("opacity",w.length?1:0).attr("transform","translate("+aj.range()[1]+",0)"),x.select(".nv-context .nv-y2.nv-axis").transition().call(ai),ap.dispatch.on("stateChange",function(M){U.update()}),Q.on("tooltipShow",function(M){e&&J(M,D.parentNode)}),s()}),U}var ab=b.models.line(),ag=b.models.line(),ad=b.models.historicalBar(),ak=b.models.historicalBar(),ac=b.models.axis(),af=b.models.axis(),aa=b.models.axis(),ar=b.models.axis(),an=b.models.axis(),ai=b.models.axis(),ap=b.models.legend(),al=d3.svg.brush(),ae={top:30,right:30,bottom:30,left:60},ao={top:0,right:30,bottom:20,left:60},Z=null,ah=null,am=100,W=function(f){return f.x},aq=function(f){return f.y},Y=b.utils.defaultColor(),K=!0,j,X=null,e=!0,F=function(k,g,l,h,f){return"<h3>"+k+"</h3><p>"+l+" at "+g+"</p>"},R,aj,I,V,z,G,at="No Data Available.",Q=d3.dispatch("tooltipShow","tooltipHide","brush"),q=0;ab.clipEdge(!0),ag.interactive(!1),ac.orient("bottom").tickPadding(5),aa.orient("left"),ar.orient("right"),af.orient("bottom").tickPadding(5),an.orient("left"),ai.orient("right");var J=function(t,k){j&&(t.pointIndex+=Math.ceil(j[0]));var h=t.pos[0]+(k.offsetLeft||0),p=t.pos[1]+(k.offsetTop||0),m=ac.tickFormat()(ab.x()(t.point,t.pointIndex)),g=(t.series.bar?aa:ar).tickFormat()(ab.y()(t.point,t.pointIndex)),s=F(t.series.key,m,g,t,U);b.tooltip.show([h,p],s,t.value<0?"n":"s",null,k)};return ab.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+ae.left,f.pos[1]+ae.top],Q.tooltipShow(f)}),ab.dispatch.on("elementMouseout.tooltip",function(f){Q.tooltipHide(f)}),ad.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+ae.left,f.pos[1]+ae.top],Q.tooltipShow(f)}),ad.dispatch.on("elementMouseout.tooltip",function(f){Q.tooltipHide(f)}),Q.on("tooltipHide",function(){e&&b.tooltip.cleanup()}),U.dispatch=Q,U.legend=ap,U.lines=ab,U.lines2=ag,U.bars=ad,U.bars2=ak,U.xAxis=ac,U.x2Axis=af,U.y1Axis=aa,U.y2Axis=ar,U.y3Axis=an,U.y4Axis=ai,d3.rebind(U,ab,"defined","size","clipVoronoi","interpolate"),U.options=b.utils.optionsFunc.bind(U),U.x=function(f){return arguments.length?(W=f,ab.x(f),ad.x(f),U):W},U.y=function(f){return arguments.length?(aq=f,ab.y(f),ad.y(f),U):aq},U.margin=function(f){return arguments.length?(ae.top=typeof f.top!="undefined"?f.top:ae.top,ae.right=typeof f.right!="undefined"?f.right:ae.right,ae.bottom=typeof f.bottom!="undefined"?f.bottom:ae.bottom,ae.left=typeof f.left!="undefined"?f.left:ae.left,U):ae},U.width=function(f){return arguments.length?(Z=f,U):Z},U.height=function(f){return arguments.length?(ah=f,U):ah},U.color=function(f){return arguments.length?(Y=b.utils.getColor(f),ap.color(Y),U):Y},U.showLegend=function(f){return arguments.length?(K=f,U):K},U.tooltips=function(f){return arguments.length?(e=f,U):e},U.tooltipContent=function(f){return arguments.length?(F=f,U):F},U.noData=function(f){return arguments.length?(at=f,U):at},U.brushExtent=function(f){return arguments.length?(X=f,U):X},U},b.models.multiBar=function(){function I(f){return f.each(function(r){var h=M-G.left-G.right,m=J-G.top-G.bottom,t=d3.select(this);W&&r.length&&(W=[{values:r[0].values.map(function(w){return{x:w.x,y:0,series:w.series,size:0.01}})}]),X&&(r=d3.layout.stack().offset(R).values(function(w){return w.values}).y(Z)(!r.length&&W?W:r)),r.forEach(function(x,w){x.values.forEach(function(y){y.series=w})}),X&&r[0].values.map(function(x,C){var y=0,w=0;r.map(function(N){var E=N.values[C];E.size=Math.abs(E.y),E.y<0?(E.y1=w,w-=E.size):(E.y1=E.size+y,y+=E.size)})});var l=q&&Y?[]:r.map(function(w){return w.values.map(function(y,x){return{x:D(y,x),y:Z(y,x),y0:y.y0,y1:y.y1}})});Q.domain(q||d3.merge(l).map(function(w){return w.x})).rangeBands(A||[0,h],j),H.domain(Y||d3.extent(d3.merge(l).map(function(w){return X?w.y>0?w.y1:w.y1+w.y:w.y}).concat(V))).range(F||[m,0]),Q.domain()[0]===Q.domain()[1]&&(Q.domain()[0]?Q.domain([Q.domain()[0]-Q.domain()[0]*0.01,Q.domain()[1]+Q.domain()[1]*0.01]):Q.domain([-1,1])),H.domain()[0]===H.domain()[1]&&(H.domain()[0]?H.domain([H.domain()[0]+H.domain()[0]*0.01,H.domain()[1]-H.domain()[1]*0.01]):H.domain([-1,1])),e=e||Q,k=k||H;var p=t.selectAll("g.nv-wrap.nv-multibar").data([r]),s=p.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),v=s.append("defs"),g=s.append("g"),o=p.select("g");g.append("g").attr("class","nv-groups"),p.attr("transform","translate("+G.left+","+G.top+")"),v.append("clipPath").attr("id","nv-edge-clip-"+L).append("rect"),p.select("#nv-edge-clip-"+L+" rect").attr("width",h).attr("height",m),o.attr("clip-path",P?"url(#nv-edge-clip-"+L+")":"");var u=p.select(".nv-groups").selectAll(".nv-group").data(function(w){return w},function(x,w){return w});u.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001),u.exit().transition().selectAll("rect.nv-bar").delay(function(w,x){return x*U/r[0].values.length}).attr("y",function(w){return X?k(w.y0):k(0)}).attr("height",0).remove(),u.attr("class",function(x,w){return"nv-group nv-series-"+w}).classed("hover",function(w){return w.hover}).style("fill",function(x,w){return K(x,w)}).style("stroke",function(x,w){return K(x,w)}),u.transition().style("stroke-opacity",1).style("fill-opacity",0.75);var i=u.selectAll("rect.nv-bar").data(function(w){return W&&!r.length?W.values:w.values});i.exit().remove();var n=i.enter().append("rect").attr("class",function(x,w){return Z(x,w)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(w,y,x){return X?0:x*Q.rangeBand()/r.length}).attr("y",function(w){return k(X?w.y0:0)}).attr("height",0).attr("width",Q.rangeBand()/(X?1:r.length)).attr("transform",function(x,w){return"translate("+Q(D(x,w))+",0)"});i.style("fill",function(x,w,y){return K(x,y,w)}).style("stroke",function(x,w,y){return K(x,y,w)}).on("mouseover",function(w,x){d3.select(this).classed("hover",!0),z.elementMouseover({value:Z(w,x),point:w,series:r[w.series],pos:[Q(D(w,x))+Q.rangeBand()*(X?r.length/2:w.series+0.5)/r.length,H(Z(w,x)+(X?w.y0:0))],pointIndex:x,seriesIndex:w.series,e:d3.event})}).on("mouseout",function(w,x){d3.select(this).classed("hover",!1),z.elementMouseout({value:Z(w,x),point:w,series:r[w.series],pointIndex:x,seriesIndex:w.series,e:d3.event})}).on("click",function(w,x){z.elementClick({value:Z(w,x),point:w,series:r[w.series],pos:[Q(D(w,x))+Q.rangeBand()*(X?r.length/2:w.series+0.5)/r.length,H(Z(w,x)+(X?w.y0:0))],pointIndex:x,seriesIndex:w.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(w,x){z.elementDblClick({value:Z(w,x),point:w,series:r[w.series],pos:[Q(D(w,x))+Q.rangeBand()*(X?r.length/2:w.series+0.5)/r.length,H(Z(w,x)+(X?w.y0:0))],pointIndex:x,seriesIndex:w.series,e:d3.event}),d3.event.stopPropagation()}),i.attr("class",function(x,w){return Z(x,w)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(x,w){return"translate("+Q(D(x,w))+",0)"}),B&&(O||(O=r.map(function(){return !0})),i.style("fill",function(x,w,y){return d3.rgb(B(x,w)).darker(O.map(function(E,C){return C}).filter(function(E,C){return !O[C]})[y]).toString()}).style("stroke",function(x,w,y){return d3.rgb(B(x,w)).darker(O.map(function(E,C){return C}).filter(function(E,C){return !O[C]})[y]).toString()})),X?i.transition().delay(function(w,x){return x*U/r[0].values.length}).attr("y",function(x,w){return H(X?x.y1:0)}).attr("height",function(x,w){return Math.max(Math.abs(H(x.y+(X?x.y0:0))-H(X?x.y0:0)),1)}).attr("x",function(w,x){return X?0:w.series*Q.rangeBand()/r.length}).attr("width",Q.rangeBand()/(X?1:r.length)):i.transition().delay(function(w,x){return x*U/r[0].values.length}).attr("x",function(w,x){return w.series*Q.rangeBand()/r.length}).attr("width",Q.rangeBand()/r.length).attr("y",function(x,w){return Z(x,w)<0?H(0):H(0)-H(Z(x,w))<1?H(0)-1:H(Z(x,w))||0}).attr("height",function(x,w){return Math.max(Math.abs(H(Z(x,w))-H(0)),1)||0}),e=Q.copy(),k=H.copy()}),I}var G={top:0,right:0,bottom:0,left:0},M=960,J=500,Q=d3.scale.ordinal(),H=d3.scale.linear(),L=Math.floor(Math.random()*10000),D=function(f){return f.x},Z=function(f){return f.y},V=[0],P=!0,X=!1,R="zero",K=b.utils.defaultColor(),W=!1,B=null,O,U=1200,q,Y,A,F,j=0.1,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),e,k;return I.dispatch=z,I.options=b.utils.optionsFunc.bind(I),I.x=function(f){return arguments.length?(D=f,I):D},I.y=function(f){return arguments.length?(Z=f,I):Z},I.margin=function(f){return arguments.length?(G.top=typeof f.top!="undefined"?f.top:G.top,G.right=typeof f.right!="undefined"?f.right:G.right,G.bottom=typeof f.bottom!="undefined"?f.bottom:G.bottom,G.left=typeof f.left!="undefined"?f.left:G.left,I):G},I.width=function(f){return arguments.length?(M=f,I):M},I.height=function(f){return arguments.length?(J=f,I):J},I.xScale=function(f){return arguments.length?(Q=f,I):Q},I.yScale=function(f){return arguments.length?(H=f,I):H},I.xDomain=function(f){return arguments.length?(q=f,I):q},I.yDomain=function(f){return arguments.length?(Y=f,I):Y},I.xRange=function(f){return arguments.length?(A=f,I):A},I.yRange=function(f){return arguments.length?(F=f,I):F},I.forceY=function(f){return arguments.length?(V=f,I):V},I.stacked=function(f){return arguments.length?(X=f,I):X},I.stackOffset=function(f){return arguments.length?(R=f,I):R},I.clipEdge=function(f){return arguments.length?(P=f,I):P},I.color=function(f){return arguments.length?(K=b.utils.getColor(f),I):K},I.barColor=function(f){return arguments.length?(B=b.utils.getColor(f),I):B},I.disabled=function(f){return arguments.length?(O=f,I):O},I.id=function(f){return arguments.length?(L=f,I):L},I.hideable=function(f){return arguments.length?(W=f,I):W},I.delay=function(f){return arguments.length?(U=f,I):U},I.groupSpacing=function(f){return arguments.length?(j=f,I):j},I},b.models.multiBarChart=function(){function P(f){return f.each(function(r){var u=d3.select(this),p=this,s=(H||parseInt(u.style("width"))||960)-R.left-R.right,x=(af||parseInt(u.style("height"))||400)-R.top-R.bottom;P.update=function(){u.transition().duration(X).call(P)},P.container=this,j.disabled=r.map(function(A){return !!A.disabled});if(!D){var g;D={};for(g in j){j[g] instanceof Array?D[g]=j[g].slice(0):D[g]=j[g]}}if(!r||!r.length||!r.filter(function(A){return A.values.length}).length){var o=u.selectAll(".nv-noData").data([e]);return o.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),o.attr("x",R.left+s/2).attr("y",R.top+x/2).text(function(A){return A}),P}u.selectAll(".nv-noData").remove(),F=J.xScale(),I=J.yScale();var w=u.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([r]),i=w.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),m=w.select("g");i.append("g").attr("class","nv-x nv-axis"),i.append("g").attr("class","nv-y nv-axis"),i.append("g").attr("class","nv-barsWrap"),i.append("g").attr("class","nv-legendWrap"),i.append("g").attr("class","nv-controlsWrap"),ad&&(Y.width(s-M()),J.barColor()&&r.forEach(function(C,A){C.color=d3.rgb("#ccc").darker(A*1.5).toString()}),m.select(".nv-legendWrap").datum(r).call(Y),R.top!=Y.height()&&(R.top=Y.height(),x=(af||parseInt(u.style("height"))||400)-R.top-R.bottom),m.select(".nv-legendWrap").attr("transform","translate("+M()+","+-R.top+")"));if(W){var y=[{key:"Grouped",disabled:J.stacked()},{key:"Stacked",disabled:!J.stacked()}];K.width(M()).color(["#444","#444","#444"]),m.select(".nv-controlsWrap").datum(y).attr("transform","translate(0,"+-R.top+")").call(K)}w.attr("transform","translate("+R.left+","+R.top+")"),ac&&m.select(".nv-y.nv-axis").attr("transform","translate("+s+",0)"),J.disabled(r.map(function(A){return A.disabled})).width(s).height(x).color(r.map(function(C,A){return C.color||ab(C,A)}).filter(function(A,C){return !r[C].disabled}));var v=m.select(".nv-barsWrap").datum(r.filter(function(A){return !A.disabled}));v.transition().call(J);if(Z){U.scale(F).ticks(s/100).tickSize(-x,0),m.select(".nv-x.nv-axis").attr("transform","translate(0,"+I.range()[0]+")"),m.select(".nv-x.nv-axis").transition().call(U);var h=m.select(".nv-x.nv-axis > g").selectAll("g");h.selectAll("line, text").style("opacity",1);if(V){var n=function(C,A){return"translate("+C+","+A+")"},l=5,t=17;h.selectAll("text").attr("transform",function(C,A,E){return n(0,E%2==0?l:t)});var k=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;m.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(C,A){return n(0,A===0||k%2!==0?t:l)})}G&&h.filter(function(A,C){return C%Math.ceil(r[0].values.length/(s/100))!==0}).selectAll("text, line").style("opacity",0),aa&&h.selectAll(".tick text").attr("transform","rotate("+aa+" 0,0)").style("text-anchor",aa>0?"start":"end"),m.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}Q&&(O.scale(I).ticks(x/36).tickSize(-s,0),m.select(".nv-y.nv-axis").transition().call(O)),Y.dispatch.on("stateChange",function(A){j=A,q.stateChange(j),P.update()}),K.dispatch.on("legendClick",function(A,C){if(!A.disabled){return}y=y.map(function(E){return E.disabled=!0,E}),A.disabled=!1;switch(A.key){case"Grouped":J.stacked(!1);break;case"Stacked":J.stacked(!0)}j.stacked=J.stacked(),q.stateChange(j),P.update()}),q.on("tooltipShow",function(A){B&&z(A,p.parentNode)}),q.on("changeState",function(A){typeof A.disabled!="undefined"&&(r.forEach(function(E,C){E.disabled=A.disabled[C]}),j.disabled=A.disabled),typeof A.stacked!="undefined"&&(J.stacked(A.stacked),j.stacked=A.stacked),P.update()})}),P}var J=b.models.multiBar(),U=b.models.axis(),O=b.models.axis(),Y=b.models.legend(),K=b.models.legend(),R={top:30,right:20,bottom:50,left:60},H=null,af=null,ab=b.utils.defaultColor(),W=!0,ad=!0,Z=!0,Q=!0,ac=!1,G=!0,V=!1,aa=0,B=!0,ae=function(k,g,l,h,f){return"<h3>"+k+"</h3><p>"+l+" on "+g+"</p>"},F,I,j={stacked:!1},D=null,e="No Data Available.",q=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),M=function(){return W?180:0},X=250;J.stacked(!1),U.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(f){return f}),O.orient(ac?"right":"left").tickFormat(d3.format(",.1f")),K.updateState(!1);var z=function(m,n){var r=m.pos[0]+(n.offsetLeft||0),k=m.pos[1]+(n.offsetTop||0),h=U.tickFormat()(J.x()(m.point,m.pointIndex)),p=O.tickFormat()(J.y()(m.point,m.pointIndex)),g=ae(m.series.key,h,p,m,P);b.tooltip.show([r,k],g,m.value<0?"n":"s",null,n)};return J.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+R.left,f.pos[1]+R.top],q.tooltipShow(f)}),J.dispatch.on("elementMouseout.tooltip",function(f){q.tooltipHide(f)}),q.on("tooltipHide",function(){B&&b.tooltip.cleanup()}),P.dispatch=q,P.multibar=J,P.legend=Y,P.xAxis=U,P.yAxis=O,d3.rebind(P,J,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),P.options=b.utils.optionsFunc.bind(P),P.margin=function(f){return arguments.length?(R.top=typeof f.top!="undefined"?f.top:R.top,R.right=typeof f.right!="undefined"?f.right:R.right,R.bottom=typeof f.bottom!="undefined"?f.bottom:R.bottom,R.left=typeof f.left!="undefined"?f.left:R.left,P):R},P.width=function(f){return arguments.length?(H=f,P):H},P.height=function(f){return arguments.length?(af=f,P):af},P.color=function(f){return arguments.length?(ab=b.utils.getColor(f),Y.color(ab),P):ab},P.showControls=function(f){return arguments.length?(W=f,P):W},P.showLegend=function(f){return arguments.length?(ad=f,P):ad},P.showXAxis=function(f){return arguments.length?(Z=f,P):Z},P.showYAxis=function(f){return arguments.length?(Q=f,P):Q},P.rightAlignYAxis=function(f){return arguments.length?(ac=f,O.orient(f?"right":"left"),P):ac},P.reduceXTicks=function(f){return arguments.length?(G=f,P):G},P.rotateLabels=function(f){return arguments.length?(aa=f,P):aa},P.staggerLabels=function(f){return arguments.length?(V=f,P):V},P.tooltip=function(f){return arguments.length?(ae=f,P):ae},P.tooltips=function(f){return arguments.length?(B=f,P):B},P.tooltipContent=function(f){return arguments.length?(ae=f,P):ae},P.state=function(f){return arguments.length?(j=f,P):j},P.defaultState=function(f){return arguments.length?(D=f,P):D},P.noData=function(f){return arguments.length?(e=f,P):e},P.transitionDuration=function(f){return arguments.length?(X=f,P):X},P},b.models.multiBarHorizontal=function(){function I(f){return f.each(function(r){var n=M-G.left-G.right,u=J-G.top-G.bottom,h=d3.select(this);K&&(r=d3.layout.stack().offset("zero").values(function(i){return i.values}).y(Z)(r)),r.forEach(function(x,i){x.values.forEach(function(y){y.series=i})}),K&&r[0].values.map(function(y,E){var C=0,x=0;r.map(function(N){var i=N.values[E];i.size=Math.abs(i.y),i.y<0?(i.y1=x-i.size,x-=i.size):(i.y1=C,C+=i.size)})});var m=Y&&A?[]:r.map(function(i){return i.values.map(function(y,x){return{x:D(y,x),y:Z(y,x),y0:y.y0,y1:y.y1}})});H.domain(Y||d3.merge(m).map(function(i){return i.x})).rangeBands(F||[0,u],0.1),L.domain(A||d3.extent(d3.merge(m).map(function(i){return K?i.y>0?i.y1+i.y:i.y1:i.y}).concat(V))),W&&!K?L.range(j||[L.domain()[0]<0?O:0,n-(L.domain()[1]>0?O:0)]):L.range(j||[0,n]),e=e||H,k=k||d3.scale.linear().domain(L.domain()).range([L(0),L(0)]);var t=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([r]),l=t.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),p=l.append("defs"),s=l.append("g"),w=t.select("g");s.append("g").attr("class","nv-groups"),t.attr("transform","translate("+G.left+","+G.top+")");var g=t.select(".nv-groups").selectAll(".nv-group").data(function(i){return i},function(x,i){return i});g.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001),g.exit().transition().style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove(),g.attr("class",function(x,i){return"nv-group nv-series-"+i}).classed("hover",function(i){return i.hover}).style("fill",function(x,i){return P(x,i)}).style("stroke",function(x,i){return P(x,i)}),g.transition().style("stroke-opacity",1).style("fill-opacity",0.75);var o=g.selectAll("g.nv-bar").data(function(i){return i.values});o.exit().remove();var v=o.enter().append("g").attr("transform",function(i,y,x){return"translate("+k(K?i.y0:0)+","+(K?0:x*H.rangeBand()/r.length+H(D(i,y)))+")"});v.append("rect").attr("width",0).attr("height",H.rangeBand()/(K?1:r.length)),o.on("mouseover",function(i,x){d3.select(this).classed("hover",!0),z.elementMouseover({value:Z(i,x),point:i,series:r[i.series],pos:[L(Z(i,x)+(K?i.y0:0)),H(D(i,x))+H.rangeBand()*(K?r.length/2:i.series+0.5)/r.length],pointIndex:x,seriesIndex:i.series,e:d3.event})}).on("mouseout",function(i,x){d3.select(this).classed("hover",!1),z.elementMouseout({value:Z(i,x),point:i,series:r[i.series],pointIndex:x,seriesIndex:i.series,e:d3.event})}).on("click",function(i,x){z.elementClick({value:Z(i,x),point:i,series:r[i.series],pos:[H(D(i,x))+H.rangeBand()*(K?r.length/2:i.series+0.5)/r.length,L(Z(i,x)+(K?i.y0:0))],pointIndex:x,seriesIndex:i.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(i,x){z.elementDblClick({value:Z(i,x),point:i,series:r[i.series],pos:[H(D(i,x))+H.rangeBand()*(K?r.length/2:i.series+0.5)/r.length,L(Z(i,x)+(K?i.y0:0))],pointIndex:x,seriesIndex:i.series,e:d3.event}),d3.event.stopPropagation()}),v.append("text"),W&&!K?(o.select("text").attr("text-anchor",function(x,i){return Z(x,i)<0?"end":"start"}).attr("y",H.rangeBand()/(r.length*2)).attr("dy",".32em").text(function(x,i){return U(Z(x,i))}),o.transition().select("text").attr("x",function(x,i){return Z(x,i)<0?-4:L(Z(x,i))-L(0)+4})):o.selectAll("text").text(""),B&&!K?(v.append("text").classed("nv-bar-label",!0),o.select("text.nv-bar-label").attr("text-anchor",function(x,i){return Z(x,i)<0?"start":"end"}).attr("y",H.rangeBand()/(r.length*2)).attr("dy",".32em").text(function(x,i){return D(x,i)}),o.transition().select("text.nv-bar-label").attr("x",function(x,i){return Z(x,i)<0?L(0)-L(Z(x,i))+4:-4})):o.selectAll("text.nv-bar-label").text(""),o.attr("class",function(x,i){return Z(x,i)<0?"nv-bar negative":"nv-bar positive"}),X&&(R||(R=r.map(function(){return !0})),o.style("fill",function(x,i,y){return d3.rgb(X(x,i)).darker(R.map(function(E,C){return C}).filter(function(E,C){return !R[C]})[y]).toString()}).style("stroke",function(x,i,y){return d3.rgb(X(x,i)).darker(R.map(function(E,C){return C}).filter(function(E,C){return !R[C]})[y]).toString()})),K?o.transition().attr("transform",function(x,i){return"translate("+L(x.y1)+","+H(D(x,i))+")"}).select("rect").attr("width",function(x,i){return Math.abs(L(Z(x,i)+x.y0)-L(x.y0))}).attr("height",H.rangeBand()):o.transition().attr("transform",function(i,x){return"translate("+(Z(i,x)<0?L(Z(i,x)):L(0))+","+(i.series*H.rangeBand()/r.length+H(D(i,x)))+")"}).select("rect").attr("height",H.rangeBand()/r.length).attr("width",function(x,i){return Math.max(Math.abs(L(Z(x,i))-L(0)),1)}),e=H.copy(),k=L.copy()}),I}var G={top:0,right:0,bottom:0,left:0},M=960,J=500,Q=Math.floor(Math.random()*10000),H=d3.scale.ordinal(),L=d3.scale.linear(),D=function(f){return f.x},Z=function(f){return f.y},V=[0],P=b.utils.defaultColor(),X=null,R,K=!1,W=!1,B=!1,O=60,U=d3.format(",.2f"),q=1200,Y,A,F,j,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),e,k;return I.dispatch=z,I.options=b.utils.optionsFunc.bind(I),I.x=function(f){return arguments.length?(D=f,I):D},I.y=function(f){return arguments.length?(Z=f,I):Z},I.margin=function(f){return arguments.length?(G.top=typeof f.top!="undefined"?f.top:G.top,G.right=typeof f.right!="undefined"?f.right:G.right,G.bottom=typeof f.bottom!="undefined"?f.bottom:G.bottom,G.left=typeof f.left!="undefined"?f.left:G.left,I):G},I.width=function(f){return arguments.length?(M=f,I):M},I.height=function(f){return arguments.length?(J=f,I):J},I.xScale=function(f){return arguments.length?(H=f,I):H},I.yScale=function(f){return arguments.length?(L=f,I):L},I.xDomain=function(f){return arguments.length?(Y=f,I):Y},I.yDomain=function(f){return arguments.length?(A=f,I):A},I.xRange=function(f){return arguments.length?(F=f,I):F},I.yRange=function(f){return arguments.length?(j=f,I):j},I.forceY=function(f){return arguments.length?(V=f,I):V},I.stacked=function(f){return arguments.length?(K=f,I):K},I.color=function(f){return arguments.length?(P=b.utils.getColor(f),I):P},I.barColor=function(f){return arguments.length?(X=b.utils.getColor(f),I):X},I.disabled=function(f){return arguments.length?(R=f,I):R},I.id=function(f){return arguments.length?(Q=f,I):Q},I.delay=function(f){return arguments.length?(q=f,I):q},I.showValues=function(f){return arguments.length?(W=f,I):W},I.showBarLabels=function(f){return arguments.length?(B=f,I):B},I.valueFormat=function(f){return arguments.length?(U=f,I):U},I.valuePadding=function(f){return arguments.length?(O=f,I):O},I},b.models.multiBarHorizontalChart=function(){function I(f){return f.each(function(r){var t=d3.select(this),l=this,n=(D||parseInt(t.style("width"))||960)-L.left-L.right,u=(Z||parseInt(t.style("height"))||400)-L.top-L.bottom;I.update=function(){t.transition().duration(e).call(I)},I.container=this,Y.disabled=r.map(function(m){return !!m.disabled});if(!A){var i;A={};for(i in Y){Y[i] instanceof Array?A[i]=Y[i].slice(0):A[i]=Y[i]}}if(!r||!r.length||!r.filter(function(m){return m.values.length}).length){var p=t.selectAll(".nv-noData").data([F]);return p.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),p.attr("x",L.left+n/2).attr("y",L.top+u/2).text(function(m){return m}),I}t.selectAll(".nv-noData").remove(),U=G.xScale(),q=G.yScale();var s=t.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([r]),w=s.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),g=s.select("g");w.append("g").attr("class","nv-x nv-axis"),w.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),w.append("g").attr("class","nv-barsWrap"),w.append("g").attr("class","nv-legendWrap"),w.append("g").attr("class","nv-controlsWrap"),X&&(Q.width(n-z()),G.barColor()&&r.forEach(function(x,m){x.color=d3.rgb("#ccc").darker(m*1.5).toString()}),g.select(".nv-legendWrap").datum(r).call(Q),L.top!=Q.height()&&(L.top=Q.height(),u=(Z||parseInt(t.style("height"))||400)-L.top-L.bottom),g.select(".nv-legendWrap").attr("transform","translate("+z()+","+-L.top+")"));if(P){var o=[{key:"Grouped",disabled:G.stacked()},{key:"Stacked",disabled:!G.stacked()}];H.width(z()).color(["#444","#444","#444"]),g.select(".nv-controlsWrap").datum(o).attr("transform","translate(0,"+-L.top+")").call(H)}s.attr("transform","translate("+L.left+","+L.top+")"),G.disabled(r.map(function(m){return m.disabled})).width(n).height(u).color(r.map(function(x,m){return x.color||V(x,m)}).filter(function(m,x){return !r[x].disabled}));var v=g.select(".nv-barsWrap").datum(r.filter(function(m){return !m.disabled}));v.transition().call(G);if(R){M.scale(U).ticks(u/24).tickSize(-n,0),g.select(".nv-x.nv-axis").transition().call(M);var h=g.select(".nv-x.nv-axis").selectAll("g");h.selectAll("line, text")}K&&(J.scale(q).ticks(n/100).tickSize(-u,0),g.select(".nv-y.nv-axis").attr("transform","translate(0,"+u+")"),g.select(".nv-y.nv-axis").transition().call(J)),g.select(".nv-zeroLine line").attr("x1",q(0)).attr("x2",q(0)).attr("y1",0).attr("y2",-u),Q.dispatch.on("stateChange",function(m){Y=m,j.stateChange(Y),I.update()}),H.dispatch.on("legendClick",function(m,x){if(!m.disabled){return}o=o.map(function(y){return y.disabled=!0,y}),m.disabled=!1;switch(m.key){case"Grouped":G.stacked(!1);break;case"Stacked":G.stacked(!0)}Y.stacked=G.stacked(),j.stateChange(Y),I.update()}),j.on("tooltipShow",function(m){B&&k(m,l.parentNode)}),j.on("changeState",function(m){typeof m.disabled!="undefined"&&(r.forEach(function(y,x){y.disabled=m.disabled[x]}),Y.disabled=m.disabled),typeof m.stacked!="undefined"&&(G.stacked(m.stacked),Y.stacked=m.stacked),I.update()})}),I}var G=b.models.multiBarHorizontal(),M=b.models.axis(),J=b.models.axis(),Q=b.models.legend().height(30),H=b.models.legend().height(30),L={top:30,right:20,bottom:50,left:60},D=null,Z=null,V=b.utils.defaultColor(),P=!0,X=!0,R=!0,K=!0,W=!1,B=!0,O=function(l,g,m,h,f){return"<h3>"+l+" - "+g+"</h3><p>"+m+"</p>"},U,q,Y={stacked:W},A=null,F="No Data Available.",j=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z=function(){return P?180:0},e=250;G.stacked(W),M.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(f){return f}),J.orient("bottom").tickFormat(d3.format(",.1f")),H.updateState(!1);var k=function(n,p){var t=n.pos[0]+(p.offsetLeft||0),m=n.pos[1]+(p.offsetTop||0),h=M.tickFormat()(G.x()(n.point,n.pointIndex)),r=J.tickFormat()(G.y()(n.point,n.pointIndex)),g=O(n.series.key,h,r,n,I);b.tooltip.show([t,m],g,n.value<0?"e":"w",null,p)};return G.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+L.left,f.pos[1]+L.top],j.tooltipShow(f)}),G.dispatch.on("elementMouseout.tooltip",function(f){j.tooltipHide(f)}),j.on("tooltipHide",function(){B&&b.tooltip.cleanup()}),I.dispatch=j,I.multibar=G,I.legend=Q,I.xAxis=M,I.yAxis=J,d3.rebind(I,G,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),I.options=b.utils.optionsFunc.bind(I),I.margin=function(f){return arguments.length?(L.top=typeof f.top!="undefined"?f.top:L.top,L.right=typeof f.right!="undefined"?f.right:L.right,L.bottom=typeof f.bottom!="undefined"?f.bottom:L.bottom,L.left=typeof f.left!="undefined"?f.left:L.left,I):L},I.width=function(f){return arguments.length?(D=f,I):D},I.height=function(f){return arguments.length?(Z=f,I):Z},I.color=function(f){return arguments.length?(V=b.utils.getColor(f),Q.color(V),I):V},I.showControls=function(f){return arguments.length?(P=f,I):P},I.showLegend=function(f){return arguments.length?(X=f,I):X},I.showXAxis=function(f){return arguments.length?(R=f,I):R},I.showYAxis=function(f){return arguments.length?(K=f,I):K},I.tooltip=function(f){return arguments.length?(O=f,I):O},I.tooltips=function(f){return arguments.length?(B=f,I):B},I.tooltipContent=function(f){return arguments.length?(O=f,I):O},I.state=function(f){return arguments.length?(Y=f,I):Y},I.defaultState=function(f){return arguments.length?(A=f,I):A},I.noData=function(f){return arguments.length?(F=f,I):F},I.transitionDuration=function(f){return arguments.length?(e=f,I):e},I},b.models.multiChart=function(){function I(f){return f.each(function(ac){var y=d3.select(this),ab=this;I.update=function(){y.transition().call(I)},I.container=this;var T=(J||parseInt(y.style("width"))||960)-G.left-G.right,s=(Q||parseInt(y.style("height"))||400)-G.top-G.bottom,S=ac.filter(function(u){return !u.disabled&&u.type=="line"&&u.yAxis==1}),p=ac.filter(function(u){return !u.disabled&&u.type=="line"&&u.yAxis==2}),r=ac.filter(function(u){return !u.disabled&&u.type=="bar"&&u.yAxis==1}),ad=ac.filter(function(u){return !u.disabled&&u.type=="bar"&&u.yAxis==2}),C=ac.filter(function(u){return !u.disabled&&u.type=="area"&&u.yAxis==1}),o=ac.filter(function(u){return !u.disabled&&u.type=="area"&&u.yAxis==2}),w=ac.filter(function(u){return !u.disabled&&u.yAxis==1}).map(function(u){return u.values.map(function(af,ae){return{x:af.x,y:af.y}})}),E=ac.filter(function(u){return !u.disabled&&u.yAxis==2}).map(function(u){return u.values.map(function(af,ae){return{x:af.x,y:af.y}})});Z.domain(d3.extent(d3.merge(w.concat(E)),function(u){return u.x})).range([0,T]);var aa=y.selectAll("g.wrap.multiChart").data([ac]),x=aa.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");x.append("g").attr("class","x axis"),x.append("g").attr("class","y1 axis"),x.append("g").attr("class","y2 axis"),x.append("g").attr("class","lines1Wrap"),x.append("g").attr("class","lines2Wrap"),x.append("g").attr("class","bars1Wrap"),x.append("g").attr("class","bars2Wrap"),x.append("g").attr("class","stack1Wrap"),x.append("g").attr("class","stack2Wrap"),x.append("g").attr("class","legendWrap");var v=aa.select("g");H&&(z.width(T/2),v.select(".legendWrap").datum(ac.map(function(u){return u.originalKey=u.originalKey===undefined?u.key:u.originalKey,u.key=u.originalKey+(u.yAxis==1?"":" (right axis)"),u})).call(z),G.top!=z.height()&&(G.top=z.height(),s=(Q||parseInt(y.style("height"))||400)-G.top-G.bottom),v.select(".legendWrap").attr("transform","translate("+T/2+","+-G.top+")")),W.width(T).height(s).interpolate("monotone").color(ac.map(function(ae,u){return ae.color||M[u%M.length]}).filter(function(u,ae){return !ac[ae].disabled&&ac[ae].yAxis==1&&ac[ae].type=="line"})),B.width(T).height(s).interpolate("monotone").color(ac.map(function(ae,u){return ae.color||M[u%M.length]}).filter(function(u,ae){return !ac[ae].disabled&&ac[ae].yAxis==2&&ac[ae].type=="line"})),O.width(T).height(s).color(ac.map(function(ae,u){return ae.color||M[u%M.length]}).filter(function(u,ae){return !ac[ae].disabled&&ac[ae].yAxis==1&&ac[ae].type=="bar"})),U.width(T).height(s).color(ac.map(function(ae,u){return ae.color||M[u%M.length]}).filter(function(u,ae){return !ac[ae].disabled&&ac[ae].yAxis==2&&ac[ae].type=="bar"})),q.width(T).height(s).color(ac.map(function(ae,u){return ae.color||M[u%M.length]}).filter(function(u,ae){return !ac[ae].disabled&&ac[ae].yAxis==1&&ac[ae].type=="area"})),Y.width(T).height(s).color(ac.map(function(ae,u){return ae.color||M[u%M.length]}).filter(function(u,ae){return !ac[ae].disabled&&ac[ae].yAxis==2&&ac[ae].type=="area"})),v.attr("transform","translate("+G.left+","+G.top+")");var N=v.select(".lines1Wrap").datum(S),n=v.select(".bars1Wrap").datum(r),l=v.select(".stack1Wrap").datum(C),t=v.select(".lines2Wrap").datum(p),h=v.select(".bars2Wrap").datum(ad),g=v.select(".stack2Wrap").datum(o),i=C.length?C.map(function(u){return u.values}).reduce(function(ae,u){return ae.map(function(af,ag){return{x:af.x,y:af.y+u[ag].y}})}).concat([{x:0,y:0}]):[],m=o.length?o.map(function(u){return u.values}).reduce(function(ae,u){return ae.map(function(af,ag){return{x:af.x,y:af.y+u[ag].y}})}).concat([{x:0,y:0}]):[];R.domain(P||d3.extent(d3.merge(w).concat(i),function(u){return u.y})).range([0,s]),K.domain(X||d3.extent(d3.merge(E).concat(m),function(u){return u.y})).range([0,s]),W.yDomain(R.domain()),O.yDomain(R.domain()),q.yDomain(R.domain()),B.yDomain(K.domain()),U.yDomain(K.domain()),Y.yDomain(K.domain()),C.length&&d3.transition(l).call(q),o.length&&d3.transition(g).call(Y),r.length&&d3.transition(n).call(O),ad.length&&d3.transition(h).call(U),S.length&&d3.transition(N).call(W),p.length&&d3.transition(t).call(B),A.ticks(T/100).tickSize(-s,0),v.select(".x.axis").attr("transform","translate(0,"+s+")"),d3.transition(v.select(".x.axis")).call(A),F.ticks(s/36).tickSize(-T,0),d3.transition(v.select(".y1.axis")).call(F),j.ticks(s/36).tickSize(-T,0),d3.transition(v.select(".y2.axis")).call(j),v.select(".y2.axis").style("opacity",E.length?1:0).attr("transform","translate("+Z.range()[1]+",0)"),z.dispatch.on("stateChange",function(u){I.update()}),e.on("tooltipShow",function(u){L&&k(u,ab.parentNode)})}),I}var G={top:30,right:20,bottom:50,left:60},M=d3.scale.category20().range(),J=null,Q=null,H=!0,L=!0,D=function(l,g,m,h,f){return"<h3>"+l+"</h3><p>"+m+" at "+g+"</p>"},Z,V,P,X,Z=d3.scale.linear(),R=d3.scale.linear(),K=d3.scale.linear(),W=b.models.line().yScale(R),B=b.models.line().yScale(K),O=b.models.multiBar().stacked(!1).yScale(R),U=b.models.multiBar().stacked(!1).yScale(K),q=b.models.stackedArea().yScale(R),Y=b.models.stackedArea().yScale(K),A=b.models.axis().scale(Z).orient("bottom").tickPadding(5),F=b.models.axis().scale(R).orient("left"),j=b.models.axis().scale(K).orient("right"),z=b.models.legend().height(30),e=d3.dispatch("tooltipShow","tooltipHide"),k=function(h,u){var m=h.pos[0]+(u.offsetLeft||0),g=h.pos[1]+(u.offsetTop||0),l=A.tickFormat()(W.x()(h.point,h.pointIndex)),p=(h.series.yAxis==2?j:F).tickFormat()(W.y()(h.point,h.pointIndex)),f=D(h.series.key,l,p,h,I);b.tooltip.show([m,g],f,undefined,undefined,u.offsetParent)};return W.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+G.left,f.pos[1]+G.top],e.tooltipShow(f)}),W.dispatch.on("elementMouseout.tooltip",function(f){e.tooltipHide(f)}),B.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+G.left,f.pos[1]+G.top],e.tooltipShow(f)}),B.dispatch.on("elementMouseout.tooltip",function(f){e.tooltipHide(f)}),O.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+G.left,f.pos[1]+G.top],e.tooltipShow(f)}),O.dispatch.on("elementMouseout.tooltip",function(f){e.tooltipHide(f)}),U.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+G.left,f.pos[1]+G.top],e.tooltipShow(f)}),U.dispatch.on("elementMouseout.tooltip",function(f){e.tooltipHide(f)}),q.dispatch.on("tooltipShow",function(f){if(!Math.round(q.y()(f.point)*100)){return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1}f.pos=[f.pos[0]+G.left,f.pos[1]+G.top],e.tooltipShow(f)}),q.dispatch.on("tooltipHide",function(f){e.tooltipHide(f)}),Y.dispatch.on("tooltipShow",function(f){if(!Math.round(Y.y()(f.point)*100)){return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1}f.pos=[f.pos[0]+G.left,f.pos[1]+G.top],e.tooltipShow(f)}),Y.dispatch.on("tooltipHide",function(f){e.tooltipHide(f)}),W.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+G.left,f.pos[1]+G.top],e.tooltipShow(f)}),W.dispatch.on("elementMouseout.tooltip",function(f){e.tooltipHide(f)}),B.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+G.left,f.pos[1]+G.top],e.tooltipShow(f)}),B.dispatch.on("elementMouseout.tooltip",function(f){e.tooltipHide(f)}),e.on("tooltipHide",function(){L&&b.tooltip.cleanup()}),I.dispatch=e,I.lines1=W,I.lines2=B,I.bars1=O,I.bars2=U,I.stack1=q,I.stack2=Y,I.xAxis=A,I.yAxis1=F,I.yAxis2=j,I.options=b.utils.optionsFunc.bind(I),I.x=function(f){return arguments.length?(getX=f,W.x(f),O.x(f),I):getX},I.y=function(f){return arguments.length?(getY=f,W.y(f),O.y(f),I):getY},I.yDomain1=function(f){return arguments.length?(P=f,I):P},I.yDomain2=function(f){return arguments.length?(X=f,I):X},I.margin=function(f){return arguments.length?(G=f,I):G},I.width=function(f){return arguments.length?(J=f,I):J},I.height=function(f){return arguments.length?(Q=f,I):Q},I.color=function(f){return arguments.length?(M=f,z.color(f),I):M},I.showLegend=function(f){return arguments.length?(H=f,I):H},I.tooltips=function(f){return arguments.length?(L=f,I):L},I.tooltipContent=function(f){return arguments.length?(D=f,I):D},I},b.models.ohlcBar=function(){function k(f){return f.each(function(r){var n=I-C.left-C.right,u=F-C.top-C.bottom,l=d3.select(this);D.domain(j||d3.extent(r[0].values.map(A).concat(G))),z?D.range(q||[n*0.5/r[0].values.length,n*(r[0].values.length-0.5)/r[0].values.length]):D.range(q||[0,n]),H.domain(R||[d3.min(r[0].values.map(M).concat(P)),d3.max(r[0].values.map(Q).concat(P))]).range(B||[u,0]),D.domain()[0]===D.domain()[1]&&(D.domain()[0]?D.domain([D.domain()[0]-D.domain()[0]*0.01,D.domain()[1]+D.domain()[1]*0.01]):D.domain([-1,1])),H.domain()[0]===H.domain()[1]&&(H.domain()[0]?H.domain([H.domain()[0]+H.domain()[0]*0.01,H.domain()[1]-H.domain()[1]*0.01]):H.domain([-1,1]));var p=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([r[0].values]),h=p.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),m=h.append("defs"),t=h.append("g"),i=p.select("g");t.append("g").attr("class","nv-ticks"),p.attr("transform","translate("+C.left+","+C.top+")"),l.on("click",function(v,g){e.chartClick({data:v,index:g,pos:d3.event,id:L})}),m.append("clipPath").attr("id","nv-chart-clip-path-"+L).append("rect"),p.select("#nv-chart-clip-path-"+L+" rect").attr("width",n).attr("height",u),i.attr("clip-path",J?"url(#nv-chart-clip-path-"+L+")":"");var o=p.select(".nv-ticks").selectAll(".nv-tick").data(function(g){return g});o.exit().remove();var s=o.enter().append("path").attr("class",function(v,g,w){return(O(v,g)>K(v,g)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+w+"-"+g}).attr("d",function(g,w){var v=n/r[0].values.length*0.9;return"m0,0l0,"+(H(O(g,w))-H(Q(g,w)))+"l"+-v/2+",0l"+v/2+",0l0,"+(H(M(g,w))-H(O(g,w)))+"l0,"+(H(K(g,w))-H(M(g,w)))+"l"+v/2+",0l"+-v/2+",0z"}).attr("transform",function(v,g){return"translate("+D(A(v,g))+","+H(Q(v,g))+")"}).on("mouseover",function(g,v){d3.select(this).classed("hover",!0),e.elementMouseover({point:g,series:r[0],pos:[D(A(g,v)),H(T(g,v))],pointIndex:v,seriesIndex:0,e:d3.event})}).on("mouseout",function(g,v){d3.select(this).classed("hover",!1),e.elementMouseout({point:g,series:r[0],pointIndex:v,seriesIndex:0,e:d3.event})}).on("click",function(v,g){e.elementClick({value:T(v,g),data:v,index:g,pos:[D(A(v,g)),H(T(v,g))],e:d3.event,id:L}),d3.event.stopPropagation()}).on("dblclick",function(v,g){e.elementDblClick({value:T(v,g),data:v,index:g,pos:[D(A(v,g)),H(T(v,g))],e:d3.event,id:L}),d3.event.stopPropagation()});o.attr("class",function(v,g,w){return(O(v,g)>K(v,g)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+w+"-"+g}),d3.transition(o).attr("transform",function(v,g){return"translate("+D(A(v,g))+","+H(Q(v,g))+")"}).attr("d",function(g,w){var v=n/r[0].values.length*0.9;return"m0,0l0,"+(H(O(g,w))-H(Q(g,w)))+"l"+-v/2+",0l"+v/2+",0l0,"+(H(M(g,w))-H(O(g,w)))+"l0,"+(H(K(g,w))-H(M(g,w)))+"l"+v/2+",0l"+-v/2+",0z"})}),k}var C={top:0,right:0,bottom:0,left:0},I=960,F=500,L=Math.floor(Math.random()*10000),D=d3.scale.linear(),H=d3.scale.linear(),A=function(f){return f.x},T=function(f){return f.y},O=function(f){return f.open},K=function(f){return f.close},Q=function(f){return f.high},M=function(f){return f.low},G=[],P=[],z=!1,J=!0,N=b.utils.defaultColor(),j,R,q,B,e=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return k.dispatch=e,k.options=b.utils.optionsFunc.bind(k),k.x=function(f){return arguments.length?(A=f,k):A},k.y=function(f){return arguments.length?(T=f,k):T},k.open=function(f){return arguments.length?(O=f,k):O},k.close=function(f){return arguments.length?(K=f,k):K},k.high=function(f){return arguments.length?(Q=f,k):Q},k.low=function(f){return arguments.length?(M=f,k):M},k.margin=function(f){return arguments.length?(C.top=typeof f.top!="undefined"?f.top:C.top,C.right=typeof f.right!="undefined"?f.right:C.right,C.bottom=typeof f.bottom!="undefined"?f.bottom:C.bottom,C.left=typeof f.left!="undefined"?f.left:C.left,k):C},k.width=function(f){return arguments.length?(I=f,k):I},k.height=function(f){return arguments.length?(F=f,k):F},k.xScale=function(f){return arguments.length?(D=f,k):D},k.yScale=function(f){return arguments.length?(H=f,k):H},k.xDomain=function(f){return arguments.length?(j=f,k):j},k.yDomain=function(f){return arguments.length?(R=f,k):R},k.xRange=function(f){return arguments.length?(q=f,k):q},k.yRange=function(f){return arguments.length?(B=f,k):B},k.forceX=function(f){return arguments.length?(G=f,k):G},k.forceY=function(f){return arguments.length?(P=f,k):P},k.padData=function(f){return arguments.length?(z=f,k):z},k.clipEdge=function(f){return arguments.length?(J=f,k):J},k.color=function(f){return arguments.length?(N=b.utils.getColor(f),k):N},k.id=function(f){return arguments.length?(L=f,k):L},k},b.models.pie=function(){function e(f){return f.each(function(ab){function V(R){var o=(R.startAngle+R.endAngle)*90/Math.PI-90;return o>90?o-180:o}function l(R){R.endAngle=isNaN(R.endAngle)?0:R.endAngle,R.startAngle=isNaN(R.startAngle)?0:R.startAngle,H||(R.innerRadius=0);var o=d3.interpolate(this._current,R);return this._current=o(0),function(S){return W(o(S))}}function g(R){R.innerRadius=0;var o=d3.interpolate({startAngle:0,endAngle:0},R);return function(S){return W(o(S))}}var X=G-A.left-A.right,aa=C-A.top-A.bottom,i=Math.min(X,aa)/2,u=i-i/5,h=d3.select(this),p=h.selectAll(".nv-wrap.nv-pie").data(ab),E=p.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+x),Y=E.append("g"),s=p.select("g");Y.append("g").attr("class","nv-pie"),Y.append("g").attr("class","nv-pieLabels"),p.attr("transform","translate("+A.left+","+A.top+")"),s.select(".nv-pie").attr("transform","translate("+X/2+","+aa/2+")"),s.select(".nv-pieLabels").attr("transform","translate("+X/2+","+aa/2+")"),h.on("click",function(R,o){z.chartClick({data:R,index:o,pos:d3.event,id:x})});var W=d3.svg.arc().outerRadius(u);j&&W.startAngle(j),O&&W.endAngle(O),H&&W.innerRadius(i*k);var n=d3.layout.pie().sort(null).value(function(o){return o.disabled?0:B(o)}),r=p.select(".nv-pie").selectAll(".nv-slice").data(n),ac=p.select(".nv-pieLabels").selectAll(".nv-label").data(n);r.exit().remove(),ac.exit().remove();var y=r.enter().append("g").attr("class","nv-slice").on("mouseover",function(R,o){d3.select(this).classed("hover",!0),z.elementMouseover({label:J(R.data),value:B(R.data),point:R.data,pointIndex:o,pos:[d3.event.pageX,d3.event.pageY],id:x})}).on("mouseout",function(R,o){d3.select(this).classed("hover",!1),z.elementMouseout({label:J(R.data),value:B(R.data),point:R.data,index:o,id:x})}).on("click",function(R,o){z.elementClick({label:J(R.data),value:B(R.data),point:R.data,index:o,pos:d3.event,id:x}),d3.event.stopPropagation()}).on("dblclick",function(R,o){z.elementDblClick({label:J(R.data),value:B(R.data),point:R.data,index:o,pos:d3.event,id:x}),d3.event.stopPropagation()});r.attr("fill",function(R,o){return P(R,o)}).attr("stroke",function(R,o){return P(R,o)});var m=y.append("path").each(function(o){this._current=o});r.select("path").transition().attr("d",W).attrTween("d",l);if(I){var v=d3.svg.arc().innerRadius(0);N&&(v=W),K&&(v=d3.svg.arc().outerRadius(W.outerRadius())),ac.enter().append("g").classed("nv-label",!0).each(function(R,o){var S=d3.select(this);S.attr("transform",function(U){if(L){U.outerRadius=u+10,U.innerRadius=u+15;var T=(U.startAngle+U.endAngle)/2*(180/Math.PI);return(U.startAngle+U.endAngle)/2<Math.PI?T-=90:T+=90,"translate("+v.centroid(U)+") rotate("+T+")"}return U.outerRadius=i+10,U.innerRadius=i+15,"translate("+v.centroid(U)+")"}),S.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),S.append("text").style("text-anchor",L?(R.startAngle+R.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var Q={},Z=14,w=140,t=function(o){return Math.floor(o[0]/w)*w+","+Math.floor(o[1]/Z)*Z};ac.transition().attr("transform",function(S){if(L){S.outerRadius=u+10,S.innerRadius=u+15;var o=(S.startAngle+S.endAngle)/2*(180/Math.PI);return(S.startAngle+S.endAngle)/2<Math.PI?o-=90:o+=90,"translate("+v.centroid(S)+") rotate("+o+")"}S.outerRadius=i+10,S.innerRadius=i+15;var T=v.centroid(S),R=t(T);return Q[R]&&(T[1]-=Z),Q[t(T)]=!0,"translate("+T+")"}),ac.select(".nv-label text").style("text-anchor",L?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(S,o){var T=(S.endAngle-S.startAngle)/(2*Math.PI),R={key:J(S.data),value:B(S.data),percent:d3.format("%")(T)};return S.value&&T>q?R[D]:""})}}),e}var A={top:0,right:0,bottom:0,left:0},G=500,C=500,J=function(f){return f.x},B=function(f){return f.y},F=function(f){return f.description},x=Math.floor(Math.random()*10000),P=b.utils.defaultColor(),M=d3.format(",.2f"),I=!0,N=!0,K=!1,D="key",q=0.02,H=!1,L=!1,j=!1,O=!1,k=0.5,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return e.dispatch=z,e.options=b.utils.optionsFunc.bind(e),e.margin=function(f){return arguments.length?(A.top=typeof f.top!="undefined"?f.top:A.top,A.right=typeof f.right!="undefined"?f.right:A.right,A.bottom=typeof f.bottom!="undefined"?f.bottom:A.bottom,A.left=typeof f.left!="undefined"?f.left:A.left,e):A},e.width=function(f){return arguments.length?(G=f,e):G},e.height=function(f){return arguments.length?(C=f,e):C},e.values=function(f){return b.log("pie.values() is no longer supported."),e},e.x=function(f){return arguments.length?(J=f,e):J},e.y=function(f){return arguments.length?(B=d3.functor(f),e):B},e.description=function(f){return arguments.length?(F=f,e):F},e.showLabels=function(f){return arguments.length?(I=f,e):I},e.labelSunbeamLayout=function(f){return arguments.length?(L=f,e):L},e.donutLabelsOutside=function(f){return arguments.length?(K=f,e):K},e.pieLabelsOutside=function(f){return arguments.length?(N=f,e):N},e.labelType=function(f){return arguments.length?(D=f,D=D||"key",e):D},e.donut=function(f){return arguments.length?(H=f,e):H},e.donutRatio=function(f){return arguments.length?(k=f,e):k},e.startAngle=function(f){return arguments.length?(j=f,e):j},e.endAngle=function(f){return arguments.length?(O=f,e):O},e.id=function(f){return arguments.length?(x=f,e):x},e.color=function(f){return arguments.length?(P=b.utils.getColor(f),e):P},e.valueFormat=function(f){return arguments.length?(M=f,e):M},e.labelThreshold=function(f){return arguments.length?(q=f,e):q},e},b.models.pieChart=function(){function B(f){return f.each(function(n){var v=d3.select(this),s=this,l=(q||parseInt(v.style("width"))||960)-e.left-e.right,o=(E||parseInt(v.style("height"))||400)-e.top-e.bottom;B.update=function(){v.transition().call(B)},B.container=this,m.disabled=n.map(function(u){return !!u.disabled});if(!z){var h;z={};for(h in m){m[h] instanceof Array?z[h]=m[h].slice(0):z[h]=m[h]}}if(!n||!n.length){var i=v.selectAll(".nv-noData").data([w]);return i.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),i.attr("x",e.left+l/2).attr("y",e.top+o/2).text(function(u){return u}),B}v.selectAll(".nv-noData").remove();var r=v.selectAll("g.nv-wrap.nv-pieChart").data([n]),p=r.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),t=r.select("g");p.append("g").attr("class","nv-pieWrap"),p.append("g").attr("class","nv-legendWrap"),j&&(k.width(l).key(D.x()),r.select(".nv-legendWrap").datum(n).call(k),e.top!=k.height()&&(e.top=k.height(),o=(E||parseInt(v.style("height"))||400)-e.top-e.bottom),r.select(".nv-legendWrap").attr("transform","translate(0,"+-e.top+")")),r.attr("transform","translate("+e.left+","+e.top+")"),D.width(l).height(o);var F=t.select(".nv-pieWrap").datum([n]);d3.transition(F).call(D),k.dispatch.on("stateChange",function(u){m=u,g.stateChange(m),B.update()}),D.dispatch.on("elementMouseout.tooltip",function(u){g.tooltipHide(u)}),g.on("changeState",function(u){typeof u.disabled!="undefined"&&(n.forEach(function(G,H){G.disabled=u.disabled[H]}),m.disabled=u.disabled),B.update()})}),B}var D=b.models.pie(),k=b.models.legend(),e={top:30,right:20,bottom:20,left:20},q=null,E=null,j=!0,C=b.utils.defaultColor(),A=!0,x=function(i,f,l,h){return"<h3>"+i+"</h3><p>"+f+"</p>"},m={},z=null,w="No Data Available.",g=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),y=function(F,t){var l=D.description()(F.point)||D.x()(F.point),p=F.pos[0]+(t&&t.offsetLeft||0),v=F.pos[1]+(t&&t.offsetTop||0),h=D.valueFormat()(D.y()(F.point)),f=x(l,h,F,B);b.tooltip.show([p,v],f,F.value<0?"n":"s",null,t)};return D.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+e.left,f.pos[1]+e.top],g.tooltipShow(f)}),g.on("tooltipShow",function(f){A&&y(f)}),g.on("tooltipHide",function(){A&&b.tooltip.cleanup()}),B.legend=k,B.dispatch=g,B.pie=D,d3.rebind(B,D,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),B.options=b.utils.optionsFunc.bind(B),B.margin=function(f){return arguments.length?(e.top=typeof f.top!="undefined"?f.top:e.top,e.right=typeof f.right!="undefined"?f.right:e.right,e.bottom=typeof f.bottom!="undefined"?f.bottom:e.bottom,e.left=typeof f.left!="undefined"?f.left:e.left,B):e},B.width=function(f){return arguments.length?(q=f,B):q},B.height=function(f){return arguments.length?(E=f,B):E},B.color=function(f){return arguments.length?(C=b.utils.getColor(f),k.color(C),D.color(C),B):C},B.showLegend=function(f){return arguments.length?(j=f,B):j},B.tooltips=function(f){return arguments.length?(A=f,B):A},B.tooltipContent=function(f){return arguments.length?(x=f,B):x},B.state=function(f){return arguments.length?(m=f,B):m},B.defaultState=function(f){return arguments.length?(z=f,B):z},B.noData=function(f){return arguments.length?(w=f,B):w},B},b.models.scatter=function(){function R(f){return f.each(function(s){function o(){if(!at){return !1}var B,x=d3.merge(s.map(function(E,v){return E.values.map(function(I,L){var H=au(I,L),F=an(I,L);return[ak(H)+Math.random()*1e-7,af(F)+Math.random()*1e-7,v,L,I]}).filter(function(H,F){return ax(H[4],F)})}));if(X===!0){if(ac){var u=i.select("defs").selectAll(".nv-point-clips").data([ah]).enter();u.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+ah);var D=i.select("#nv-points-clip-"+ah).selectAll("circle").data(x);D.enter().append("circle").attr("r",e),D.exit().remove(),D.attr("cx",function(v){return v[0]}).attr("cy",function(v){return v[1]}),i.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+ah+")")}x.length&&(x.push([ak.range()[0]-20,af.range()[0]-20,null,null]),x.push([ak.range()[1]+20,af.range()[1]+20,null,null]),x.push([ak.range()[0]-20,af.range()[0]+20,null,null]),x.push([ak.range()[1]+20,af.range()[1]-20,null,null]));var y=d3.geom.polygon([[-10,-10],[-10,ai+10],[al+10,ai+10],[al+10,-10]]),A=d3.geom.voronoi(x).map(function(E,v){return{data:y.clip(E),series:x[v][2],point:x[v][3]}}),C=i.select(".nv-point-paths").selectAll("path").data(A);C.enter().append("path").attr("class",function(E,v){return"nv-path-"+v}),C.exit().remove(),C.attr("d",function(v){return v.data.length===0?"M 0 0":"M"+v.data.join("L")+"Z"});var w=function(F,H){if(V){return 0}var E=s[F.series];if(typeof E=="undefined"){return}var v=E.values[F.point];H({point:v,series:E,pos:[ak(au(v,F.point))+ag.left,af(an(v,F.point))+ag.top],seriesIndex:F.series,pointIndex:F.point})};C.on("click",function(v){w(v,az.elementClick)}).on("mouseover",function(v){w(v,az.elementMouseover)}).on("mouseout",function(E,v){w(E,az.elementMouseout)})}else{i.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(F,H){if(V||!s[F.series]){return 0}var E=s[F.series],v=E.values[H];az.elementClick({point:v,series:E,pos:[ak(au(v,H))+ag.left,af(an(v,H))+ag.top],seriesIndex:F.series,pointIndex:H})}).on("mouseover",function(F,H){if(V||!s[F.series]){return 0}var E=s[F.series],v=E.values[H];az.elementMouseover({point:v,series:E,pos:[ak(au(v,H))+ag.left,af(an(v,H))+ag.top],seriesIndex:F.series,pointIndex:H})}).on("mouseout",function(F,v){if(V||!s[F.series]){return 0}var H=s[F.series],E=H.values[v];az.elementMouseout({point:E,series:H,seriesIndex:F.series,pointIndex:v})})}V=!1}var g=al-ag.left-ag.right,n=ai-ag.top-ag.bottom,l=d3.select(this);s.forEach(function(v,u){v.values.forEach(function(w){w.series=u})});var j=J&&Y&&aa?[]:d3.merge(s.map(function(u){return u.values.map(function(w,v){return{x:au(w,v),y:an(w,v),size:aw(w,v)}})}));ak.domain(J||d3.extent(j.map(function(u){return u.x}).concat(av))),ad&&s[0]?ak.range(ao||[(g*W+g)/(2*s[0].values.length),g-g*(1+W)/(2*s[0].values.length)]):ak.range(ao||[0,g]),af.domain(Y||d3.extent(j.map(function(u){return u.y}).concat(ae))).range(Q||[n,0]),ay.domain(aa||d3.extent(j.map(function(u){return u.size}).concat(am))).range(G||[16,256]);if(ak.domain()[0]===ak.domain()[1]||af.domain()[0]===af.domain()[1]){K=!0}ak.domain()[0]===ak.domain()[1]&&(ak.domain()[0]?ak.domain([ak.domain()[0]-ak.domain()[0]*0.01,ak.domain()[1]+ak.domain()[1]*0.01]):ak.domain([-1,1])),af.domain()[0]===af.domain()[1]&&(af.domain()[0]?af.domain([af.domain()[0]-af.domain()[0]*0.01,af.domain()[1]+af.domain()[1]*0.01]):af.domain([-1,1])),isNaN(ak.domain()[0])&&ak.domain([-1,1]),isNaN(af.domain()[0])&&af.domain([-1,1]),z=z||ak,U=U||af,Z=Z||ay;var i=l.selectAll("g.nv-wrap.nv-scatter").data([s]),k=i.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+ah+(K?" nv-single-point":"")),m=k.append("defs"),r=k.append("g"),p=i.select("g");r.append("g").attr("class","nv-groups"),r.append("g").attr("class","nv-point-paths"),i.attr("transform","translate("+ag.left+","+ag.top+")"),m.append("clipPath").attr("id","nv-edge-clip-"+ah).append("rect"),i.select("#nv-edge-clip-"+ah+" rect").attr("width",g).attr("height",n>0?n:0),p.attr("clip-path",q?"url(#nv-edge-clip-"+ah+")":""),V=!0;var t=i.select(".nv-groups").selectAll(".nv-group").data(function(u){return u},function(u){return u.key});t.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001),t.exit().remove(),t.attr("class",function(v,u){return"nv-group nv-series-"+u}).classed("hover",function(u){return u.hover}),t.transition().style("fill",function(v,u){return aq(v,u)}).style("stroke",function(v,u){return aq(v,u)}).style("stroke-opacity",1).style("fill-opacity",0.5);if(aj){var h=t.selectAll("circle.nv-point").data(function(u){return u.values},ab);h.enter().append("circle").style("fill",function(v,u){return v.color}).style("stroke",function(v,u){return v.color}).attr("cx",function(u,v){return b.utils.NaNtoZero(z(au(u,v)))}).attr("cy",function(u,v){return b.utils.NaNtoZero(U(an(u,v)))}).attr("r",function(v,u){return Math.sqrt(ay(aw(v,u))/Math.PI)}),h.exit().remove(),t.exit().selectAll("path.nv-point").transition().attr("cx",function(u,v){return b.utils.NaNtoZero(ak(au(u,v)))}).attr("cy",function(u,v){return b.utils.NaNtoZero(af(an(u,v)))}).remove(),h.each(function(v,u){d3.select(this).classed("nv-point",!0).classed("nv-point-"+u,!0).classed("hover",!1)}),h.transition().attr("cx",function(u,v){return b.utils.NaNtoZero(ak(au(u,v)))}).attr("cy",function(u,v){return b.utils.NaNtoZero(af(an(u,v)))}).attr("r",function(v,u){return Math.sqrt(ay(aw(v,u))/Math.PI)})}else{var h=t.selectAll("path.nv-point").data(function(u){return u.values});h.enter().append("path").style("fill",function(v,u){return v.color}).style("stroke",function(v,u){return v.color}).attr("transform",function(v,u){return"translate("+z(au(v,u))+","+U(an(v,u))+")"}).attr("d",d3.svg.symbol().type(ar).size(function(v,u){return ay(aw(v,u))})),h.exit().remove(),t.exit().selectAll("path.nv-point").transition().attr("transform",function(v,u){return"translate("+ak(au(v,u))+","+af(an(v,u))+")"}).remove(),h.each(function(v,u){d3.select(this).classed("nv-point",!0).classed("nv-point-"+u,!0).classed("hover",!1)}),h.transition().attr("transform",function(v,u){return"translate("+ak(au(v,u))+","+af(an(v,u))+")"}).attr("d",d3.svg.symbol().type(ar).size(function(v,u){return ay(aw(v,u))}))}clearTimeout(ap),ap=setTimeout(o,300),z=ak.copy(),U=af.copy(),Z=ay.copy()}),R}var ag={top:0,right:0,bottom:0,left:0},al=960,ai=500,aq=b.utils.defaultColor(),ah=Math.floor(Math.random()*100000),ak=d3.scale.linear(),af=d3.scale.linear(),ay=d3.scale.linear(),au=function(f){return f.x},an=function(f){return f.y},aw=function(f){return f.size||1},ar=function(f){return f.shape||"circle"},aj=!0,av=[],ae=[],am=[],at=!0,ab=null,ax=function(f){return !f.notActive},ad=!1,W=0.1,q=!1,ac=!0,e=function(){return 25},J=null,Y=null,ao=null,Q=null,aa=null,G=null,K=!1,az=d3.dispatch("elementClick","elementMouseover","elementMouseout"),X=!0,z,U,Z,ap,V=!1;return R.clearHighlights=function(){d3.selectAll(".nv-chart-"+ah+" .nv-point.hover").classed("hover",!1)},R.highlightPoint=function(g,f,h){d3.select(".nv-chart-"+ah+" .nv-series-"+g+" .nv-point-"+f).classed("hover",h)},az.on("elementMouseover.point",function(f){at&&R.highlightPoint(f.seriesIndex,f.pointIndex,!0)}),az.on("elementMouseout.point",function(f){at&&R.highlightPoint(f.seriesIndex,f.pointIndex,!1)}),R.dispatch=az,R.options=b.utils.optionsFunc.bind(R),R.x=function(f){return arguments.length?(au=d3.functor(f),R):au},R.y=function(f){return arguments.length?(an=d3.functor(f),R):an},R.size=function(f){return arguments.length?(aw=d3.functor(f),R):aw},R.margin=function(f){return arguments.length?(ag.top=typeof f.top!="undefined"?f.top:ag.top,ag.right=typeof f.right!="undefined"?f.right:ag.right,ag.bottom=typeof f.bottom!="undefined"?f.bottom:ag.bottom,ag.left=typeof f.left!="undefined"?f.left:ag.left,R):ag},R.width=function(f){return arguments.length?(al=f,R):al},R.height=function(f){return arguments.length?(ai=f,R):ai},R.xScale=function(f){return arguments.length?(ak=f,R):ak},R.yScale=function(f){return arguments.length?(af=f,R):af},R.zScale=function(f){return arguments.length?(ay=f,R):ay},R.xDomain=function(f){return arguments.length?(J=f,R):J},R.yDomain=function(f){return arguments.length?(Y=f,R):Y},R.sizeDomain=function(f){return arguments.length?(aa=f,R):aa},R.xRange=function(f){return arguments.length?(ao=f,R):ao},R.yRange=function(f){return arguments.length?(Q=f,R):Q},R.sizeRange=function(f){return arguments.length?(G=f,R):G},R.forceX=function(f){return arguments.length?(av=f,R):av},R.forceY=function(f){return arguments.length?(ae=f,R):ae},R.forceSize=function(f){return arguments.length?(am=f,R):am},R.interactive=function(f){return arguments.length?(at=f,R):at},R.pointKey=function(f){return arguments.length?(ab=f,R):ab},R.pointActive=function(f){return arguments.length?(ax=f,R):ax},R.padData=function(f){return arguments.length?(ad=f,R):ad},R.padDataOuter=function(f){return arguments.length?(W=f,R):W},R.clipEdge=function(f){return arguments.length?(q=f,R):q},R.clipVoronoi=function(f){return arguments.length?(ac=f,R):ac},R.useVoronoi=function(f){return arguments.length?(X=f,X===!1&&(ac=!1),R):X},R.clipRadius=function(f){return arguments.length?(e=f,R):e},R.color=function(f){return arguments.length?(aq=b.utils.getColor(f),R):aq},R.shape=function(f){return arguments.length?(ar=f,R):ar},R.onlyCircles=function(f){return arguments.length?(aj=f,R):aj},R.id=function(f){return arguments.length?(ah=f,R):ah},R.singlePoint=function(f){return arguments.length?(K=f,R):K},R},b.models.scatterChart=function(){function R(f){return f.each(function(r){function u(){if(e){return i.select(".nv-point-paths").style("pointer-events","all"),!1}i.select(".nv-point-paths").style("pointer-events","none");var k=d3.mouse(this);ap.distortion(aa).focus(k[0]),ah.distortion(aa).focus(k[1]),i.select(".nv-scatterWrap").call(ae),av&&i.select(".nv-x.nv-axis").call(aj),ab&&i.select(".nv-y.nv-axis").call(ag),i.select(".nv-distributionX").datum(r.filter(function(x){return !x.disabled})).call(ai),i.select(".nv-distributionY").datum(r.filter(function(x){return !x.disabled})).call(ad)}var g=d3.select(this),n=this,t=(ar||parseInt(g.style("width"))||960)-aw.left-aw.right,w=(al||parseInt(g.style("height"))||400)-aw.top-aw.bottom;R.update=function(){g.transition().duration(V).call(R)},R.container=this,Y.disabled=r.map(function(k){return !!k.disabled});if(!G){var h;G={};for(h in Y){Y[h] instanceof Array?G[h]=Y[h].slice(0):G[h]=Y[h]}}if(!r||!r.length||!r.filter(function(k){return k.values.length}).length){var p=g.selectAll(".nv-noData").data([ax]);return p.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),p.attr("x",aw.left+t/2).attr("y",aw.top+w/2).text(function(k){return k}),R}g.selectAll(".nv-noData").remove(),z=z||ap,Q=Q||ah;var m=g.selectAll("g.nv-wrap.nv-scatterChart").data([r]),s=m.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+ae.id()),j=s.append("g"),i=m.select("g");j.append("rect").attr("class","nvd3 nv-background"),j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-scatterWrap"),j.append("g").attr("class","nv-distWrap"),j.append("g").attr("class","nv-legendWrap"),j.append("g").attr("class","nv-controlsWrap");if(Z){var l=q?t/2:t;ao.width(l),m.select(".nv-legendWrap").datum(r).call(ao),aw.top!=ao.height()&&(aw.top=ao.height(),w=(al||parseInt(g.style("height"))||400)-aw.top-aw.bottom),m.select(".nv-legendWrap").attr("transform","translate("+(t-l)+","+-aw.top+")")}q&&(af.width(180).color(["#444"]),i.select(".nv-controlsWrap").datum(an).attr("transform","translate(0,"+-aw.top+")").call(af)),m.attr("transform","translate("+aw.left+","+aw.top+")"),U&&i.select(".nv-y.nv-axis").attr("transform","translate("+t+",0)"),ae.width(t).height(w).color(r.map(function(x,k){return x.color||au(x,k)}).filter(function(k,x){return !r[x].disabled})),at!==0&&ae.xDomain(null),ac!==0&&ae.yDomain(null),m.select(".nv-scatterWrap").datum(r.filter(function(k){return !k.disabled})).call(ae);if(at!==0){var o=ap.domain()[1]-ap.domain()[0];ae.xDomain([ap.domain()[0]-at*o,ap.domain()[1]+at*o])}if(ac!==0){var v=ah.domain()[1]-ah.domain()[0];ae.yDomain([ah.domain()[0]-ac*v,ah.domain()[1]+ac*v])}(ac!==0||at!==0)&&m.select(".nv-scatterWrap").datum(r.filter(function(k){return !k.disabled})).call(ae),av&&(aj.scale(ap).ticks(aj.ticks()&&aj.ticks().length?aj.ticks():t/100).tickSize(-w,0),i.select(".nv-x.nv-axis").attr("transform","translate(0,"+ah.range()[0]+")").call(aj)),ab&&(ag.scale(ah).ticks(ag.ticks()&&ag.ticks().length?ag.ticks():w/36).tickSize(-t,0),i.select(".nv-y.nv-axis").call(ag)),ak&&(ai.getData(ae.x()).scale(ap).width(t).color(r.map(function(x,k){return x.color||au(x,k)}).filter(function(k,x){return !r[x].disabled})),j.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),i.select(".nv-distributionX").attr("transform","translate(0,"+ah.range()[0]+")").datum(r.filter(function(k){return !k.disabled})).call(ai)),aq&&(ad.getData(ae.y()).scale(ah).width(w).color(r.map(function(x,k){return x.color||au(x,k)}).filter(function(k,x){return !r[x].disabled})),j.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),i.select(".nv-distributionY").attr("transform","translate("+(U?t:-ad.size())+",0)").datum(r.filter(function(k){return !k.disabled})).call(ad)),d3.fisheye&&(i.select(".nv-background").attr("width",t).attr("height",w),i.select(".nv-background").on("mousemove",u),i.select(".nv-background").on("click",function(){e=!e}),ae.dispatch.on("elementClick.freezeFisheye",function(){e=!e})),af.dispatch.on("legendClick",function(x,k){x.disabled=!x.disabled,aa=x.disabled?0:2.5,i.select(".nv-background").style("pointer-events",x.disabled?"none":"all"),i.select(".nv-point-paths").style("pointer-events",x.disabled?"all":"none"),x.disabled?(ap.distortion(aa).focus(0),ah.distortion(aa).focus(0),i.select(".nv-scatterWrap").call(ae),i.select(".nv-x.nv-axis").call(aj),i.select(".nv-y.nv-axis").call(ag)):e=!1,R.update()}),ao.dispatch.on("stateChange",function(k){Y.disabled=k.disabled,J.stateChange(Y),R.update()}),ae.dispatch.on("elementMouseover.tooltip",function(k){d3.select(".nv-chart-"+ae.id()+" .nv-series-"+k.seriesIndex+" .nv-distx-"+k.pointIndex).attr("y1",function(x,y){return k.pos[1]-w}),d3.select(".nv-chart-"+ae.id()+" .nv-series-"+k.seriesIndex+" .nv-disty-"+k.pointIndex).attr("x2",k.pos[0]+ai.size()),k.pos=[k.pos[0]+aw.left,k.pos[1]+aw.top],J.tooltipShow(k)}),J.on("tooltipShow",function(k){I&&X(k,n.parentNode)}),J.on("changeState",function(k){typeof k.disabled!="undefined"&&(r.forEach(function(x,y){x.disabled=k.disabled[y]}),Y.disabled=k.disabled),R.update()}),z=ap.copy(),Q=ah.copy()}),R}var ae=b.models.scatter(),aj=b.models.axis(),ag=b.models.axis(),ao=b.models.legend(),af=b.models.legend(),ai=b.models.distribution(),ad=b.models.distribution(),aw={top:30,right:20,bottom:50,left:75},ar=null,al=null,au=b.utils.defaultColor(),ap=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):ae.xScale(),ah=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):ae.yScale(),at=0,ac=0,ak=!1,aq=!1,Z=!0,av=!0,ab=!0,U=!1,q=!!d3.fisheye,aa=0,e=!1,I=!0,W=function(g,f,h){return"<strong>"+f+"</strong>"},am=function(g,f,h){return"<strong>"+h+"</strong>"},K=null,Y={},G=null,J=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),ax="No Data Available.",V=250;ae.xScale(ap).yScale(ah),aj.orient("bottom").tickPadding(10),ag.orient(U?"right":"left").tickPadding(10),ai.axis("x"),ad.axis("y"),af.updateState(!1);var z,Q,X=function(k,x){var g=k.pos[0]+(x.offsetLeft||0),w=k.pos[1]+(x.offsetTop||0),n=k.pos[0]+(x.offsetLeft||0),j=ah.range()[0]+aw.top+(x.offsetTop||0),r=ap.range()[0]+aw.left+(x.offsetLeft||0),p=k.pos[1]+(x.offsetTop||0),t=aj.tickFormat()(ae.x()(k.point,k.pointIndex)),h=ag.tickFormat()(ae.y()(k.point,k.pointIndex));W!=null&&b.tooltip.show([n,j],W(k.series.key,t,h,k,R),"n",1,x,"x-nvtooltip"),am!=null&&b.tooltip.show([r,p],am(k.series.key,t,h,k,R),"e",1,x,"y-nvtooltip"),K!=null&&b.tooltip.show([g,w],K(k.series.key,t,h,k,R),k.value<0?"n":"s",null,x)},an=[{key:"Magnify",disabled:!0}];return ae.dispatch.on("elementMouseout.tooltip",function(f){J.tooltipHide(f),d3.select(".nv-chart-"+ae.id()+" .nv-series-"+f.seriesIndex+" .nv-distx-"+f.pointIndex).attr("y1",0),d3.select(".nv-chart-"+ae.id()+" .nv-series-"+f.seriesIndex+" .nv-disty-"+f.pointIndex).attr("x2",ad.size())}),J.on("tooltipHide",function(){I&&b.tooltip.cleanup()}),R.dispatch=J,R.scatter=ae,R.legend=ao,R.controls=af,R.xAxis=aj,R.yAxis=ag,R.distX=ai,R.distY=ad,d3.rebind(R,ae,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),R.options=b.utils.optionsFunc.bind(R),R.margin=function(f){return arguments.length?(aw.top=typeof f.top!="undefined"?f.top:aw.top,aw.right=typeof f.right!="undefined"?f.right:aw.right,aw.bottom=typeof f.bottom!="undefined"?f.bottom:aw.bottom,aw.left=typeof f.left!="undefined"?f.left:aw.left,R):aw},R.width=function(f){return arguments.length?(ar=f,R):ar},R.height=function(f){return arguments.length?(al=f,R):al},R.color=function(f){return arguments.length?(au=b.utils.getColor(f),ao.color(au),ai.color(au),ad.color(au),R):au},R.showDistX=function(f){return arguments.length?(ak=f,R):ak},R.showDistY=function(f){return arguments.length?(aq=f,R):aq},R.showControls=function(f){return arguments.length?(q=f,R):q},R.showLegend=function(f){return arguments.length?(Z=f,R):Z},R.showXAxis=function(f){return arguments.length?(av=f,R):av},R.showYAxis=function(f){return arguments.length?(ab=f,R):ab},R.rightAlignYAxis=function(f){return arguments.length?(U=f,ag.orient(f?"right":"left"),R):U},R.fisheye=function(f){return arguments.length?(aa=f,R):aa},R.xPadding=function(f){return arguments.length?(at=f,R):at},R.yPadding=function(f){return arguments.length?(ac=f,R):ac},R.tooltips=function(f){return arguments.length?(I=f,R):I},R.tooltipContent=function(f){return arguments.length?(K=f,R):K},R.tooltipXContent=function(f){return arguments.length?(W=f,R):W},R.tooltipYContent=function(f){return arguments.length?(am=f,R):am},R.state=function(f){return arguments.length?(Y=f,R):Y},R.defaultState=function(f){return arguments.length?(G=f,R):G},R.noData=function(f){return arguments.length?(ax=f,R):ax},R.transitionDuration=function(f){return arguments.length?(V=f,R):V},R},b.models.scatterPlusLineChart=function(){function U(f){return f.each(function(t){function r(){if(j){return u.select(".nv-point-paths").style("pointer-events","all"),!1}u.select(".nv-point-paths").style("pointer-events","none");var x=d3.mouse(this);al.distortion(K).focus(x[0]),ae.distortion(K).focus(x[1]),u.select(".nv-scatterWrap").datum(t.filter(function(y){return !y.disabled})).call(ab),am&&u.select(".nv-x.nv-axis").call(ag),W&&u.select(".nv-y.nv-axis").call(ad),u.select(".nv-distributionX").datum(t.filter(function(y){return !y.disabled})).call(af),u.select(".nv-distributionY").datum(t.filter(function(y){return !y.disabled})).call(aa)}var n=d3.select(this),s=this,h=(an||parseInt(n.style("width"))||960)-ar.left-ar.right,o=(ai||parseInt(n.style("height"))||400)-ar.top-ar.bottom;U.update=function(){n.transition().duration(G).call(U)},U.container=this,aj.disabled=t.map(function(x){return !!x.disabled});if(!I){var w;I={};for(w in aj){aj[w] instanceof Array?I[w]=aj[w].slice(0):I[w]=aj[w]}}if(!t||!t.length||!t.filter(function(x){return x.values.length}).length){var v=n.selectAll(".nv-noData").data([z]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",ar.left+h/2).attr("y",ar.top+o/2).text(function(x){return x}),U}n.selectAll(".nv-noData").remove(),al=ab.xScale(),ae=ab.yScale(),at=at||al,Q=Q||ae;var g=n.selectAll("g.nv-wrap.nv-scatterChart").data([t]),p=g.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+ab.id()),m=p.append("g"),u=g.select("g");m.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),m.append("g").attr("class","nv-x nv-axis"),m.append("g").attr("class","nv-y nv-axis"),m.append("g").attr("class","nv-scatterWrap"),m.append("g").attr("class","nv-regressionLinesWrap"),m.append("g").attr("class","nv-distWrap"),m.append("g").attr("class","nv-legendWrap"),m.append("g").attr("class","nv-controlsWrap"),g.attr("transform","translate("+ar.left+","+ar.top+")"),aq&&u.select(".nv-y.nv-axis").attr("transform","translate("+h+",0)"),ah&&(ak.width(h/2),g.select(".nv-legendWrap").datum(t).call(ak),ar.top!=ak.height()&&(ar.top=ak.height(),o=(ai||parseInt(n.style("height"))||400)-ar.top-ar.bottom),g.select(".nv-legendWrap").attr("transform","translate("+h/2+","+-ar.top+")")),Y&&(ac.width(180).color(["#444"]),u.select(".nv-controlsWrap").datum(J).attr("transform","translate(0,"+-ar.top+")").call(ac)),ab.width(h).height(o).color(t.map(function(y,x){return y.color||ap(y,x)}).filter(function(x,y){return !t[y].disabled})),g.select(".nv-scatterWrap").datum(t.filter(function(x){return !x.disabled})).call(ab),g.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+ab.id()+")");var k=g.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(x){return x});k.enter().append("g").attr("class","nv-regLines");var i=k.selectAll(".nv-regLine").data(function(x){return[x]}),l=i.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);i.transition().attr("x1",al.range()[0]).attr("x2",al.range()[1]).attr("y1",function(y,x){return ae(al.domain()[0]*y.slope+y.intercept)}).attr("y2",function(y,x){return ae(al.domain()[1]*y.slope+y.intercept)}).style("stroke",function(y,x,A){return ap(y,A)}).style("stroke-opacity",function(y,x){return y.disabled||typeof y.slope=="undefined"||typeof y.intercept=="undefined"?0:1}),am&&(ag.scale(al).ticks(ag.ticks()?ag.ticks():h/100).tickSize(-o,0),u.select(".nv-x.nv-axis").attr("transform","translate(0,"+ae.range()[0]+")").call(ag)),W&&(ad.scale(ae).ticks(ad.ticks()?ad.ticks():o/36).tickSize(-h,0),u.select(".nv-y.nv-axis").call(ad)),ao&&(af.getData(ab.x()).scale(al).width(h).color(t.map(function(y,x){return y.color||ap(y,x)}).filter(function(x,y){return !t[y].disabled})),m.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),u.select(".nv-distributionX").attr("transform","translate(0,"+ae.range()[0]+")").datum(t.filter(function(x){return !x.disabled})).call(af)),Z&&(aa.getData(ab.y()).scale(ae).width(o).color(t.map(function(y,x){return y.color||ap(y,x)}).filter(function(x,y){return !t[y].disabled})),m.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),u.select(".nv-distributionY").attr("transform","translate("+(aq?h:-aa.size())+",0)").datum(t.filter(function(x){return !x.disabled})).call(aa)),d3.fisheye&&(u.select(".nv-background").attr("width",h).attr("height",o),u.select(".nv-background").on("mousemove",r),u.select(".nv-background").on("click",function(){j=!j}),ab.dispatch.on("elementClick.freezeFisheye",function(){j=!j})),ac.dispatch.on("legendClick",function(y,x){y.disabled=!y.disabled,K=y.disabled?0:2.5,u.select(".nv-background").style("pointer-events",y.disabled?"none":"all"),u.select(".nv-point-paths").style("pointer-events",y.disabled?"all":"none"),y.disabled?(al.distortion(K).focus(0),ae.distortion(K).focus(0),u.select(".nv-scatterWrap").call(ab),u.select(".nv-x.nv-axis").call(ag),u.select(".nv-y.nv-axis").call(ad)):j=!1,U.update()}),ak.dispatch.on("stateChange",function(x){aj=x,V.stateChange(aj),U.update()}),ab.dispatch.on("elementMouseover.tooltip",function(x){d3.select(".nv-chart-"+ab.id()+" .nv-series-"+x.seriesIndex+" .nv-distx-"+x.pointIndex).attr("y1",x.pos[1]-o),d3.select(".nv-chart-"+ab.id()+" .nv-series-"+x.seriesIndex+" .nv-disty-"+x.pointIndex).attr("x2",x.pos[0]+af.size()),x.pos=[x.pos[0]+ar.left,x.pos[1]+ar.top],V.tooltipShow(x)}),V.on("tooltipShow",function(x){X&&q(x,s.parentNode)}),V.on("changeState",function(x){typeof x.disabled!="undefined"&&(t.forEach(function(y,A){y.disabled=x.disabled[A]}),aj.disabled=x.disabled),U.update()}),at=al.copy(),Q=ae.copy()}),U}var ab=b.models.scatter(),ag=b.models.axis(),ad=b.models.axis(),ak=b.models.legend(),ac=b.models.legend(),af=b.models.distribution(),aa=b.models.distribution(),ar={top:30,right:20,bottom:50,left:75},an=null,ai=null,ap=b.utils.defaultColor(),al=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):ab.xScale(),ae=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):ab.yScale(),ao=!1,Z=!1,ah=!0,am=!0,W=!0,aq=!1,Y=!!d3.fisheye,K=0,j=!1,X=!0,e=function(g,f,h){return"<strong>"+f+"</strong>"},F=function(g,f,h){return"<strong>"+h+"</strong>"},R=function(h,f,i,g){return"<h3>"+h+"</h3><p>"+g+"</p>"},aj={},I=null,V=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z="No Data Available.",G=250;ab.xScale(al).yScale(ae),ag.orient("bottom").tickPadding(10),ad.orient(aq?"right":"left").tickPadding(10),af.axis("x"),aa.axis("y"),ac.updateState(!1);var at,Q,q=function(n,y){var g=n.pos[0]+(y.offsetLeft||0),x=n.pos[1]+(y.offsetTop||0),p=n.pos[0]+(y.offsetLeft||0),k=ae.range()[0]+ar.top+(y.offsetTop||0),t=al.range()[0]+ar.left+(y.offsetLeft||0),r=n.pos[1]+(y.offsetTop||0),w=ag.tickFormat()(ab.x()(n.point,n.pointIndex)),h=ad.tickFormat()(ab.y()(n.point,n.pointIndex));e!=null&&b.tooltip.show([p,k],e(n.series.key,w,h,n,U),"n",1,y,"x-nvtooltip"),F!=null&&b.tooltip.show([t,r],F(n.series.key,w,h,n,U),"e",1,y,"y-nvtooltip"),R!=null&&b.tooltip.show([g,x],R(n.series.key,w,h,n.point.tooltip,n,U),n.value<0?"n":"s",null,y)},J=[{key:"Magnify",disabled:!0}];return ab.dispatch.on("elementMouseout.tooltip",function(f){V.tooltipHide(f),d3.select(".nv-chart-"+ab.id()+" .nv-series-"+f.seriesIndex+" .nv-distx-"+f.pointIndex).attr("y1",0),d3.select(".nv-chart-"+ab.id()+" .nv-series-"+f.seriesIndex+" .nv-disty-"+f.pointIndex).attr("x2",aa.size())}),V.on("tooltipHide",function(){X&&b.tooltip.cleanup()}),U.dispatch=V,U.scatter=ab,U.legend=ak,U.controls=ac,U.xAxis=ag,U.yAxis=ad,U.distX=af,U.distY=aa,d3.rebind(U,ab,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),U.options=b.utils.optionsFunc.bind(U),U.margin=function(f){return arguments.length?(ar.top=typeof f.top!="undefined"?f.top:ar.top,ar.right=typeof f.right!="undefined"?f.right:ar.right,ar.bottom=typeof f.bottom!="undefined"?f.bottom:ar.bottom,ar.left=typeof f.left!="undefined"?f.left:ar.left,U):ar},U.width=function(f){return arguments.length?(an=f,U):an},U.height=function(f){return arguments.length?(ai=f,U):ai},U.color=function(f){return arguments.length?(ap=b.utils.getColor(f),ak.color(ap),af.color(ap),aa.color(ap),U):ap},U.showDistX=function(f){return arguments.length?(ao=f,U):ao},U.showDistY=function(f){return arguments.length?(Z=f,U):Z},U.showControls=function(f){return arguments.length?(Y=f,U):Y},U.showLegend=function(f){return arguments.length?(ah=f,U):ah},U.showXAxis=function(f){return arguments.length?(am=f,U):am},U.showYAxis=function(f){return arguments.length?(W=f,U):W},U.rightAlignYAxis=function(f){return arguments.length?(aq=f,ad.orient(f?"right":"left"),U):aq},U.fisheye=function(f){return arguments.length?(K=f,U):K},U.tooltips=function(f){return arguments.length?(X=f,U):X},U.tooltipContent=function(f){return arguments.length?(R=f,U):R},U.tooltipXContent=function(f){return arguments.length?(e=f,U):e},U.tooltipYContent=function(f){return arguments.length?(F=f,U):F},U.state=function(f){return arguments.length?(aj=f,U):aj},U.defaultState=function(f){return arguments.length?(I=f,U):I},U.noData=function(f){return arguments.length?(z=f,U):z},U.transitionDuration=function(f){return arguments.length?(G=f,U):G},U},b.models.sparkline=function(){function x(f){return f.each(function(p){var n=k-B.left-B.right,r=e-B.top-B.bottom,u=d3.select(this);C.domain(m||d3.extent(p,A)).range(v||[0,n]),j.domain(y||d3.extent(p,z)).range(g||[r,0]);var h=u.selectAll("g.nv-wrap.nv-sparkline").data([p]),o=h.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),s=o.append("g"),t=h.select("g");h.attr("transform","translate("+B.left+","+B.top+")");var D=h.selectAll("path").data(function(i){return[i]});D.enter().append("path"),D.exit().remove(),D.style("stroke",function(E,i){return E.color||w(E,i)}).attr("d",d3.svg.line().x(function(E,i){return C(A(E,i))}).y(function(E,i){return j(z(E,i))}));var l=h.selectAll("circle.nv-point").data(function(I){function J(i){if(i!=-1){var K=I[i];return K.pointIndex=i,K}return null}var F=I.map(function(K,i){return z(K,i)}),H=J(F.lastIndexOf(j.domain()[1])),E=J(F.indexOf(j.domain()[0])),G=J(F.length-1);return[E,H,G].filter(function(i){return i!=null})});l.enter().append("circle"),l.exit().remove(),l.attr("cx",function(E,i){return C(A(E,E.pointIndex))}).attr("cy",function(E,i){return j(z(E,E.pointIndex))}).attr("r",2).attr("class",function(E,i){return A(E,E.pointIndex)==C.domain()[1]?"nv-point nv-currentValue":z(E,E.pointIndex)==j.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),x}var B={top:2,right:0,bottom:2,left:0},k=400,e=32,q=!0,C=d3.scale.linear(),j=d3.scale.linear(),A=function(f){return f.x},z=function(f){return f.y},w=b.utils.getColor(["#000"]),m,y,v,g;return x.options=b.utils.optionsFunc.bind(x),x.margin=function(f){return arguments.length?(B.top=typeof f.top!="undefined"?f.top:B.top,B.right=typeof f.right!="undefined"?f.right:B.right,B.bottom=typeof f.bottom!="undefined"?f.bottom:B.bottom,B.left=typeof f.left!="undefined"?f.left:B.left,x):B},x.width=function(f){return arguments.length?(k=f,x):k},x.height=function(f){return arguments.length?(e=f,x):e},x.x=function(f){return arguments.length?(A=d3.functor(f),x):A},x.y=function(f){return arguments.length?(z=d3.functor(f),x):z},x.xScale=function(f){return arguments.length?(C=f,x):C},x.yScale=function(f){return arguments.length?(j=f,x):j},x.xDomain=function(f){return arguments.length?(m=f,x):m},x.yDomain=function(f){return arguments.length?(y=f,x):y},x.xRange=function(f){return arguments.length?(v=f,x):v},x.yRange=function(f){return arguments.length?(g=f,x):g},x.animate=function(f){return arguments.length?(q=f,x):q},x.color=function(f){return arguments.length?(w=b.utils.getColor(f),x):w},x},b.models.sparklinePlus=function(){function B(f){return f.each(function(F){function s(){if(A){return}var K=h.selectAll(".nv-hoverValue").data(C),J=K.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);K.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),K.attr("transform",function(L){return"translate("+E(D.x()(F[L],L))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!C.length){return}J.append("line").attr("x1",0).attr("y1",-k.top).attr("x2",0).attr("y2",G),J.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-k.top).attr("text-anchor","end").attr("dy",".9em"),h.select(".nv-hoverValue .nv-xValue").text(x(D.x()(F[C[0]],C[0]))),J.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-k.top).attr("text-anchor","start").attr("dy",".9em"),h.select(".nv-hoverValue .nv-yValue").text(m(D.y()(F[C[0]],C[0])))}function u(){function J(O,P){var N=Math.abs(D.x()(O[0],0)-P),L=0;for(var M=0;M<O.length;M++){Math.abs(D.x()(O[M],M)-P)<N&&(N=Math.abs(D.x()(O[M],M)-P),L=M)}return L}if(A){return}var K=d3.mouse(this)[0]-k.left;C=[J(F,Math.round(E.invert(K)))],s()}var l=d3.select(this),r=(e||parseInt(l.style("width"))||960)-k.left-k.right,G=(q||parseInt(l.style("height"))||400)-k.top-k.bottom;B.update=function(){B(f)},B.container=this;if(!F||!F.length){var H=l.selectAll(".nv-noData").data([y]);return H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",k.left+r/2).attr("y",k.top+G/2).text(function(J){return J}),B}l.selectAll(".nv-noData").remove();var I=D.y()(F[F.length-1],F.length-1);E=D.xScale(),j=D.yScale();var p=l.selectAll("g.nv-wrap.nv-sparklineplus").data([F]),o=p.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),t=o.append("g"),h=p.select("g");t.append("g").attr("class","nv-sparklineWrap"),t.append("g").attr("class","nv-valueWrap"),t.append("g").attr("class","nv-hoverArea"),p.attr("transform","translate("+k.left+","+k.top+")");var n=h.select(".nv-sparklineWrap");D.width(r).height(G),n.call(D);var v=h.select(".nv-valueWrap"),i=v.selectAll(".nv-currentValue").data([I]);i.enter().append("text").attr("class","nv-currentValue").attr("dx",g?-8:8).attr("dy",".9em").style("text-anchor",g?"end":"start"),i.attr("x",r+(g?k.right:0)).attr("y",w?function(J){return j(J)}:0).style("fill",D.color()(F[F.length-1],F.length-1)).text(m(I)),t.select(".nv-hoverArea").append("rect").on("mousemove",u).on("click",function(){A=!A}).on("mouseout",function(){C=[],s()}),h.select(".nv-hoverArea rect").attr("transform",function(J){return"translate("+-k.left+","+-k.top+")"}).attr("width",r+k.left+k.right).attr("height",G+k.top)}),B}var D=b.models.sparkline(),k={top:15,right:100,bottom:10,left:50},e=null,q=null,E,j,C=[],A=!1,x=d3.format(",r"),m=d3.format(",.2f"),z=!0,w=!0,g=!1,y="No Data Available.";return B.sparkline=D,d3.rebind(B,D,"x","y","xScale","yScale","color"),B.options=b.utils.optionsFunc.bind(B),B.margin=function(f){return arguments.length?(k.top=typeof f.top!="undefined"?f.top:k.top,k.right=typeof f.right!="undefined"?f.right:k.right,k.bottom=typeof f.bottom!="undefined"?f.bottom:k.bottom,k.left=typeof f.left!="undefined"?f.left:k.left,B):k},B.width=function(f){return arguments.length?(e=f,B):e},B.height=function(f){return arguments.length?(q=f,B):q},B.xTickFormat=function(f){return arguments.length?(x=f,B):x},B.yTickFormat=function(f){return arguments.length?(m=f,B):m},B.showValue=function(f){return arguments.length?(z=f,B):z},B.alignValue=function(f){return arguments.length?(w=f,B):w},B.rightAlignValue=function(f){return arguments.length?(g=f,B):g},B.noData=function(f){return arguments.length?(y=f,B):y},B},b.models.stackedArea=function(){function A(f){return f.each(function(p){var u=q-H.left-H.right,t=e-H.top-H.bottom,v=d3.select(this);j=F.xScale(),C=F.yScale();var K=p;p.forEach(function(M,L){M.seriesIndex=L,M.values=M.values.map(function(N,O){return N.index=O,N.seriesIndex=L,N})});var m=p.filter(function(L){return !L.disabled});p=d3.layout.stack().order(x).offset(B).values(function(L){return L.values}).x(k).y(G).out(function(N,L,O){var M=G(N)===0?0:O;N.display={y:M,y0:L}})(m);var l=v.selectAll("g.nv-wrap.nv-stackedarea").data([p]),o=l.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),g=o.append("defs"),i=o.append("g"),s=l.select("g");i.append("g").attr("class","nv-areaWrap"),i.append("g").attr("class","nv-scatterWrap"),l.attr("transform","translate("+H.left+","+H.top+")"),F.width(u).height(t).x(k).y(function(L){return L.display.y+L.display.y0}).forceY([0]).color(p.map(function(M,L){return M.color||y(M,M.seriesIndex)}));var h=s.select(".nv-scatterWrap").datum(p);h.call(F),g.append("clipPath").attr("id","nv-edge-clip-"+I).append("rect"),l.select("#nv-edge-clip-"+I+" rect").attr("width",u).attr("height",t),s.attr("clip-path",z?"url(#nv-edge-clip-"+I+")":"");var n=d3.svg.area().x(function(M,L){return j(k(M,L))}).y0(function(L){return C(L.display.y0)}).y1(function(L){return C(L.display.y+L.display.y0)}).interpolate(D),r=d3.svg.area().x(function(M,L){return j(k(M,L))}).y0(function(L){return C(L.display.y0)}).y1(function(L){return C(L.display.y0)}),J=s.select(".nv-areaWrap").selectAll("path.nv-area").data(function(L){return L});J.enter().append("path").attr("class",function(M,L){return"nv-area nv-area-"+L}).attr("d",function(M,L){return r(M.values,M.seriesIndex)}).on("mouseover",function(M,L){d3.select(this).classed("hover",!0),w.areaMouseover({point:M,series:M.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:M.seriesIndex})}).on("mouseout",function(M,L){d3.select(this).classed("hover",!1),w.areaMouseout({point:M,series:M.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:M.seriesIndex})}).on("click",function(M,L){d3.select(this).classed("hover",!1),w.areaClick({point:M,series:M.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:M.seriesIndex})}),J.exit().remove(),J.style("fill",function(M,L){return M.color||y(M,M.seriesIndex)}).style("stroke",function(M,L){return M.color||y(M,M.seriesIndex)}),J.transition().attr("d",function(M,L){return n(M.values,L)}),F.dispatch.on("elementMouseover.area",function(L){s.select(".nv-chart-"+I+" .nv-area-"+L.seriesIndex).classed("hover",!0)}),F.dispatch.on("elementMouseout.area",function(L){s.select(".nv-chart-"+I+" .nv-area-"+L.seriesIndex).classed("hover",!1)}),A.d3_stackedOffset_stackPercent=function(Q){var N=Q.length,S=Q[0].length,P=1/N,M,O,R,L=[];for(O=0;O<S;++O){for(M=0,R=0;M<K.length;M++){R+=G(K[M].values[O])}if(R){for(M=0;M<N;M++){Q[M][O][1]/=R}}else{for(M=0;M<N;M++){Q[M][O][1]=P}}}for(O=0;O<S;++O){L[O]=0}return L}}),A}var H={top:0,right:0,bottom:0,left:0},q=960,e=500,y=b.utils.defaultColor(),I=Math.floor(Math.random()*100000),k=function(f){return f.x},G=function(f){return f.y},E="stack",B="zero",x="default",D="linear",z=!1,j,C,F=b.models.scatter(),w=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return F.size(2.2).sizeDomain([2.2,2.2]),F.dispatch.on("elementClick.area",function(f){w.areaClick(f)}),F.dispatch.on("elementMouseover.tooltip",function(f){f.pos=[f.pos[0]+H.left,f.pos[1]+H.top],w.tooltipShow(f)}),F.dispatch.on("elementMouseout.tooltip",function(f){w.tooltipHide(f)}),A.dispatch=w,A.scatter=F,d3.rebind(A,F,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),A.options=b.utils.optionsFunc.bind(A),A.x=function(f){return arguments.length?(k=d3.functor(f),A):k},A.y=function(f){return arguments.length?(G=d3.functor(f),A):G},A.margin=function(f){return arguments.length?(H.top=typeof f.top!="undefined"?f.top:H.top,H.right=typeof f.right!="undefined"?f.right:H.right,H.bottom=typeof f.bottom!="undefined"?f.bottom:H.bottom,H.left=typeof f.left!="undefined"?f.left:H.left,A):H},A.width=function(f){return arguments.length?(q=f,A):q},A.height=function(f){return arguments.length?(e=f,A):e},A.clipEdge=function(f){return arguments.length?(z=f,A):z},A.color=function(f){return arguments.length?(y=b.utils.getColor(f),A):y},A.offset=function(f){return arguments.length?(B=f,A):B},A.order=function(f){return arguments.length?(x=f,A):x},A.style=function(f){if(!arguments.length){return E}E=f;switch(E){case"stack":A.offset("zero"),A.order("default");break;case"stream":A.offset("wiggle"),A.order("inside-out");break;case"stream-center":A.offset("silhouette"),A.order("inside-out");break;case"expand":A.offset("expand"),A.order("default");break;case"stack_percent":A.offset(A.d3_stackedOffset_stackPercent),A.order("default")}return A},A.interpolate=function(f){return arguments.length?(D=f,A):D},A},b.models.stackedAreaChart=function(){function B(f){return f.each(function(p){var t=d3.select(this),g=this,n=(aj||parseInt(t.style("width"))||960)-J.left-J.right,s=(af||parseInt(t.style("height"))||400)-J.top-J.bottom;B.update=function(){t.transition().duration(V).call(B)},B.container=this,j.disabled=p.map(function(v){return !!v.disabled});if(!G){var i;G={};for(i in j){j[i] instanceof Array?G[i]=j[i].slice(0):G[i]=j[i]}}if(!p||!p.length||!p.filter(function(v){return v.values.length}).length){var l=t.selectAll(".nv-noData").data([e]);return l.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),l.attr("x",J.left+n/2).attr("y",J.top+s/2).text(function(v){return v}),B}t.selectAll(".nv-noData").remove(),ai=P.xScale(),H=P.yScale();var u=t.selectAll("g.nv-wrap.nv-stackedAreaChart").data([p]),r=u.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),h=u.select("g");r.append("rect").style("opacity",0),r.append("g").attr("class","nv-x nv-axis"),r.append("g").attr("class","nv-y nv-axis"),r.append("g").attr("class","nv-stackedWrap"),r.append("g").attr("class","nv-legendWrap"),r.append("g").attr("class","nv-controlsWrap"),r.append("g").attr("class","nv-interactive"),h.select("rect").attr("width",n).attr("height",s);if(ad){var m=ah?n-R:n;ac.width(m),h.select(".nv-legendWrap").datum(p).call(ac),J.top!=ac.height()&&(J.top=ac.height(),s=(af||parseInt(t.style("height"))||400)-J.top-J.bottom),h.select(".nv-legendWrap").attr("transform","translate("+(n-m)+","+-J.top+")")}if(ah){var k=[{key:D.stacked||"Stacked",metaKey:"Stacked",disabled:P.style()!="stack",style:"stack"},{key:D.stream||"Stream",metaKey:"Stream",disabled:P.style()!="stream",style:"stream"},{key:D.expanded||"Expanded",metaKey:"Expanded",disabled:P.style()!="expand",style:"expand"},{key:D.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:P.style()!="stack_percent",style:"stack_percent"}];R=ab.length/3*260,k=k.filter(function(v){return ab.indexOf(v.metaKey)!==-1}),Q.width(R).color(["#444","#444","#444"]),h.select(".nv-controlsWrap").datum(k).call(Q),J.top!=Math.max(Q.height(),ac.height())&&(J.top=Math.max(Q.height(),ac.height()),s=(af||parseInt(t.style("height"))||400)-J.top-J.bottom),h.select(".nv-controlsWrap").attr("transform","translate(0,"+-J.top+")")}u.attr("transform","translate("+J.left+","+J.top+")"),I&&h.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),Z&&(X.width(n).height(s).margin({left:J.left,top:J.top}).svgContainer(t).xScale(ai),u.select(".nv-interactive").call(X)),P.width(n).height(s);var o=h.select(".nv-stackedWrap").datum(p);o.transition().call(P),W&&(Y.scale(ai).ticks(n/100).tickSize(-s,0),h.select(".nv-x.nv-axis").attr("transform","translate(0,"+s+")"),h.select(".nv-x.nv-axis").transition().duration(0).call(Y)),ag&&(U.scale(H).ticks(P.offset()=="wiggle"?0:s/36).tickSize(-n,0).setTickFormat(P.style()=="expand"||P.style()=="stack_percent"?d3.format("%"):K),h.select(".nv-y.nv-axis").transition().duration(0).call(U)),P.dispatch.on("areaClick.toggle",function(v){p.filter(function(w){return !w.disabled}).length===1?p.forEach(function(w){w.disabled=!1}):p.forEach(function(w,x){w.disabled=x!=v.seriesIndex}),j.disabled=p.map(function(w){return !!w.disabled}),z.stateChange(j),B.update()}),ac.dispatch.on("stateChange",function(v){j.disabled=v.disabled,z.stateChange(j),B.update()}),Q.dispatch.on("legendClick",function(v,w){if(!v.disabled){return}k=k.map(function(x){return x.disabled=!0,x}),v.disabled=!1,P.style(v.style),j.style=P.style(),z.stateChange(j),B.update()}),X.dispatch.on("elementMousemove",function(y){P.clearHighlights();var O,M,C,L=[];p.filter(function(S,v){return S.seriesIndex=v,!S.disabled}).forEach(function(ak,S){M=b.interactiveBisect(ak.values,y.pointXValue,B.x()),P.highlightPoint(S,M,!0);var T=ak.values[M];if(typeof T=="undefined"){return}typeof O=="undefined"&&(O=T),typeof C=="undefined"&&(C=B.xScale()(B.x()(T,M)));var v=P.style()=="expand"?T.display.y:B.y()(T,M);L.push({key:ak.key,value:v,color:aa(ak,ak.seriesIndex),stackedValue:T.display})}),L.reverse();if(L.length>2){var A=B.yScale().invert(y.mouseY),w=Infinity,E=null;L.forEach(function(T,v){A=Math.abs(A);var ak=Math.abs(T.stackedValue.y0),S=Math.abs(T.stackedValue.y);if(A>=ak&&A<=S+ak){E=v;return}}),E!=null&&(L[E].highlight=!0)}var N=Y.tickFormat()(B.x()(O,M)),x=P.style()=="expand"?function(S,v){return d3.format(".1%")(S)}:function(S,v){return U.tickFormat()(S)};X.tooltip.position({left:C+J.left,top:y.mouseY+J.top}).chartContainer(g.parentNode).enabled(ae).valueFormatter(x).data({value:N,series:L})(),X.renderGuideLine(C)}),X.dispatch.on("elementMouseout",function(v){z.tooltipHide(),P.clearHighlights()}),z.on("tooltipShow",function(v){ae&&q(v,g.parentNode)}),z.on("changeState",function(v){typeof v.disabled!="undefined"&&p.length===v.disabled.length&&(p.forEach(function(w,x){w.disabled=v.disabled[x]}),j.disabled=v.disabled),typeof v.style!="undefined"&&P.style(v.style),B.update()})}),B}var P=b.models.stackedArea(),Y=b.models.axis(),U=b.models.axis(),ac=b.models.legend(),Q=b.models.legend(),X=b.interactiveGuideline(),J={top:30,right:25,bottom:50,left:60},aj=null,af=null,aa=b.utils.defaultColor(),ah=!0,ad=!0,W=!0,ag=!0,I=!1,Z=!1,ae=!0,F=function(k,g,l,h,f){return"<h3>"+k+"</h3><p>"+l+" on "+g+"</p>"},ai,H,K=d3.format(",.2f"),j={style:P.style()},G=null,e="No Data Available.",z=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),R=250,ab=["Stacked","Stream","Expanded"],D={},V=250;Y.orient("bottom").tickPadding(7),U.orient(I?"right":"left"),Q.updateState(!1);var q=function(m,n){var r=m.pos[0]+(n.offsetLeft||0),k=m.pos[1]+(n.offsetTop||0),h=Y.tickFormat()(P.x()(m.point,m.pointIndex)),p=U.tickFormat()(P.y()(m.point,m.pointIndex)),g=F(m.series.key,h,p,m,B);b.tooltip.show([r,k],g,m.value<0?"n":"s",null,n)};return P.dispatch.on("tooltipShow",function(f){f.pos=[f.pos[0]+J.left,f.pos[1]+J.top],z.tooltipShow(f)}),P.dispatch.on("tooltipHide",function(f){z.tooltipHide(f)}),z.on("tooltipHide",function(){ae&&b.tooltip.cleanup()}),B.dispatch=z,B.stacked=P,B.legend=ac,B.controls=Q,B.xAxis=Y,B.yAxis=U,B.interactiveLayer=X,d3.rebind(B,P,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),B.options=b.utils.optionsFunc.bind(B),B.margin=function(f){return arguments.length?(J.top=typeof f.top!="undefined"?f.top:J.top,J.right=typeof f.right!="undefined"?f.right:J.right,J.bottom=typeof f.bottom!="undefined"?f.bottom:J.bottom,J.left=typeof f.left!="undefined"?f.left:J.left,B):J},B.width=function(f){return arguments.length?(aj=f,B):aj},B.height=function(f){return arguments.length?(af=f,B):af},B.color=function(f){return arguments.length?(aa=b.utils.getColor(f),ac.color(aa),P.color(aa),B):aa},B.showControls=function(f){return arguments.length?(ah=f,B):ah},B.showLegend=function(f){return arguments.length?(ad=f,B):ad},B.showXAxis=function(f){return arguments.length?(W=f,B):W},B.showYAxis=function(f){return arguments.length?(ag=f,B):ag},B.rightAlignYAxis=function(f){return arguments.length?(I=f,U.orient(f?"right":"left"),B):I},B.useInteractiveGuideline=function(f){return arguments.length?(Z=f,f===!0&&(B.interactive(!1),B.useVoronoi(!1)),B):Z},B.tooltip=function(f){return arguments.length?(F=f,B):F},B.tooltips=function(f){return arguments.length?(ae=f,B):ae},B.tooltipContent=function(f){return arguments.length?(F=f,B):F},B.state=function(f){return arguments.length?(j=f,B):j},B.defaultState=function(f){return arguments.length?(G=f,B):G},B.noData=function(f){return arguments.length?(e=f,B):e},B.transitionDuration=function(f){return arguments.length?(V=f,B):V},B.controlsData=function(f){return arguments.length?(ab=f,B):ab},B.controlLabels=function(f){return arguments.length?typeof f!="object"?D:(D=f,B):D},U.setTickFormat=U.tickFormat,U.tickFormat=function(f){return arguments.length?(K=f,U):K},B}})();